"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/app/admin/wallet/page",{

/***/ "(app-pages-browser)/./src/app/app/admin/wallet/page.js":
/*!******************************************!*\
  !*** ./src/app/app/admin/wallet/page.js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Page)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/firebase */ \"(app-pages-browser)/./src/firebase.js\");\n/* harmony import */ var _app_Components_Layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/app/Components/Layout */ \"(app-pages-browser)/./src/app/Components/Layout/index.js\");\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   updateDoc,\n//   serverTimestamp,\n//   orderBy,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [admin, setAdmin] = useState(null);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [currentBalance, setCurrentBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [amountToDeduct, setAmountToDeduct] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   const [submitting, setSubmitting] = useState(false);\n//   const [depositRequests, setDepositRequests] = useState([]);\n//   const [withdrawRequests, setWithdrawRequests] = useState([]);\n//   const [refreshKey, setRefreshKey] = useState(0); // To re-fetch after approve/reject\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, (user) => {\n//       setAdmin(user);\n//     });\n//     return () => unsubscribe();\n//   }, [auth]);\n//   useEffect(() => {\n//     if (!admin) return;\n//     const fetchRequests = async () => {\n//       // Deposit\n//       const depQ = query(\n//         collection(db, 'depositRequests'),\n//         where('status', '==', 'pending'),\n//         orderBy('createdAt', 'desc')\n//       );\n//       const depSnap = await getDocs(depQ);\n//       setDepositRequests(depSnap.docs.map((doc) => ({ id: doc.id, ...doc.data() })));\n//       // Withdraw\n//       const withQ = query(\n//         collection(db, 'withdrawRequests'),\n//         where('status', '==', 'pending'),\n//         orderBy('createdAt', 'desc')\n//       );\n//       const withSnap = await getDocs(withQ);\n//       setWithdrawRequests(withSnap.docs.map((doc) => ({ id: doc.id, ...doc.data() })));\n//     };\n//     fetchRequests();\n//   }, [admin, db, refreshKey]);\n//   const handleSearch = async () => {\n//     if (!targetEmail) {\n//       alert('Enter a valid email.');\n//       return;\n//     }\n//     setLoading(true);\n//     try {\n//       const walletQuery = query(\n//         collection(db, 'wallets'),\n//         where('email', '==', targetEmail)\n//       );\n//       const walletSnap = await getDocs(walletQuery);\n//       if (!walletSnap.empty) {\n//         const walletDoc = walletSnap.docs[0];\n//         setTargetUid(walletDoc.data().uid);\n//         setCurrentBalance(walletDoc.data().balance ?? 0);\n//       } else {\n//         alert(\n//           'Wallet not found. Ask the user to login once so their wallet is auto-created.'\n//         );\n//         setTargetUid('');\n//         setCurrentBalance(null);\n//       }\n//     } catch (error) {\n//       console.error('Error during search:', error);\n//       alert('Error searching for wallet.');\n//     }\n//     setLoading(false);\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid) {\n//       alert('Search and select a user first.');\n//       return;\n//     }\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       alert('Enter a valid positive amount.');\n//       return;\n//     }\n//     setSubmitting(true);\n//     try {\n//       const walletRef = doc(db, 'wallets', targetUid);\n//       await updateDoc(walletRef, {\n//         balance: (currentBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setCurrentBalance((prev) => (prev ?? 0) + amount);\n//       setAmountToAdd('');\n//       alert('Wallet balance updated successfully!');\n//     } catch (error) {\n//       console.error('Error updating wallet:', error);\n//       alert('Failed to update wallet.');\n//     } finally {\n//       setSubmitting(false);\n//     }\n//   };\n//   const handleDeductBalance = async () => {\n//     if (!targetUid) {\n//       alert('Search and select a user first.');\n//       return;\n//     }\n//     const amount = parseFloat(amountToDeduct);\n//     if (isNaN(amount) || amount <= 0) {\n//       alert('Enter a valid positive amount.');\n//       return;\n//     }\n//     if (amount > (currentBalance ?? 0)) {\n//       alert('Cannot deduct more than the current balance.');\n//       return;\n//     }\n//     setSubmitting(true);\n//     try {\n//       const walletRef = doc(db, 'wallets', targetUid);\n//       await updateDoc(walletRef, {\n//         balance: (currentBalance ?? 0) - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setCurrentBalance((prev) => (prev ?? 0) - amount);\n//       setAmountToDeduct('');\n//       alert('Wallet balance deducted successfully!');\n//     } catch (error) {\n//       console.error('Error deducting wallet:', error);\n//       alert('Failed to deduct wallet balance.');\n//     } finally {\n//       setSubmitting(false);\n//     }\n//   };\n//   const handleStatusChange = async (collectionName, id, newStatus) => {\n//     try {\n//       const ref = doc(db, collectionName, id);\n//       await updateDoc(ref, {\n//         status: newStatus,\n//         updatedAt: serverTimestamp(),\n//       });\n//       alert(`Request marked as ${newStatus}`);\n//       setRefreshKey((prev) => prev + 1);\n//     } catch (error) {\n//       console.error('Error updating status:', error);\n//       alert('Failed to update status.');\n//     }\n//   };\n//   if (!admin) {\n//     return (\n//       <div className=\"min-h-screen flex items-center justify-center bg-gray-900 text-white\">\n//         <p>Please login as admin to manage wallets.</p>\n//       </div>\n//     );\n//   }\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-start p-8 space-y-8\">\n//         <div className=\"bg-gray-800 rounded-lg shadow-2xl p-6 max-w-md w-full\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">\n//             Admin: Manage Wallet\n//           </h1>\n//           <div className=\"mb-4\">\n//             <label className=\"block mb-2\">User Email</label>\n//             <input\n//               type=\"email\"\n//               value={targetEmail}\n//               onChange={(e) => setTargetEmail(e.target.value)}\n//               placeholder=\"Enter user email\"\n//               className=\"w-full px-4 py-3 rounded bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400\"\n//             />\n//             <button\n//               onClick={handleSearch}\n//               disabled={loading}\n//               className={`mt-2 w-full py-3 rounded-md font-semibold text-black ${\n//                 loading\n//                   ? 'bg-yellow-100 cursor-not-allowed'\n//                   : 'bg-yellow-400 hover:bg-yellow-500'\n//               }`}\n//             >\n//               {loading ? 'Searching...' : 'Find Wallet'}\n//             </button>\n//           </div>\n//           {targetUid && (\n//             <div className=\"mb-4\">\n//               <p className=\"text-sm mb-1 text-gray-400 break-all\">\n//                 UID: <span className=\"font-medium\">{targetUid}</span>\n//               </p>\n//               <p className=\"text-lg mb-4\">\n//                 Current Balance:{' '}\n//                 <span className=\"text-yellow-400 font-semibold\">\n//                   ₹{currentBalance?.toFixed(2)}\n//                 </span>\n//               </p>\n//               <label className=\"block mb-2\">Add Balance</label>\n//               <input\n//                 type=\"number\"\n//                 min=\"0\"\n//                 step=\"0.01\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//                 placeholder=\"Enter amount to add\"\n//                 className=\"w-full px-4 py-3 mb-2 rounded bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400\"\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 disabled={submitting}\n//                 className={`w-full py-3 rounded-md font-semibold text-black ${\n//                   submitting\n//                     ? 'bg-yellow-100 cursor-not-allowed'\n//                     : 'bg-yellow-400 hover:bg-yellow-500'\n//                 }`}\n//               >\n//                 {submitting ? 'Updating...' : 'Add Balance'}\n//               </button>\n//               <label className=\"block mb-2 mt-6\">Deduct Balance</label>\n//               <input\n//                 type=\"number\"\n//                 min=\"0\"\n//                 step=\"0.01\"\n//                 value={amountToDeduct}\n//                 onChange={(e) => setAmountToDeduct(e.target.value)}\n//                 placeholder=\"Enter amount to deduct\"\n//                 className=\"w-full px-4 py-3 mb-2 rounded bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-red-400\"\n//               />\n//               <button\n//                 onClick={handleDeductBalance}\n//                 disabled={submitting}\n//                 className={`w-full py-3 rounded-md font-semibold text-black ${\n//                   submitting\n//                     ? 'bg-red-100 cursor-not-allowed'\n//                     : 'bg-red-500 hover:bg-red-600'\n//                 }`}\n//               >\n//                 {submitting ? 'Updating...' : 'Deduct Balance'}\n//               </button>\n//             </div>\n//           )}\n//         </div>\n//         {/* Deposit Requests */}\n//         <div className=\"bg-gray-800 rounded-lg shadow-2xl p-6 max-w-2xl w-full\">\n//           <h2 className=\"text-xl font-bold mb-4\">Deposit Requests</h2>\n//           {depositRequests.length === 0 && (\n//             <p className=\"text-gray-400\">No deposit requests found.</p>\n//           )}\n//           {depositRequests.map((req) => (\n//             <div\n//               key={req.id}\n//               className=\"mb-4 border-b border-gray-600 pb-2 text-sm\"\n//             >\n//               <p>Email: {req.email}</p>\n//               <p>Amount: ₹{req.amount}</p>\n//               <p>Txn ID: {req.transactionId}</p>\n//               <p>Status: <span className=\"font-bold\">{req.status}</span></p>\n//               <p>\n//                 Date:{' '}\n//                 {req.createdAt?.toDate\n//                   ? req.createdAt.toDate().toLocaleString()\n//                   : 'N/A'}\n//               </p>\n//               <div className=\"mt-2 flex gap-2\">\n//                 <button\n//                   onClick={() => handleStatusChange('depositRequests', req.id, 'approved')}\n//                   className=\"bg-green-500 hover:bg-green-600 text-black font-semibold py-1 px-3 rounded\"\n//                 >\n//                   Approve\n//                 </button>\n//                 <button\n//                   onClick={() => handleStatusChange('depositRequests', req.id, 'rejected')}\n//                   className=\"bg-red-500 hover:bg-red-600 text-black font-semibold py-1 px-3 rounded\"\n//                 >\n//                   Reject\n//                 </button>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//         {/* Withdraw Requests */}\n//         {/* <div className=\"bg-gray-800 rounded-lg shadow-2xl p-6 max-w-2xl w-full\">\n//           <h2 className=\"text-xl font-bold mb-4\">Withdraw Requests</h2>\n//           {withdrawRequests.length === 0 && (\n//             <p className=\"text-gray-400\">No withdraw requests found.</p>\n//           )}\n//           {withdrawRequests.map((req) => (\n//             <div\n//               key={req.id}\n//               className=\"mb-4 border-b border-gray-600 pb-2 text-sm\"\n//             >\n//               <p>Email: {req.email}</p>\n//               <p>Amount: ₹{req.amount}</p>\n//               <p>Status: <span className=\"font-bold\">{req.status}</span></p>\n//               <p>\n//                 Date:{' '}\n//                 {req.createdAt?.toDate\n//                   ? req.createdAt.toDate().toLocaleString()\n//                   : 'N/A'}\n//               </p>\n//               <div className=\"mt-2 flex gap-2\">\n//                 <button\n//                   onClick={() => handleStatusChange('withdrawRequests', req.id, 'approved')}\n//                   className=\"bg-green-500 hover:bg-green-600 text-black font-semibold py-1 px-3 rounded\"\n//                 >\n//                   Approve\n//                 </button>\n//                 <button\n//                   onClick={() => handleStatusChange('withdrawRequests', req.id, 'rejected')}\n//                   className=\"bg-red-500 hover:bg-red-600 text-black font-semibold py-1 px-3 rounded\"\n//                 >\n//                   Reject\n//                 </button>\n//               </div>\n//             </div>\n//           ))}\n//         </div> */}\n//         <div className=\"bg-gray-800 rounded-lg shadow-2xl p-6 max-w-2xl w-full\">\n//   <h2 className=\"text-xl font-bold mb-4\">Withdraw Requests</h2>\n//   {withdrawRequests.length === 0 && (\n//     <p className=\"text-gray-400\">No withdraw requests found.</p>\n//   )}\n//   {withdrawRequests.map((req) => (\n//     <div\n//       key={req.id}\n//       className=\"mb-4 border-b border-gray-600 pb-3 text-sm\"\n//     >\n//       <p><span className=\"font-semibold\">Email:</span> {req.email}</p>\n//       <p><span className=\"font-semibold\">Amount:</span> ₹{req.amount}</p>\n//       <p><span className=\"font-semibold\">Status:</span> <span className=\"font-bold\">{req.status}</span></p>\n//       <p>\n//         <span className=\"font-semibold\">Date:</span>{' '}\n//         {req.createdAt?.toDate\n//           ? req.createdAt.toDate().toLocaleString()\n//           : 'N/A'}\n//       </p>\n//       <p><span className=\"font-semibold\">Method:</span> {req.method || 'N/A'}</p>\n//       <p><span className=\"font-semibold\">Address:</span> {req.address || 'N/A'}</p>\n//       <div className=\"mt-2 flex gap-2\">\n//         <button\n//           onClick={() => handleStatusChange('withdrawRequests', req.id, 'approved')}\n//           className=\"bg-green-500 hover:bg-green-600 text-black font-semibold py-1 px-3 rounded\"\n//         >\n//           Approve\n//         </button>\n//         <button\n//           onClick={() => handleStatusChange('withdrawRequests', req.id, 'rejected')}\n//           className=\"bg-red-500 hover:bg-red-600 text-black font-semibold py-1 px-3 rounded\"\n//         >\n//           Reject\n//         </button>\n//       </div>\n//     </div>\n//   ))}\n// </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [subadmin, setSubadmin] = useState(null);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [currentBalance, setCurrentBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, (user) => {\n//       setSubadmin(user);\n//     });\n//     return () => unsubscribe();\n//   }, [auth]);\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setCurrentBalance(null);\n//     try {\n//       const walletQuery = query(\n//         collection(db, 'wallets'),\n//         where('email', '==', targetEmail)\n//       );\n//       const snapshot = await getDocs(walletQuery);\n//       if (snapshot.empty) {\n//         setMessage('❌ Wallet not found. Ask user to log in once.');\n//         return;\n//       }\n//       const wallet = snapshot.docs[0].data();\n//       // ✅ Allow only if wallet.subAdminId matches current subadmin.uid\n//       if (wallet.subAdminId !== subadmin?.uid) {\n//         setMessage('❌ Access denied. This user was not created by you.');\n//         return;\n//       }\n//       setTargetUid(wallet.uid);\n//       setCurrentBalance(wallet.balance ?? 0);\n//       setMessage('✅ Wallet found and verified.');\n//     } catch (error) {\n//       console.error('Search error:', error);\n//       setMessage('❌ Failed to search wallet.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Enter valid amount.');\n//       return;\n//     }\n//     try {\n//       const walletRef = doc(db, 'wallets', targetUid);\n//       await updateDoc(walletRef, {\n//         balance: (currentBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setCurrentBalance((prev) => (prev ?? 0) + amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Balance added.');\n//     } catch (err) {\n//       console.error('Add error:', err);\n//       setMessage('❌ Failed to add balance.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8 flex justify-center\">\n//         <div className=\"w-full max-w-xl bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">Subadmin: Add Balance</h1>\n//           <input\n//             type=\"email\"\n//             placeholder=\"User email\"\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && (\n//             <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>\n//           )}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Current Balance: ₹{currentBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to add\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Add Balance\n//               </button>\n//             </>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [admin, setAdmin] = useState(null);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [currentBalance, setCurrentBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, (user) => {\n//       setAdmin(user);\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setCurrentBalance(null);\n//     try {\n//       const q = query(\n//         collection(db, 'wallets'),\n//         where('email', '==', targetEmail)\n//       );\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Wallet not found. Ask user to login once.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       setTargetUid(wallet.uid);\n//       setCurrentBalance(wallet.balance ?? 0);\n//       setMessage('✅ Sub-admin wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error fetching wallet.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Enter a valid amount.');\n//       return;\n//     }\n//     try {\n//       const walletRef = doc(db, 'wallets', targetUid);\n//       await updateDoc(walletRef, {\n//         balance: (currentBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setCurrentBalance((prev) => (prev ?? 0) + amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Balance successfully added to subadmin.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to update wallet.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8 flex justify-center\">\n//         <div className=\"w-full max-w-xl bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">Admin: Fund Sub-admin</h1>\n//           <input\n//             type=\"email\"\n//             placeholder=\"Sub-admin email\"\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && (\n//             <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>\n//           )}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Current Balance: ₹{currentBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to add\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Add Balance\n//               </button>\n//             </>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [admin, setAdmin] = useState(null);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [currentBalance, setCurrentBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, (user) => {\n//       setAdmin(user);\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setCurrentBalance(null);\n//     try {\n//       const q = query(\n//         collection(db, 'subwallets'), // ✅ Use 'subwallets' here\n//         where('email', '==', targetEmail)\n//       );\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Subadmin wallet not found. Ask them to login once.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       setTargetUid(wallet.uid);\n//       setCurrentBalance(wallet.balance ?? 0);\n//       setMessage('✅ Subadmin wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error fetching subadmin wallet.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Enter a valid amount.');\n//       return;\n//     }\n//     try {\n//       const walletRef = doc(db, 'subwallets', targetUid); // ✅ Use 'subwallets'\n//       await updateDoc(walletRef, {\n//         balance: (currentBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setCurrentBalance((prev) => (prev ?? 0) + amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Balance successfully added to subadmin.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to update subadmin wallet.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8 flex justify-center\">\n//         <div className=\"w-full max-w-xl bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">Admin: Fund Sub-admin Wallet</h1>\n//           <input\n//             type=\"email\"\n//             placeholder=\"Subadmin Email\"\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Subadmin Wallet'}\n//           </button>\n//           {message && (\n//             <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>\n//           )}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Current Balance: ₹{currentBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to add\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Add Balance\n//               </button>\n//             </>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [admin, setAdmin] = useState(null);\n//   const [adminBalance, setAdminBalance] = useState(0);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [subadminBalance, setSubadminBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   // ✅ Get current admin\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       setAdmin(user);\n//       if (user) {\n//         const adminWalletRef = doc(db, 'adminwallets', user.uid);\n//         const adminWalletSnap = await getDoc(adminWalletRef);\n//         if (adminWalletSnap.exists()) {\n//           const data = adminWalletSnap.data();\n//           setAdminBalance(data.balance ?? 0);\n//         }\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setSubadminBalance(null);\n//     try {\n//       const q = query(\n//         collection(db, 'subwallets'),\n//         where('email', '==', targetEmail)\n//       );\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Subadmin wallet not found.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       setTargetUid(wallet.uid);\n//       setSubadminBalance(wallet.balance ?? 0);\n//       setMessage('✅ Subadmin wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error fetching subadmin wallet.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Enter a valid amount.');\n//       return;\n//     }\n//     if (amount > adminBalance) {\n//       setMessage('❌ Insufficient admin balance.');\n//       return;\n//     }\n//     try {\n//       const subRef = doc(db, 'subwallets', targetUid);\n//       const adminRef = doc(db, 'adminwallets', admin.uid);\n//       // ✅ Update both wallets\n//       await updateDoc(subRef, {\n//         balance: (subadminBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(adminRef, {\n//         balance: adminBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setSubadminBalance((prev) => (prev ?? 0) + amount);\n//       setAdminBalance((prev) => prev - amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Transfer successful.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to update balances.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8 flex justify-center\">\n//         <div className=\"w-full max-w-xl bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">Admin: Fund Sub-admin Wallet</h1>\n//           <p className=\"mb-4 text-green-400\">Your Balance: ₹{adminBalance.toFixed(2)}</p>\n//           <input\n//             type=\"email\"\n//             placeholder=\"Subadmin Email\"\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Subadmin Wallet'}\n//           </button>\n//           {message && (\n//             <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>\n//           )}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Subadmin Balance: ₹{subadminBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to transfer\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Transfer Funds\n//               </button>\n//             </>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [currentBalance, setCurrentBalance] = useState(0);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [targetBalance, setTargetBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   // ✅ Get current user, role, and wallet balance\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       setCurrentUser(user);\n//       if (user) {\n//         const userRef = doc(db, 'users', user.uid);\n//         const snap = await getDoc(userRef);\n//         const userData = snap.exists() ? snap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n//         const walletRef = doc(db, walletCol, user.uid);\n//         const walletSnap = await getDoc(walletRef);\n//         const balance = walletSnap.exists() ? walletSnap.data().balance ?? 0 : 0;\n//         setCurrentBalance(balance);\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setTargetBalance(null);\n//     try {\n//       const targetWalletCol = role === 'admin' ? 'subwallets' : 'subwallets'; // subadmins & users\n//       const q = query(\n//         collection(db, targetWalletCol),\n//         where('email', '==', targetEmail)\n//       );\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Wallet not found.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       const uid = wallet.uid;\n//       // ✅ If subadmin: only allow depositing to their own users\n//       if (role === 'subadmin' && wallet.subAdminId !== currentUser.uid) {\n//         setMessage('❌ You can only fund users created by you.');\n//         return;\n//       }\n//       setTargetUid(uid);\n//       setTargetBalance(wallet.balance ?? 0);\n//       setMessage('✅ Wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error fetching wallet.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Enter a valid amount.');\n//       return;\n//     }\n//     if (amount > currentBalance) {\n//       setMessage('❌ Insufficient balance.');\n//       return;\n//     }\n//     try {\n//       const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//       const toWalletCol = 'subwallets'; // All receivers are in subwallets\n//       const fromRef = doc(db, fromWalletCol, currentUser.uid);\n//       const toRef = doc(db, toWalletCol, targetUid);\n//       // ✅ Transfer funds\n//       await updateDoc(toRef, {\n//         balance: (targetBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(fromRef, {\n//         balance: currentBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setTargetBalance((prev) => (prev ?? 0) + amount);\n//       setCurrentBalance((prev) => prev - amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Transfer successful.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to update balances.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8 flex justify-center\">\n//         <div className=\"w-full max-w-xl bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">\n//             {role === 'admin' ? 'Admin: Fund Subadmin' : 'Subadmin: Fund User'}\n//           </h1>\n//           <p className=\"mb-4 text-green-400\">\n//             Your Balance: ₹{currentBalance.toFixed(2)}\n//           </p>\n//           <input\n//             type=\"email\"\n//             placeholder={\n//               role === 'admin' ? 'Subadmin Email' : 'User Email'\n//             }\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && (\n//             <p className=\"text-center text-sm mb-4 text-yellow-400\">\n//               {message}\n//             </p>\n//           )}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">\n//                 Recipient Balance: ₹{targetBalance?.toFixed(2)}\n//               </p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to transfer\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Transfer Funds\n//               </button>\n//             </>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useEffect, useState } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [requests, setRequests] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       if (user) {\n//         setCurrentUser(user);\n//         const userSnap = await getDoc(doc(db, 'users', user.uid));\n//         const userData = userSnap.exists() ? userSnap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         fetchWithdrawRequests(user.uid, userRole);\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const fetchWithdrawRequests = async (uid, userRole) => {\n//     try {\n//       const colRef = collection(db, 'subwithdrawRequests');\n//       let q = null;\n//       if (userRole === 'admin') {\n//         // Admin sees requests from subadmins\n//         const subadminSnap = await getDocs(\n//           query(collection(db, 'users'), where('role', '==', 'subadmin'))\n//         );\n//         const subadminIds = subadminSnap.docs.map((doc) => doc.id);\n//         q = query(colRef, where('uid', 'in', subadminIds));\n//       } else if (userRole === 'subadmin') {\n//         // Subadmin sees requests from users they created\n//         const userSnap = await getDocs(\n//           query(collection(db, 'subwallets'), where('subAdminId', '==', uid))\n//         );\n//         const userIds = userSnap.docs.map((doc) => doc.id);\n//         if (userIds.length === 0) {\n//           setRequests([]);\n//           setLoading(false);\n//           return;\n//         }\n//         q = query(colRef, where('uid', 'in', userIds));\n//       }\n//       const reqSnap = await getDocs(q);\n//       const formatted = reqSnap.docs.map((doc) => ({\n//         id: doc.id,\n//         ...doc.data(),\n//       }));\n//       setRequests(formatted);\n//     } catch (error) {\n//       console.error('Error fetching withdrawal requests:', error);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleApprove = async (request) => {\n//     const confirm = window.confirm(`Approve withdrawal of ₹${request.amount}?`);\n//     if (!confirm) return;\n//     try {\n//       const requestRef = doc(db, 'subwithdrawRequests', request.id);\n//       // Deduct from user's wallet\n//       const userWalletRef = doc(db, 'subwallets', request.uid);\n//       const userSnap = await getDoc(userWalletRef);\n//       const userBal = userSnap.data().balance ?? 0;\n//       if (userBal < request.amount) {\n//         alert('Insufficient user balance.');\n//         return;\n//       }\n//       // Credit to subadmin wallet (if subadmin)\n//       if (role === 'subadmin') {\n//         const subWalletRef = doc(db, 'subwallets', currentUser.uid);\n//         const subSnap = await getDoc(subWalletRef);\n//         const subBal = subSnap.data().balance ?? 0;\n//         await updateDoc(subWalletRef, {\n//           balance: subBal + request.amount,\n//           updatedAt: serverTimestamp(),\n//         });\n//       }\n//       // Update user wallet and mark request as approved\n//       await updateDoc(userWalletRef, {\n//         balance: userBal - request.amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(requestRef, {\n//         status: 'approved',\n//         updatedAt: serverTimestamp(),\n//       });\n//       alert('Withdrawal approved!');\n//       setRequests((prev) =>\n//         prev.map((r) =>\n//           r.id === request.id ? { ...r, status: 'approved' } : r\n//         )\n//       );\n//     } catch (err) {\n//       console.error(err);\n//       alert('Error approving request.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-6\">\n//         <div className=\"max-w-4xl mx-auto bg-gray-800 rounded-lg p-6 shadow\">\n//           <h2 className=\"text-2xl font-bold mb-4\">\n//             {role === 'admin' ? 'Subadmin Withdraw Requests' : 'User Withdraw Requests'}\n//           </h2>\n//           {loading ? (\n//             <p>Loading requests...</p>\n//           ) : requests.length === 0 ? (\n//             <p>No withdrawal requests found.</p>\n//           ) : (\n//             <div className=\"overflow-x-auto\">\n//               <table className=\"w-full text-left border-collapse\">\n//                 <thead className=\"bg-gray-700\">\n//                   <tr>\n//                     <th className=\"p-2\">Email</th>\n//                     <th className=\"p-2\">Amount</th>\n//                     <th className=\"p-2\">Method</th>\n//                     <th className=\"p-2\">Details</th>\n//                     <th className=\"p-2\">Status</th>\n//                     <th className=\"p-2\">Action</th>\n//                   </tr>\n//                 </thead>\n//                 <tbody>\n//                   {requests.map((req) => (\n//                     <tr key={req.id} className=\"border-t border-gray-600\">\n//                       <td className=\"p-2\">{req.email}</td>\n//                       <td className=\"p-2\">₹{req.amount}</td>\n//                       <td className=\"p-2\">{req.method}</td>\n//                       <td className=\"p-2\">{req.methodDetails}</td>\n//                       <td className=\"p-2 capitalize\">{req.status}</td>\n//                       <td className=\"p-2\">\n//                         {req.status === 'pending' ? (\n//                           <button\n//                             onClick={() => handleApprove(req)}\n//                             className=\"px-3 py-1 bg-green-500 hover:bg-green-600 text-black font-semibold rounded\"\n//                           >\n//                             Approve\n//                           </button>\n//                         ) : (\n//                           <span className=\"text-green-400\">✔️</span>\n//                         )}\n//                       </td>\n//                     </tr>\n//                   ))}\n//                 </tbody>\n//               </table>\n//             </div>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useEffect, useState } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   getDoc,\n//   doc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function WalletAdminPage() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [depositRequests, setDepositRequests] = useState([]);\n//   const [currentBalance, setCurrentBalance] = useState(0);\n//   useEffect(() => {\n//     const unsub = onAuthStateChanged(auth, async (user) => {\n//       if (user) {\n//         setCurrentUser(user);\n//         const userSnap = await getDoc(doc(db, 'users', user.uid));\n//         const userData = userSnap.exists() ? userSnap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n//         const walletRef = doc(db, walletCol, user.uid);\n//         const walletSnap = await getDoc(walletRef);\n//         setCurrentBalance(walletSnap.exists() ? walletSnap.data().balance ?? 0 : 0);\n//         fetchDepositRequests(user.uid, userRole);\n//       }\n//     });\n//     return () => unsub();\n//   }, []);\n//   const fetchDepositRequests = async (uid, userRole) => {\n//     try {\n//       const colRef = collection(db, 'subdepositRequests');\n//       let q;\n//       if (userRole === 'admin') {\n//         q = query(colRef, where('role', '==', 'subadmin'));\n//       } else if (userRole === 'subadmin') {\n//         const userWallets = await getDocs(\n//           query(collection(db, 'subwallets'), where('subAdminId', '==', uid))\n//         );\n//         const userIds = userWallets.docs.map((doc) => doc.id);\n//         if (userIds.length === 0) return;\n//         q = query(colRef, where('uid', 'in', userIds));\n//       }\n//       const snap = await getDocs(q);\n//       const formatted = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n//       setDepositRequests(formatted);\n//     } catch (err) {\n//       console.error('Fetch failed', err);\n//     }\n//   };\n//   const handleApprove = async (req) => {\n//     const confirm = window.confirm(`Approve ₹${req.amount} deposit from ${req.email}?`);\n//     if (!confirm) return;\n//     try {\n//       const fromRole = req.role;\n//       const toUid = currentUser.uid;\n//       const fromRef = doc(db, 'subwallets', req.uid);\n//       const toCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//       const toRef = doc(db, toCol, toUid);\n//       const toSnap = await getDoc(toRef);\n//       const toBalance = toSnap.exists() ? toSnap.data().balance ?? 0 : 0;\n//       // ✅ Update recipient wallet (admin or subadmin)\n//       await updateDoc(toRef, {\n//         balance: toBalance + req.amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       // ✅ Mark request as approved\n//       await updateDoc(doc(db, 'subdepositRequests', req.id), {\n//         status: 'approved',\n//         updatedAt: serverTimestamp(),\n//       });\n//       alert('Deposit approved!');\n//       setDepositRequests((prev) =>\n//         prev.map((r) => (r.id === req.id ? { ...r, status: 'approved' } : r))\n//       );\n//     } catch (err) {\n//       console.error('Approval failed', err);\n//       alert('Something went wrong.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-6\">\n//         <div className=\"max-w-4xl mx-auto bg-gray-800 p-6 rounded shadow-lg\">\n//           <h2 className=\"text-2xl font-bold mb-4\">\n//             {role === 'admin' ? 'Subadmin Deposit Requests' : 'User Deposit Requests'}\n//           </h2>\n//           <p className=\"text-green-400 mb-4\">Your Balance: ₹{currentBalance.toFixed(2)}</p>\n//           {depositRequests.length === 0 ? (\n//             <p>No deposit requests found.</p>\n//           ) : (\n//             <table className=\"w-full border-collapse text-sm\">\n//               <thead className=\"bg-gray-700\">\n//                 <tr>\n//                   <th className=\"p-2\">Email</th>\n//                   <th className=\"p-2\">Amount</th>\n//                   <th className=\"p-2\">Method</th>\n//                   <th className=\"p-2\">Details</th>\n//                   <th className=\"p-2\">Status</th>\n//                   <th className=\"p-2\">Action</th>\n//                 </tr>\n//               </thead>\n//               <tbody>\n//                 {depositRequests.map((req) => (\n//                   <tr key={req.id} className=\"border-t border-gray-600\">\n//                     <td className=\"p-2\">{req.email}</td>\n//                     <td className=\"p-2\">₹{req.amount}</td>\n//                     <td className=\"p-2\">{req.method}</td>\n//                     <td className=\"p-2\">{req.methodDetails}</td>\n//                     <td className=\"p-2 capitalize\">{req.status}</td>\n//                     <td className=\"p-2\">\n//                       {req.status === 'pending' ? (\n//                         <button\n//                           onClick={() => handleApprove(req)}\n//                           className=\"px-3 py-1 bg-green-500 hover:bg-green-600 text-black font-semibold rounded\"\n//                         >\n//                           Approve\n//                         </button>\n//                       ) : (\n//                         <span className=\"text-green-400\">✔️</span>\n//                       )}\n//                     </td>\n//                   </tr>\n//                 ))}\n//               </tbody>\n//             </table>\n//           )}\n//         </div>\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function Page() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [currentBalance, setCurrentBalance] = useState(0);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [targetBalance, setTargetBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   const [withdrawRequests, setWithdrawRequests] = useState([]);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       setCurrentUser(user);\n//       if (user) {\n//         const userRef = doc(db, 'users', user.uid);\n//         const snap = await getDoc(userRef);\n//         const userData = snap.exists() ? snap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n//         const walletRef = doc(db, walletCol, user.uid);\n//         const walletSnap = await getDoc(walletRef);\n//         const balance = walletSnap.exists() ? walletSnap.data().balance ?? 0 : 0;\n//         setCurrentBalance(balance);\n//         loadWithdrawRequests(user.uid, userRole);\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const loadWithdrawRequests = async (uid, userRole) => {\n//     const field = userRole === 'admin' ? 'fromSubAdminId' : 'fromUserSubAdminId';\n//     const q = query(collection(db, 'subwithdrawRequests'), where(field, '==', uid));\n//     const snap = await getDocs(q);\n//     const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n//     setWithdrawRequests(results);\n//   };\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setTargetBalance(null);\n//     try {\n//       const q = query(collection(db, 'subwallets'), where('email', '==', targetEmail));\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Wallet not found.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       const uid = wallet.uid;\n//       if (role === 'subadmin' && wallet.subAdminId !== currentUser.uid) {\n//         setMessage('❌ Not your user.');\n//         return;\n//       }\n//       setTargetUid(uid);\n//       setTargetBalance(wallet.balance ?? 0);\n//       setMessage('✅ Wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error searching.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Invalid amount.');\n//       return;\n//     }\n//     if (amount > currentBalance) {\n//       setMessage('❌ Insufficient balance.');\n//       return;\n//     }\n//     try {\n//       const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//       const toWalletCol = 'subwallets';\n//       const fromRef = doc(db, fromWalletCol, currentUser.uid);\n//       const toRef = doc(db, toWalletCol, targetUid);\n//       await updateDoc(toRef, {\n//         balance: (targetBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(fromRef, {\n//         balance: currentBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setTargetBalance((prev) => (prev ?? 0) + amount);\n//       setCurrentBalance((prev) => prev - amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Transfer successful.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to transfer.');\n//     }\n//   };\n//   // const handleAcceptWithdraw = async (req) => {\n//   //   const amount = req.amount;\n//   //   const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//   //   const toWalletCol = 'subwallets';\n//   //   const toRef = doc(db, toWalletCol, req.fromUid);\n//   //   const fromRef = doc(db, fromWalletCol, currentUser.uid);\n//   //   const toSnap = await getDoc(toRef);\n//   //   const fromSnap = await getDoc(fromRef);\n//   //   if (!toSnap.exists() || !fromSnap.exists()) {\n//   //     setMessage('❌ Wallet not found.');\n//   //     return;\n//   //   }\n//   //   const fromBalance = fromSnap.data().balance ?? 0;\n//   //   if (fromBalance < amount) {\n//   //     setMessage('❌ Not enough balance.');\n//   //     return;\n//   //   }\n//   //   await updateDoc(toRef, {\n//   //     balance: (toSnap.data().balance ?? 0) + amount,\n//   //   });\n//   //   await updateDoc(fromRef, {\n//   //     balance: fromBalance - amount,\n//   //   });\n//   //   await updateDoc(doc(db, 'subwithdrawRequests', req.id), {\n//   //     status: 'accepted',\n//   //     approvedAt: serverTimestamp(),\n//   //   });\n//   //   setWithdrawRequests((prev) => prev.filter((r) => r.id !== req.id));\n//   //   setMessage('✅ Withdraw accepted.');\n//   // };\n// const handleAcceptWithdraw = async (withdraw) => {\n//   try {\n//     if (!withdraw || typeof withdraw !== 'object') {\n//       console.error('❌ Invalid withdraw object:', withdraw);\n//       return alert('Invalid request.');\n//     }\n//     const { uid, amount, id, fromSubAdminId } = withdraw;\n//     if (!uid || typeof uid !== 'string') {\n//       console.error('❌ Missing or invalid UID in withdraw:', withdraw);\n//       return alert('Withdraw UID is missing.');\n//     }\n//     if (!id) {\n//       console.error('❌ Missing Firestore document ID of withdraw request');\n//       return alert('Withdraw request ID missing.');\n//     }\n//     // Define references\n//     const userWalletRef = doc(db, 'subwallets', uid); // user wallet\n//     const subAdminWalletRef = doc(db, 'subwallets', fromSubAdminId); // subadmin wallet\n//     const withdrawRef = doc(db, 'subwithdrawRequests', id);\n//     // Fetch current balances\n//     const [userSnap, subAdminSnap] = await Promise.all([\n//       getDoc(userWalletRef),\n//       getDoc(subAdminWalletRef),\n//     ]);\n//     const userBalance = userSnap.exists() ? userSnap.data()?.balance ?? 0 : 0;\n//     const subAdminBalance = subAdminSnap.exists() ? subAdminSnap.data()?.balance ?? 0 : 0;\n//     if (subAdminBalance < amount) {\n//       return alert('Subadmin has insufficient balance to approve this withdrawal.');\n//     }\n//     // ✅ Update user wallet (add funds)\n//     await updateDoc(userWalletRef, {\n//       balance: userBalance + amount,\n//       updatedAt: serverTimestamp(),\n//     });\n//     // ✅ Deduct from subadmin wallet\n//     await updateDoc(subAdminWalletRef, {\n//       balance: subAdminBalance - amount,\n//       updatedAt: serverTimestamp(),\n//     });\n//     // ✅ Update withdraw request status\n//     await updateDoc(withdrawRef, {\n//       status: 'approved',\n//       updatedAt: serverTimestamp(),\n//     });\n//     alert('✅ Withdraw approved and funds added to user wallet.');\n//   } catch (err) {\n//     console.error('❌ handleAcceptWithdraw error:', err);\n//     alert('Something went wrong while accepting the withdraw.');\n//   }\n// };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8\">\n//         <div className=\"max-w-xl mx-auto bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">\n//             {role === 'admin' ? 'Admin: Fund Subadmin' : 'Subadmin: Fund User'}\n//           </h1>\n//           <p className=\"mb-4 text-green-400\">Your Balance: ₹{currentBalance.toFixed(2)}</p>\n//           <input\n//             type=\"email\"\n//             placeholder={role === 'admin' ? 'Subadmin Email' : 'User Email'}\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Recipient Balance: ₹{targetBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to transfer\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Transfer Funds\n//               </button>\n//             </>\n//           )}\n//         </div>\n//         {/* Withdraw Requests */}\n//         {withdrawRequests.length > 0 && (\n//           <div className=\"max-w-2xl mx-auto mt-10 bg-gray-800 p-6 rounded shadow-lg\">\n//             <h2 className=\"text-xl font-semibold mb-4\">Pending Withdraw Requests</h2>\n//             {withdrawRequests.map((req) => (\n//               <div key={req.id} className=\"bg-gray-700 p-3 mb-3 rounded\">\n//                 <p><strong>From:</strong> {req.fromEmail}</p>\n//                 <p><strong>Amount:</strong> ₹{req.amount}</p>\n//                 <p><strong>Method:</strong> {req.method} ({req.details})</p>\n//                 <button\n//                   className=\"mt-2 bg-blue-500 hover:bg-blue-600 text-white py-1 px-4 rounded\"\n//                   onClick={() => handleAcceptWithdraw(req)}\n//                 >\n//                   Accept\n//                 </button>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function Page() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [currentBalance, setCurrentBalance] = useState(0);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [targetBalance, setTargetBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   const [withdrawRequests, setWithdrawRequests] = useState([]);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       setCurrentUser(user);\n//       if (user) {\n//         const userRef = doc(db, 'users', user.uid);\n//         const snap = await getDoc(userRef);\n//         const userData = snap.exists() ? snap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n//         const walletRef = doc(db, walletCol, user.uid);\n//         const walletSnap = await getDoc(walletRef);\n//         const balance = walletSnap.exists() ? walletSnap.data().balance ?? 0 : 0;\n//         setCurrentBalance(balance);\n//         loadWithdrawRequests(user.uid, userRole);\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const loadWithdrawRequests = async (uid, userRole) => {\n//     const field = userRole === 'admin' ? 'fromSubAdminId' : 'fromUserSubAdminId';\n//     const q = query(collection(db, 'subwithdrawRequests'), where(field, '==', uid));\n//     const snap = await getDocs(q);\n//     const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n//     setWithdrawRequests(results);\n//   };\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setTargetBalance(null);\n//     try {\n//       const q = query(collection(db, 'subwallets'), where('email', '==', targetEmail));\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Wallet not found.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       const uid = wallet.uid;\n//       if (role === 'subadmin' && wallet.subAdminId !== currentUser.uid) {\n//         setMessage('❌ Not your user.');\n//         return;\n//       }\n//       setTargetUid(uid);\n//       setTargetBalance(wallet.balance ?? 0);\n//       setMessage('✅ Wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error searching.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Invalid amount.');\n//       return;\n//     }\n//     if (amount > currentBalance) {\n//       setMessage('❌ Insufficient balance.');\n//       return;\n//     }\n//     try {\n//       const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//       const toWalletCol = 'subwallets';\n//       const fromRef = doc(db, fromWalletCol, currentUser.uid);\n//       const toRef = doc(db, toWalletCol, targetUid);\n//       await updateDoc(toRef, {\n//         balance: (targetBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(fromRef, {\n//         balance: currentBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setTargetBalance((prev) => (prev ?? 0) + amount);\n//       setCurrentBalance((prev) => prev - amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Transfer successful.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to transfer.');\n//     }\n//   };\n//   const handleAcceptWithdraw = async (withdraw) => {\n//     try {\n//       if (!withdraw || typeof withdraw !== 'object') {\n//         console.error('❌ Invalid withdraw object:', withdraw);\n//         return alert('Invalid request.');\n//       }\n//       const { uid, amount, id, fromSubAdminId } = withdraw;\n//       if (!uid || typeof uid !== 'string') {\n//         console.error('❌ Missing or invalid UID in withdraw:', withdraw);\n//         return alert('Withdraw UID is missing.');\n//       }\n//       if (!id) {\n//         console.error('❌ Missing Firestore document ID of withdraw request');\n//         return alert('Withdraw request ID missing.');\n//       }\n//       const userWalletRef = doc(db, 'subwallets', uid);\n//       const subAdminWalletRef = doc(db, 'subwallets', fromSubAdminId);\n//       const withdrawRef = doc(db, 'subwithdrawRequests', id);\n//       const [userSnap, subAdminSnap] = await Promise.all([\n//         getDoc(userWalletRef),\n//         getDoc(subAdminWalletRef),\n//       ]);\n//       const userBalance = userSnap.exists() ? userSnap.data()?.balance ?? 0 : 0;\n//       const subAdminBalance = subAdminSnap.exists() ? subAdminSnap.data()?.balance ?? 0 : 0;\n//       if (subAdminBalance < amount) {\n//         return alert('Subadmin has insufficient balance to approve this withdrawal.');\n//       }\n//       await updateDoc(userWalletRef, {\n//         balance: userBalance + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(subAdminWalletRef, {\n//         balance: subAdminBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(withdrawRef, {\n//         status: 'approved',\n//         updatedAt: serverTimestamp(),\n//       });\n//       setWithdrawRequests((prev) => prev.filter((r) => r.id !== id));\n//       alert('✅ Withdraw approved and funds added to user wallet.');\n//     } catch (err) {\n//       console.error('❌ handleAcceptWithdraw error:', err);\n//       alert('Something went wrong while accepting the withdraw.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8\">\n//         <div className=\"max-w-xl mx-auto bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">\n//             {role === 'admin' ? 'Admin: Fund Subadmin' : 'Subadmin: Fund User'}\n//           </h1>\n//           <p className=\"mb-4 text-green-400\">Your Balance: ₹{currentBalance.toFixed(2)}</p>\n//           <input\n//             type=\"email\"\n//             placeholder={role === 'admin' ? 'Subadmin Email' : 'User Email'}\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Recipient Balance: ₹{targetBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to transfer\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Transfer Funds\n//               </button>\n//             </>\n//           )}\n//         </div>\n//         {/* ✅ Withdraw Requests */}\n//         {withdrawRequests.length > 0 && (\n//           <div className=\"max-w-2xl mx-auto mt-10 bg-gray-800 p-6 rounded shadow-lg\">\n//             <h2 className=\"text-xl font-semibold mb-4\">Pending Withdraw Requests</h2>\n//             {withdrawRequests.map((req) => (\n//               <div key={req.id} className=\"bg-gray-700 p-3 mb-3 rounded\">\n//                 <p><strong>User:</strong> {req.email}</p>\n//                 <p><strong>Amount:</strong> ₹{req.amount}</p>\n//                 <p><strong>Method:</strong> {req.method} ({req.paymentId})</p>\n//                 <p><strong>Requested:</strong> {req.createdAt?.seconds ? new Date(req.createdAt.seconds * 1000).toLocaleString() : 'N/A'}</p>\n//                 <button\n//                   className=\"mt-2 bg-blue-500 hover:bg-blue-600 text-white py-1 px-4 rounded\"\n//                   onClick={() => handleAcceptWithdraw(req)}\n//                 >\n//                   Accept\n//                 </button>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function Page() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [currentBalance, setCurrentBalance] = useState(0);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [targetBalance, setTargetBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   const [withdrawRequests, setWithdrawRequests] = useState([]);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       setCurrentUser(user);\n//       if (user) {\n//         const userRef = doc(db, 'users', user.uid);\n//         const snap = await getDoc(userRef);\n//         const userData = snap.exists() ? snap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n//         const walletRef = doc(db, walletCol, user.uid);\n//         const walletSnap = await getDoc(walletRef);\n//         const balance = walletSnap.exists() ? walletSnap.data().balance ?? 0 : 0;\n//         setCurrentBalance(balance);\n//         loadWithdrawRequests(user.uid, userRole);\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   const loadWithdrawRequests = async (uid, userRole) => {\n//     const field = userRole === 'admin' ? 'fromSubAdminId' : 'fromUserSubAdminId';\n//     const q = query(collection(db, 'subwithdrawRequests'), where(field, '==', uid));\n//     const snap = await getDocs(q);\n//     const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n//     setWithdrawRequests(results);\n//   };\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setTargetBalance(null);\n//     try {\n//       const q = query(collection(db, 'subwallets'), where('email', '==', targetEmail));\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Wallet not found.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       const uid = wallet.uid;\n//       if (role === 'subadmin' && wallet.subAdminId !== currentUser.uid) {\n//         setMessage('❌ Not your user.');\n//         return;\n//       }\n//       setTargetUid(uid);\n//       setTargetBalance(wallet.balance ?? 0);\n//       setMessage('✅ Wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error searching.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Invalid amount.');\n//       return;\n//     }\n//     if (amount > currentBalance) {\n//       setMessage('❌ Insufficient balance.');\n//       return;\n//     }\n//     try {\n//       const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//       const toWalletCol = 'subwallets';\n//       const fromRef = doc(db, fromWalletCol, currentUser.uid);\n//       const toRef = doc(db, toWalletCol, targetUid);\n//       await updateDoc(toRef, {\n//         balance: (targetBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(fromRef, {\n//         balance: currentBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setTargetBalance((prev) => (prev ?? 0) + amount);\n//       setCurrentBalance((prev) => prev - amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Transfer successful.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to transfer.');\n//     }\n//   };\n//   const handleAcceptWithdraw = async (withdraw) => {\n//     try {\n//       if (!withdraw || typeof withdraw !== 'object') return alert('Invalid request.');\n//       const { uid, amount, id, fromSubAdminId } = withdraw;\n//       if (!uid || !id || !fromSubAdminId) return alert('Missing data in request.');\n//       const userWalletRef = doc(db, 'subwallets', uid);\n//       const subAdminWalletRef = doc(db, 'subwallets', fromSubAdminId);\n//       const withdrawRef = doc(db, 'subwithdrawRequests', id);\n//       const [userSnap, subAdminSnap] = await Promise.all([\n//         getDoc(userWalletRef),\n//         getDoc(subAdminWalletRef),\n//       ]);\n//       const userBalance = userSnap.exists() ? userSnap.data()?.balance ?? 0 : 0;\n//       const subAdminBalance = subAdminSnap.exists() ? subAdminSnap.data()?.balance ?? 0 : 0;\n//       if (subAdminBalance < amount) return alert('Insufficient subadmin balance.');\n//       await updateDoc(userWalletRef, {\n//         balance: userBalance + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(subAdminWalletRef, {\n//         balance: subAdminBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(withdrawRef, {\n//         status: 'approved',\n//         updatedAt: serverTimestamp(),\n//       });\n//       setWithdrawRequests((prev) => prev.filter((r) => r.id !== id));\n//       alert('✅ Withdraw approved.');\n//     } catch (err) {\n//       console.error('❌ Withdraw approval error:', err);\n//       alert('Something went wrong.');\n//     }\n//   };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8\">\n//         <div className=\"max-w-xl mx-auto bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">\n//             {role === 'admin' ? 'Admin: Fund Subadmin' : 'Subadmin: Fund User'}\n//           </h1>\n//           <p className=\"mb-4 text-green-400\">Your Balance: ₹{currentBalance.toFixed(2)}</p>\n//           <input\n//             type=\"email\"\n//             placeholder={role === 'admin' ? 'Subadmin Email' : 'User Email'}\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Recipient Balance: ₹{targetBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to transfer\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Transfer Funds\n//               </button>\n//             </>\n//           )}\n//         </div>\n//         {withdrawRequests.length > 0 && (\n//           <div className=\"max-w-2xl mx-auto mt-10 bg-gray-800 p-6 rounded shadow-lg\">\n//             <h2 className=\"text-xl font-semibold mb-4\">Pending Withdraw Requests</h2>\n//             {withdrawRequests.map((req) => (\n//               <div key={req.id} className=\"bg-gray-700 p-3 mb-3 rounded\">\n//                 <p><strong>User:</strong> {req.email}</p>\n//                 <p><strong>Amount:</strong> ₹{req.amount}</p>\n//                 <p><strong>Method:</strong> {req.method} ({req.paymentId})</p>\n//                 <p><strong>Time:</strong> {req.createdAt?.seconds ? new Date(req.createdAt.seconds * 1000).toLocaleString() : 'N/A'}</p>\n//                 <button\n//                   className=\"mt-2 bg-blue-500 hover:bg-blue-600 text-white py-1 px-4 rounded\"\n//                   onClick={() => handleAcceptWithdraw(req)}\n//                 >\n//                   Accept\n//                 </button>\n//               </div>\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </Layout>\n//   );\n// }\n// 'use client';\n// import React, { useState, useEffect } from 'react';\n// import { getAuth, onAuthStateChanged } from 'firebase/auth';\n// import {\n//   getFirestore,\n//   collection,\n//   query,\n//   where,\n//   getDocs,\n//   doc,\n//   getDoc,\n//   updateDoc,\n//   serverTimestamp,\n// } from 'firebase/firestore';\n// import firebaseApp from '@/firebase';\n// import Layout from '@/app/Components/Layout';\n// export default function Page() {\n//   const auth = getAuth(firebaseApp);\n//   const db = getFirestore(firebaseApp);\n//   const [currentUser, setCurrentUser] = useState(null);\n//   const [role, setRole] = useState(null);\n//   const [currentBalance, setCurrentBalance] = useState(0);\n//   const [targetEmail, setTargetEmail] = useState('');\n//   const [targetUid, setTargetUid] = useState('');\n//   const [targetBalance, setTargetBalance] = useState(null);\n//   const [amountToAdd, setAmountToAdd] = useState('');\n//   const [message, setMessage] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   const [withdrawRequests, setWithdrawRequests] = useState([]);\n//   useEffect(() => {\n//     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//       setCurrentUser(user);\n//       if (user) {\n//         const userRef = doc(db, 'users', user.uid);\n//         const snap = await getDoc(userRef);\n//         const userData = snap.exists() ? snap.data() : {};\n//         const userRole = userData.role || 'user';\n//         setRole(userRole);\n//         const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n//         const walletRef = doc(db, walletCol, user.uid);\n//         const walletSnap = await getDoc(walletRef);\n//         const balance = walletSnap.exists() ? walletSnap.data().balance ?? 0 : 0;\n//         setCurrentBalance(balance);\n//         loadWithdrawRequests(user.uid);\n//         // loadWithdrawRequests(user.uid, userRole);\n//       }\n//     });\n//     return () => unsubscribe();\n//   }, []);\n//   // const loadWithdrawRequests = async (uid) => {\n//   //   const q = query(collection(db, 'subwithdrawRequests'), where('fromSubAdminId', '==', uid));\n//   //   const snap = await getDocs(q);\n//   //   const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n//   //   setWithdrawRequests(results);\n//   // };\n//   const loadWithdrawRequests = async (uid, role) => {\n//   let q;\n//   if (role === 'admin') {\n//     // Admin sees withdraws requested by subadmins\n//     q = query(collection(db, 'subwithdrawRequests'), where('fromSubAdminId', '==', uid));\n//   } else if (role === 'subadmin') {\n//     // Subadmin sees withdraws requested by their users\n//     q = query(collection(db, 'subwithdrawRequests'), where('fromUserSubAdminId', '==', uid));\n//   } else {\n//     return; // Do nothing for normal users\n//   }\n//   const snap = await getDocs(q);\n//   const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n//   setWithdrawRequests(results);\n// };\n// // const loadWithdrawRequests = async (uid, userRole) => {\n// //   let q;\n// //   if (userRole === 'admin') {\n// //     // Admin should see withdraws made by subadmins\n// //     q = query(\n// //       collection(db, 'subwithdrawRequests'),\n// //       where('fromSubAdminId', '==', uid),\n// //       where('status', '==', 'pending')\n// //     );\n// //   } else if (userRole === 'subadmin') {\n// //     // Subadmin should see withdraws made by their users\n// //     q = query(\n// //       collection(db, 'subwithdrawRequests'),\n// //       where('fromUserSubAdminId', '==', uid),\n// //       where('status', '==', 'pending')\n// //     );\n// //   } else {\n// //     return; // No access for other roles\n// //   }\n// //   const snap = await getDocs(q);\n// //   const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n// //   setWithdrawRequests(results);\n// // };\n//   const handleSearch = async () => {\n//     setLoading(true);\n//     setMessage('');\n//     setTargetUid('');\n//     setTargetBalance(null);\n//     try {\n//       const q = query(collection(db, 'subwallets'), where('email', '==', targetEmail));\n//       const snap = await getDocs(q);\n//       if (snap.empty) {\n//         setMessage('❌ Wallet not found.');\n//         return;\n//       }\n//       const wallet = snap.docs[0].data();\n//       const uid = wallet.uid;\n//       if (role === 'subadmin' && wallet.subAdminId !== currentUser.uid) {\n//         setMessage('❌ Not your user.');\n//         return;\n//       }\n//       setTargetUid(uid);\n//       setTargetBalance(wallet.balance ?? 0);\n//       setMessage('✅ Wallet found.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Error searching.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleAddBalance = async () => {\n//     if (!targetUid || !amountToAdd) return;\n//     const amount = parseFloat(amountToAdd);\n//     if (isNaN(amount) || amount <= 0) {\n//       setMessage('❌ Invalid amount.');\n//       return;\n//     }\n//     if (amount > currentBalance) {\n//       setMessage('❌ Insufficient balance.');\n//       return;\n//     }\n//     try {\n//       const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n//       const toWalletCol = 'subwallets';\n//       const fromRef = doc(db, fromWalletCol, currentUser.uid);\n//       const toRef = doc(db, toWalletCol, targetUid);\n//       await updateDoc(toRef, {\n//         balance: (targetBalance ?? 0) + amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       await updateDoc(fromRef, {\n//         balance: currentBalance - amount,\n//         updatedAt: serverTimestamp(),\n//       });\n//       setTargetBalance((prev) => (prev ?? 0) + amount);\n//       setCurrentBalance((prev) => prev - amount);\n//       setAmountToAdd('');\n//       setMessage('✅ Transfer successful.');\n//     } catch (err) {\n//       console.error(err);\n//       setMessage('❌ Failed to transfer.');\n//     }\n//   };\n//   // const handleAcceptWithdraw = async (withdraw) => {\n//   //   try {\n//   //     const { uid, amount, id, fromSubAdminId } = withdraw;\n//   //     if (!uid || !id || !fromSubAdminId) {\n//   //       return alert('Invalid withdraw request.');\n//   //     }\n//   //     const userWalletRef = doc(db, 'subwallets', uid);\n//   //     const subAdminWalletRef = doc(db, 'subwallets', fromSubAdminId);\n//   //     const withdrawRef = doc(db, 'subwithdrawRequests', id);\n//   //     const [userSnap, subAdminSnap] = await Promise.all([\n//   //       getDoc(userWalletRef),\n//   //       getDoc(subAdminWalletRef),\n//   //     ]);\n//   //     const userBalance = userSnap.exists() ? userSnap.data().balance ?? 0 : 0;\n//   //     const subAdminBalance = subAdminSnap.exists() ? subAdminSnap.data().balance ?? 0 : 0;\n//   //     if (subAdminBalance < amount) {\n//   //       return alert('Subadmin has insufficient balance to approve this withdrawal.');\n//   //     }\n//   //     await updateDoc(userWalletRef, {\n//   //       balance: userBalance + amount,\n//   //       updatedAt: serverTimestamp(),\n//   //     });\n//   //     await updateDoc(subAdminWalletRef, {\n//   //       balance: subAdminBalance - amount,\n//   //       updatedAt: serverTimestamp(),\n//   //     });\n//   //     await updateDoc(withdrawRef, {\n//   //       status: 'approved',\n//   //       updatedAt: serverTimestamp(),\n//   //     });\n//   //     setWithdrawRequests((prev) => prev.filter((r) => r.id !== id));\n//   //     alert('✅ Withdraw approved and funds added to user wallet.');\n//   //   } catch (err) {\n//   //     console.error('❌ handleAcceptWithdraw error:', err);\n//   //     alert('Something went wrong while accepting the withdraw.');\n//   //   }\n//   // };\n//   const handleAcceptWithdraw = async (withdraw) => {\n//   try {\n//     const { id, amount, fromSubAdminId, status } = withdraw;\n//     if (!id || !fromSubAdminId || status !== 'pending') {\n//       return alert('Invalid or already processed request.');\n//     }\n//     // Get subadmin wallet\n//     const subAdminWalletRef = doc(db, 'subwallets', fromSubAdminId);\n//     const subAdminSnap = await getDoc(subAdminWalletRef);\n//     if (!subAdminSnap.exists()) return alert('Subadmin wallet not found.');\n//     const subAdminBalance = subAdminSnap.data().balance ?? 0;\n//     // ✅ Add amount back to subadmin\n//     await updateDoc(subAdminWalletRef, {\n//       balance: subAdminBalance + amount,\n//       updatedAt: serverTimestamp(),\n//     });\n//     // ✅ Mark the request as approved\n//     await updateDoc(doc(db, 'subwithdrawRequests', id), {\n//       status: 'approved',\n//       approvedAt: serverTimestamp(),\n//     });\n//     // ✅ Remove from pending list on screen\n//     setWithdrawRequests((prev) =>\n//       prev.map((r) =>\n//         r.id === id ? { ...r, status: 'approved' } : r\n//       )\n//     );\n//     alert('✅ Withdraw approved. Amount credited back to subadmin.');\n//   } catch (err) {\n//     console.error('❌ Error approving withdraw:', err);\n//     alert('Something went wrong.');\n//   }\n// };\n//   return (\n//     <Layout>\n//       <div className=\"min-h-screen bg-gray-900 text-white p-8\">\n//         <div className=\"max-w-xl mx-auto bg-gray-800 p-6 rounded shadow-lg\">\n//           <h1 className=\"text-2xl font-bold mb-6 text-center\">\n//             {role === 'admin' ? 'Admin: Fund Subadmin' : 'Subadmin: Fund User'}\n//           </h1>\n//           <p className=\"mb-4 text-green-400\">Your Balance: ₹{currentBalance.toFixed(2)}</p>\n//           <input\n//             type=\"email\"\n//             placeholder={role === 'admin' ? 'Subadmin Email' : 'User Email'}\n//             className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//             value={targetEmail}\n//             onChange={(e) => setTargetEmail(e.target.value)}\n//           />\n//           <button\n//             onClick={handleSearch}\n//             disabled={loading}\n//             className=\"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\"\n//           >\n//             {loading ? 'Searching...' : 'Find Wallet'}\n//           </button>\n//           {message && <p className=\"text-center text-sm mb-4 text-yellow-400\">{message}</p>}\n//           {targetUid && (\n//             <>\n//               <p className=\"mb-2\">Recipient Balance: ₹{targetBalance?.toFixed(2)}</p>\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Amount to transfer\"\n//                 className=\"w-full p-3 rounded bg-gray-700 text-white mb-4\"\n//                 value={amountToAdd}\n//                 onChange={(e) => setAmountToAdd(e.target.value)}\n//               />\n//               <button\n//                 onClick={handleAddBalance}\n//                 className=\"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\"\n//               >\n//                 Transfer Funds\n//               </button>\n//             </>\n//           )}\n//         </div>\n//         {/* Withdraw Requests */}\n//         {withdrawRequests.length > 0 && (\n//           <div className=\"max-w-2xl mx-auto mt-10 bg-gray-800 p-6 rounded shadow-lg\">\n//             <h2 className=\"text-xl font-semibold mb-4\">Pending Withdraw Requests</h2>\n//             {withdrawRequests.map((req) => (\n//               <div key={req.id} className=\"bg-gray-700 p-3 mb-3 rounded\">\n//                 <p><strong>User Email:</strong> {req.email}</p>\n//                 <p><strong>Amount:</strong> ₹{req.amount}</p>\n//                 <p><strong>Method:</strong> {req.method} ({req.paymentId})</p>\n//                 {/* <button\n//                   className=\"mt-2 bg-blue-500 hover:bg-blue-600 text-white py-1 px-4 rounded\"\n//                   onClick={() => handleAcceptWithdraw(req)}\n//                 >\n//                   Accept\n//                 </button> */}\n//                 {req.status === 'pending' ? (\n//   <button\n//     className=\"mt-2 bg-blue-500 hover:bg-blue-600 text-white py-1 px-4 rounded\"\n//     onClick={() => handleAcceptWithdraw(req)}\n//   >\n//     Accept\n//   </button>\n// ) : (\n//   <span className=\"inline-block mt-2 text-green-400 font-semibold\">\n//     Approved\n//   </span>\n// )}\n//               </div>\n//             ))}\n//           </div>\n//         )}\n//       </div>\n//     </Layout>\n//   );\n// }\n// app/yourPath/page.js\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\nfunction Page() {\n    _s();\n    const auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)(_firebase__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n    const db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getFirestore)(_firebase__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n    const [currentUser, setCurrentUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [role, setRole] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentBalance, setCurrentBalance] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [targetEmail, setTargetEmail] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [targetUid, setTargetUid] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [targetBalance, setTargetBalance] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [amountToAdd, setAmountToAdd] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [withdrawRequests, setWithdrawRequests] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Page.useEffect\": ()=>{\n            const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.onAuthStateChanged)(auth, {\n                \"Page.useEffect.unsubscribe\": async (user)=>{\n                    setCurrentUser(user);\n                    if (user) {\n                        const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(db, 'users', user.uid);\n                        const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getDoc)(userRef);\n                        const userData = snap.exists() ? snap.data() : {};\n                        const userRole = userData.role || 'user';\n                        setRole(userRole);\n                        const walletCol = userRole === 'admin' ? 'adminwallets' : 'subwallets';\n                        const walletRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(db, walletCol, user.uid);\n                        const walletSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getDoc)(walletRef);\n                        var _walletSnap_data_balance;\n                        const balance = walletSnap.exists() ? (_walletSnap_data_balance = walletSnap.data().balance) !== null && _walletSnap_data_balance !== void 0 ? _walletSnap_data_balance : 0 : 0;\n                        setCurrentBalance(balance);\n                        loadWithdrawRequests(user.uid, userRole);\n                    }\n                }\n            }[\"Page.useEffect.unsubscribe\"]);\n            return ({\n                \"Page.useEffect\": ()=>unsubscribe()\n            })[\"Page.useEffect\"];\n        }\n    }[\"Page.useEffect\"], []);\n    // const loadWithdrawRequests = async (uid, userRole) => {\n    //   let q;\n    //   if (userRole === 'admin') {\n    //     q = query(\n    //       collection(db, 'subwithdrawRequests'),\n    //       where('fromSubAdminId', '==', uid),\n    //       where('status', '==', 'pending')\n    //     );\n    //   } else if (userRole === 'subadmin') {\n    //     q = query(\n    //       collection(db, 'subwithdrawRequests'),\n    //       where('fromUserSubAdminId', '==', uid),\n    //       where('status', '==', 'pending')\n    //     );\n    //   } else return;\n    //   const snap = await getDocs(q);\n    //   const results = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n    //   setWithdrawRequests(results);\n    // };\n    const loadWithdrawRequests = async (uid, userRole)=>{\n        let q;\n        if (userRole === 'admin') {\n            // Show only subadmin → admin withdraws\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.collection)(db, 'subwithdrawRequests'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.where)('fromUserSubAdminId', '==', ''), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.where)('status', '==', 'pending'));\n        } else if (userRole === 'subadmin') {\n            // Show user → subadmin withdraws\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.collection)(db, 'subwithdrawRequests'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.where)('fromUserSubAdminId', '==', uid), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.where)('status', '==', 'pending'));\n        } else {\n            return;\n        }\n        const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getDocs)(q);\n        const results = snap.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n        setWithdrawRequests(results);\n    };\n    const handleSearch = async ()=>{\n        setLoading(true);\n        setMessage('');\n        setTargetUid('');\n        setTargetBalance(null);\n        try {\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.collection)(db, 'subwallets'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.where)('email', '==', targetEmail));\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getDocs)(q);\n            if (snap.empty) return setMessage('❌ Wallet not found.');\n            const wallet = snap.docs[0].data();\n            const uid = wallet.uid;\n            if (role === 'subadmin' && wallet.subAdminId !== currentUser.uid) {\n                return setMessage('❌ Not your user.');\n            }\n            setTargetUid(uid);\n            var _wallet_balance;\n            setTargetBalance((_wallet_balance = wallet.balance) !== null && _wallet_balance !== void 0 ? _wallet_balance : 0);\n            setMessage('✅ Wallet found.');\n        } catch (err) {\n            console.error(err);\n            setMessage('❌ Error searching.');\n        } finally{\n            setLoading(false);\n        }\n    };\n    // const handleAddBalance = async () => {\n    //   if (!targetUid || !amountToAdd) return;\n    //   const amount = parseFloat(amountToAdd);\n    //   if (isNaN(amount) || amount <= 0) return setMessage('❌ Invalid amount.');\n    //   if (amount > currentBalance) return setMessage('❌ Insufficient balance.');\n    //   try {\n    //     const fromWalletCol = role === 'admin' ? 'adminwallets' : 'subwallets';\n    //     const toWalletCol = 'subwallets';\n    //     const fromRef = doc(db, fromWalletCol, currentUser.uid);\n    //     const toRef = doc(db, toWalletCol, targetUid);\n    //     await updateDoc(toRef, {\n    //       balance: (targetBalance ?? 0) + amount,\n    //       updatedAt: serverTimestamp(),\n    //     });\n    //     await updateDoc(fromRef, {\n    //       balance: currentBalance - amount,\n    //       updatedAt: serverTimestamp(),\n    //     });\n    //     setTargetBalance((prev) => (prev ?? 0) + amount);\n    //     setCurrentBalance((prev) => prev - amount);\n    //     setAmountToAdd('');\n    //     setMessage('✅ Transfer successful.');\n    //   } catch (err) {\n    //     console.error(err);\n    //     setMessage('❌ Failed to transfer.');\n    //   }\n    // };\n    // const handleAcceptWithdraw = async (withdraw) => {\n    //   try {\n    //     const { id, amount, fromSubAdminId, fromUserSubAdminId, uid, status } = withdraw;\n    //     if (!id || status !== 'pending') return alert('Invalid request.');\n    //     if (role === 'admin') {\n    //       const subAdminRef = doc(db, 'subwallets', fromSubAdminId);\n    //       const snap = await getDoc(subAdminRef);\n    //       const bal = snap.data().balance ?? 0;\n    //       await updateDoc(subAdminRef, {\n    //         balance: bal + amount,\n    //         updatedAt: serverTimestamp(),\n    //       });\n    //     }\n    //     if (role === 'subadmin') {\n    //       const userRef = doc(db, 'subwallets', uid);\n    //       const subRef = doc(db, 'subwallets', fromUserSubAdminId);\n    //       const [userSnap, subSnap] = await Promise.all([getDoc(userRef), getDoc(subRef)]);\n    //       const userBal = userSnap.data().balance ?? 0;\n    //       const subBal = subSnap.data().balance ?? 0;\n    //       if (subBal < amount) return alert('❌ Insufficient balance.');\n    //       await updateDoc(userRef, {\n    //         balance: userBal + amount,\n    //         updatedAt: serverTimestamp(),\n    //       });\n    //       await updateDoc(subRef, {\n    //         balance: subBal - amount,\n    //         updatedAt: serverTimestamp(),\n    //       });\n    //     }\n    //     await updateDoc(doc(db, 'subwithdrawRequests', id), {\n    //       status: 'approved',\n    //       approvedAt: serverTimestamp(),\n    //     });\n    //     setWithdrawRequests((prev) => prev.map((r) => r.id === id ? { ...r, status: 'approved' } : r));\n    //     alert('✅ Withdraw approved.');\n    //   } catch (err) {\n    //     console.error('❌ Error approving withdraw:', err);\n    //     alert('Something went wrong.');\n    //   }\n    // };\n    // const handleAcceptWithdraw = async (withdraw) => {\n    //   try {\n    //     const { id, amount, fromSubAdminId, fromUserSubAdminId, status } = withdraw;\n    //     if (!id || status !== 'pending') {\n    //       return alert('Invalid or already processed request.');\n    //     }\n    //     // Determine if admin is accepting a subadmin's request\n    //     const isAdmin = role === 'admin' && fromSubAdminId && !fromUserSubAdminId;\n    //     const payerWalletRef = doc(db, isAdmin ? 'adminwallets' : 'subwallets', currentUser.uid);\n    //     const receiverWalletRef = doc(db, 'subwallets', withdraw.uid); // Always add to requester wallet\n    //     const [payerSnap, receiverSnap] = await Promise.all([\n    //       getDoc(payerWalletRef),\n    //       getDoc(receiverWalletRef),\n    //     ]);\n    //     const payerBalance = payerSnap.exists() ? payerSnap.data().balance ?? 0 : 0;\n    //     const receiverBalance = receiverSnap.exists() ? receiverSnap.data().balance ?? 0 : 0;\n    //     if (payerBalance < amount) {\n    //       return alert('❌ Insufficient balance to approve.');\n    //     }\n    //     // Transfer amount\n    //     await updateDoc(receiverWalletRef, {\n    //       balance: receiverBalance + amount,\n    //       updatedAt: serverTimestamp(),\n    //     });\n    //     await updateDoc(payerWalletRef, {\n    //       balance: payerBalance - amount,\n    //       updatedAt: serverTimestamp(),\n    //     });\n    //     // Mark as approved\n    //     await updateDoc(doc(db, 'subwithdrawRequests', id), {\n    //       status: 'approved',\n    //       approvedAt: serverTimestamp(),\n    //     });\n    //     // Update local state\n    //     setWithdrawRequests((prev) =>\n    //       prev.map((r) =>\n    //         r.id === id ? { ...r, status: 'approved' } : r\n    //       )\n    //     );\n    //     alert('✅ Withdraw approved and funds transferred.');\n    //   } catch (err) {\n    //     console.error('❌ Error approving withdraw:', err);\n    //     alert('Something went wrong.');\n    //   }\n    // };\n    const handleAcceptWithdraw = async (withdraw)=>{\n        try {\n            const { id, amount, fromSubAdminId, fromUserSubAdminId, uid, status } = withdraw;\n            if (!id || status !== 'pending') {\n                return alert('Invalid or already processed request.');\n            }\n            // Determine the receiver (who gets the money back)\n            let receiverUid;\n            if (role === 'admin') {\n                // Admin is approving subadmin → admin request\n                receiverUid = fromSubAdminId;\n            } else if (role === 'subadmin') {\n                // Subadmin is approving user → subadmin request\n                receiverUid = currentUser.uid;\n            } else {\n                return alert('Unauthorized');\n            }\n            // Approver's wallet (who gets money added back)\n            const receiverWalletRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(db, role === 'admin' ? 'adminwallets' : 'subwallets', receiverUid);\n            const receiverSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getDoc)(receiverWalletRef);\n            var _receiverSnap_data_balance;\n            const receiverBalance = receiverSnap.exists() ? (_receiverSnap_data_balance = receiverSnap.data().balance) !== null && _receiverSnap_data_balance !== void 0 ? _receiverSnap_data_balance : 0 : 0;\n            // Add amount back to approver (admin or subadmin)\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.updateDoc)(receiverWalletRef, {\n                balance: receiverBalance + amount,\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.serverTimestamp)()\n            });\n            // await setDoc(receiverWalletRef, {\n            //   balance: receiverBalance + amount,\n            //   updatedAt: serverTimestamp(),\n            // }, { merge: true });\n            // Mark the request as approved\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(db, 'subwithdrawRequests', id), {\n                status: 'approved',\n                approvedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.serverTimestamp)()\n            });\n            // Update UI\n            setWithdrawRequests((prev)=>prev.map((r)=>r.id === id ? {\n                        ...r,\n                        status: 'approved'\n                    } : r));\n            alert('✅ Withdraw approved and funds added to your wallet.');\n        } catch (err) {\n            console.error('❌ Error approving withdraw:', err);\n            alert('Something went wrong.');\n        }\n    };\n    // const handleAcceptWithdraw = async (withdraw) => {\n    //   try {\n    //     const { id, amount, fromSubAdminId, fromUserSubAdminId, uid, status } = withdraw;\n    //     if (!id || status !== 'pending') {\n    //       return alert('Invalid or already processed request.');\n    //     }\n    //     let receiverWalletRef;\n    //     if (role === 'admin' && fromSubAdminId && !fromUserSubAdminId) {\n    //       // Admin is approving subadmin's withdraw request\n    //       receiverWalletRef = doc(db, 'adminwallets', uid); // subadmin’s uid is the requester\n    //     } else if (role === 'subadmin' && fromUserSubAdminId) {\n    //       // Subadmin is approving user's withdraw request\n    //       receiverWalletRef = doc(db, 'subwallets', uid); // user’s uid is the requester\n    //     } else {\n    //       return alert('Unauthorized or malformed withdraw request.');\n    //     }\n    //     const receiverSnap = await getDoc(receiverWalletRef);\n    //     const receiverBalance = receiverSnap.exists() ? receiverSnap.data().balance ?? 0 : 0;\n    //     // ✅ Credit receiver wallet\n    //     await setDoc(receiverWalletRef, {\n    //       balance: receiverBalance + amount,\n    //       updatedAt: serverTimestamp(),\n    //     }, { merge: true });\n    //     // ✅ Mark request as approved\n    //     await updateDoc(doc(db, 'subwithdrawRequests', id), {\n    //       status: 'approved',\n    //       approvedAt: serverTimestamp(),\n    //     });\n    //     // ✅ Update state\n    //     setWithdrawRequests((prev) =>\n    //       prev.map((r) =>\n    //         r.id === id ? { ...r, status: 'approved' } : r\n    //       )\n    //     );\n    //     alert('✅ Withdraw approved and amount credited.');\n    //   } catch (err) {\n    //     console.error('❌ Error approving withdraw:', err);\n    //     alert('Something went wrong while approving.');\n    //   }\n    // };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_app_Components_Layout__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-gray-900 text-white p-8\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-xl mx-auto bg-gray-800 p-6 rounded shadow-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                            className: \"text-2xl font-bold mb-6 text-center\",\n                            children: role === 'admin' ? 'Admin: Fund Subadmin' : 'Subadmin: Fund User'\n                        }, void 0, false, {\n                            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                            lineNumber: 3155,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"mb-4 text-green-400\",\n                            children: [\n                                \"Your Balance: ₹\",\n                                currentBalance.toFixed(2)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                            lineNumber: 3159,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"email\",\n                            placeholder: role === 'admin' ? 'Subadmin Email' : 'User Email',\n                            className: \"w-full p-3 rounded bg-gray-700 text-white mb-4\",\n                            value: targetEmail,\n                            onChange: (e)=>setTargetEmail(e.target.value)\n                        }, void 0, false, {\n                            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                            lineNumber: 3161,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleSearch,\n                            disabled: loading,\n                            className: \"w-full bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 rounded mb-4\",\n                            children: loading ? 'Searching...' : 'Find Wallet'\n                        }, void 0, false, {\n                            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                            lineNumber: 3169,\n                            columnNumber: 11\n                        }, this),\n                        message && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-center text-sm mb-4 text-yellow-400\",\n                            children: message\n                        }, void 0, false, {\n                            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                            lineNumber: 3177,\n                            columnNumber: 23\n                        }, this),\n                        targetUid && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"mb-2\",\n                                    children: [\n                                        \"Recipient Balance: ₹\",\n                                        targetBalance === null || targetBalance === void 0 ? void 0 : targetBalance.toFixed(2)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                    lineNumber: 3181,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"number\",\n                                    placeholder: \"Amount to transfer\",\n                                    className: \"w-full p-3 rounded bg-gray-700 text-white mb-4\",\n                                    value: amountToAdd,\n                                    onChange: (e)=>setAmountToAdd(e.target.value)\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                    lineNumber: 3182,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleAddBalance,\n                                    className: \"w-full bg-green-500 hover:bg-green-600 text-black font-semibold py-2 rounded\",\n                                    children: \"Transfer Funds\"\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                    lineNumber: 3189,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true)\n                    ]\n                }, void 0, true, {\n                    fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                    lineNumber: 3154,\n                    columnNumber: 9\n                }, this),\n                withdrawRequests.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-2xl mx-auto mt-10 bg-gray-800 p-6 rounded shadow-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-xl font-semibold mb-4\",\n                            children: \"Pending Withdraw Requests\"\n                        }, void 0, false, {\n                            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                            lineNumber: 3201,\n                            columnNumber: 13\n                        }, this),\n                        withdrawRequests.map((req)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-gray-700 p-3 mb-3 rounded\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"User Email:\"\n                                            }, void 0, false, {\n                                                fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                                lineNumber: 3204,\n                                                columnNumber: 20\n                                            }, this),\n                                            \" \",\n                                            req.email\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                        lineNumber: 3204,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"Amount:\"\n                                            }, void 0, false, {\n                                                fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                                lineNumber: 3205,\n                                                columnNumber: 20\n                                            }, this),\n                                            \" ₹\",\n                                            req.amount\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                        lineNumber: 3205,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                children: \"Method:\"\n                                            }, void 0, false, {\n                                                fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                                lineNumber: 3206,\n                                                columnNumber: 20\n                                            }, this),\n                                            \" \",\n                                            req.method,\n                                            \" (\",\n                                            req.paymentId,\n                                            \")\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                        lineNumber: 3206,\n                                        columnNumber: 17\n                                    }, this),\n                                    req.status === 'pending' ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"mt-2 bg-blue-500 hover:bg-blue-600 text-white py-1 px-4 rounded\",\n                                        onClick: ()=>handleAcceptWithdraw(req),\n                                        children: \"Accept\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                        lineNumber: 3208,\n                                        columnNumber: 19\n                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"inline-block mt-2 text-green-400 font-semibold\",\n                                        children: \"Approved\"\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                        lineNumber: 3215,\n                                        columnNumber: 19\n                                    }, this)\n                                ]\n                            }, req.id, true, {\n                                fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                                lineNumber: 3203,\n                                columnNumber: 15\n                            }, this))\n                    ]\n                }, void 0, true, {\n                    fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n                    lineNumber: 3200,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n            lineNumber: 3153,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"E:\\\\Nagaland\\\\gamling\\\\megaend-new\\\\src\\\\app\\\\app\\\\admin\\\\wallet\\\\page.js\",\n        lineNumber: 3152,\n        columnNumber: 5\n    }, this);\n}\n_s(Page, \"XYTg345C/STqlgOQub0xaptNRMI=\");\n_c = Page;\nvar _c;\n$RefreshReg$(_c, \"Page\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYXBwL2FkbWluL3dhbGxldC9wYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsZ0JBQWdCO0FBRWhCLHNEQUFzRDtBQUN0RCwrREFBK0Q7QUFDL0QsV0FBVztBQUNYLGtCQUFrQjtBQUNsQixnQkFBZ0I7QUFDaEIsV0FBVztBQUNYLFdBQVc7QUFDWCxhQUFhO0FBQ2IsU0FBUztBQUNULGVBQWU7QUFDZixxQkFBcUI7QUFDckIsYUFBYTtBQUNiLCtCQUErQjtBQUMvQix3Q0FBd0M7QUFDeEMsZ0RBQWdEO0FBRWhELDhDQUE4QztBQUM5Qyx1Q0FBdUM7QUFDdkMsMENBQTBDO0FBRTFDLDhDQUE4QztBQUU5Qyx3REFBd0Q7QUFDeEQsb0RBQW9EO0FBQ3BELGdFQUFnRTtBQUVoRSx3REFBd0Q7QUFDeEQsOERBQThEO0FBRTlELG1EQUFtRDtBQUNuRCx5REFBeUQ7QUFFekQsZ0VBQWdFO0FBQ2hFLGtFQUFrRTtBQUVsRSx5RkFBeUY7QUFFekYsc0JBQXNCO0FBQ3RCLCtEQUErRDtBQUMvRCx3QkFBd0I7QUFDeEIsVUFBVTtBQUNWLGtDQUFrQztBQUNsQyxnQkFBZ0I7QUFFaEIsc0JBQXNCO0FBQ3RCLDBCQUEwQjtBQUUxQiwwQ0FBMEM7QUFDMUMsbUJBQW1CO0FBQ25CLDRCQUE0QjtBQUM1Qiw2Q0FBNkM7QUFDN0MsNENBQTRDO0FBQzVDLHVDQUF1QztBQUN2QyxXQUFXO0FBQ1gsNkNBQTZDO0FBQzdDLHdGQUF3RjtBQUV4RixvQkFBb0I7QUFDcEIsNkJBQTZCO0FBQzdCLDhDQUE4QztBQUM5Qyw0Q0FBNEM7QUFDNUMsdUNBQXVDO0FBQ3ZDLFdBQVc7QUFDWCwrQ0FBK0M7QUFDL0MsMEZBQTBGO0FBQzFGLFNBQVM7QUFFVCx1QkFBdUI7QUFDdkIsaUNBQWlDO0FBRWpDLHVDQUF1QztBQUN2QywwQkFBMEI7QUFDMUIsdUNBQXVDO0FBQ3ZDLGdCQUFnQjtBQUNoQixRQUFRO0FBQ1Isd0JBQXdCO0FBRXhC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bUIsR0FBRyxDQUFDLENBQUMwQyxvQkFDckIsOERBQUNsQjtnQ0FBaUJDLFdBQVU7O2tEQUMxQiw4REFBQ0U7OzBEQUFFLDhEQUFDZ0I7MERBQU87Ozs7Ozs0Q0FBb0I7NENBQUVELElBQUlFLEtBQUs7Ozs7Ozs7a0RBQzFDLDhEQUFDakI7OzBEQUFFLDhEQUFDZ0I7MERBQU87Ozs7Ozs0Q0FBZ0I7NENBQUdELElBQUkvQixNQUFNOzs7Ozs7O2tEQUN4Qyw4REFBQ2dCOzswREFBRSw4REFBQ2dCOzBEQUFPOzs7Ozs7NENBQWdCOzRDQUFFRCxJQUFJRyxNQUFNOzRDQUFDOzRDQUFHSCxJQUFJSSxTQUFTOzRDQUFDOzs7Ozs7O29DQUN4REosSUFBSTVCLE1BQU0sS0FBSywwQkFDZCw4REFBQ3NCO3dDQUNDWCxXQUFVO3dDQUNWWSxTQUFTLElBQU01QixxQkFBcUJpQztrREFDckM7Ozs7OzZEQUlELDhEQUFDSzt3Q0FBS3RCLFdBQVU7a0RBQWlEOzs7Ozs7OytCQVozRGlCLElBQUl6QyxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUI5QjtHQTVhd0J6QztLQUFBQSIsInNvdXJjZXMiOlsiRTpcXE5hZ2FsYW5kXFxnYW1saW5nXFxtZWdhZW5kLW5ld1xcc3JjXFxhcHBcXGFwcFxcYWRtaW5cXHdhbGxldFxccGFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBkb2MsXHJcbi8vICAgdXBkYXRlRG9jLFxyXG4vLyAgIHNlcnZlclRpbWVzdGFtcCxcclxuLy8gICBvcmRlckJ5LFxyXG4vLyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbi8vIGltcG9ydCBmaXJlYmFzZUFwcCBmcm9tICdAL2ZpcmViYXNlJztcclxuLy8gaW1wb3J0IExheW91dCBmcm9tICdAL2FwcC9Db21wb25lbnRzL0xheW91dCc7XHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBXYWxsZXRBZG1pblBhZ2UoKSB7XHJcbi8vICAgY29uc3QgYXV0aCA9IGdldEF1dGgoZmlyZWJhc2VBcHApO1xyXG4vLyAgIGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGZpcmViYXNlQXBwKTtcclxuXHJcbi8vICAgY29uc3QgW2FkbWluLCBzZXRBZG1pbl0gPSB1c2VTdGF0ZShudWxsKTtcclxuXHJcbi8vICAgY29uc3QgW3RhcmdldEVtYWlsLCBzZXRUYXJnZXRFbWFpbF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW3RhcmdldFVpZCwgc2V0VGFyZ2V0VWlkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbY3VycmVudEJhbGFuY2UsIHNldEN1cnJlbnRCYWxhbmNlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuLy8gICBjb25zdCBbYW1vdW50VG9BZGQsIHNldEFtb3VudFRvQWRkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbYW1vdW50VG9EZWR1Y3QsIHNldEFtb3VudFRvRGVkdWN0XSA9IHVzZVN0YXRlKCcnKTtcclxuXHJcbi8vICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4vLyAgIGNvbnN0IFtzdWJtaXR0aW5nLCBzZXRTdWJtaXR0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbi8vICAgY29uc3QgW2RlcG9zaXRSZXF1ZXN0cywgc2V0RGVwb3NpdFJlcXVlc3RzXSA9IHVzZVN0YXRlKFtdKTtcclxuLy8gICBjb25zdCBbd2l0aGRyYXdSZXF1ZXN0cywgc2V0V2l0aGRyYXdSZXF1ZXN0c10gPSB1c2VTdGF0ZShbXSk7XHJcblxyXG4vLyAgIGNvbnN0IFtyZWZyZXNoS2V5LCBzZXRSZWZyZXNoS2V5XSA9IHVzZVN0YXRlKDApOyAvLyBUbyByZS1mZXRjaCBhZnRlciBhcHByb3ZlL3JlamVjdFxyXG5cclxuLy8gICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHVzZXIpID0+IHtcclxuLy8gICAgICAgc2V0QWRtaW4odXNlcik7XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFthdXRoXSk7XHJcblxyXG4vLyAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbi8vICAgICBpZiAoIWFkbWluKSByZXR1cm47XHJcblxyXG4vLyAgICAgY29uc3QgZmV0Y2hSZXF1ZXN0cyA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgICAgLy8gRGVwb3NpdFxyXG4vLyAgICAgICBjb25zdCBkZXBRID0gcXVlcnkoXHJcbi8vICAgICAgICAgY29sbGVjdGlvbihkYiwgJ2RlcG9zaXRSZXF1ZXN0cycpLFxyXG4vLyAgICAgICAgIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAncGVuZGluZycpLFxyXG4vLyAgICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJylcclxuLy8gICAgICAgKTtcclxuLy8gICAgICAgY29uc3QgZGVwU25hcCA9IGF3YWl0IGdldERvY3MoZGVwUSk7XHJcbi8vICAgICAgIHNldERlcG9zaXRSZXF1ZXN0cyhkZXBTbmFwLmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpKTtcclxuXHJcbi8vICAgICAgIC8vIFdpdGhkcmF3XHJcbi8vICAgICAgIGNvbnN0IHdpdGhRID0gcXVlcnkoXHJcbi8vICAgICAgICAgY29sbGVjdGlvbihkYiwgJ3dpdGhkcmF3UmVxdWVzdHMnKSxcclxuLy8gICAgICAgICB3aGVyZSgnc3RhdHVzJywgJz09JywgJ3BlbmRpbmcnKSxcclxuLy8gICAgICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpXHJcbi8vICAgICAgICk7XHJcbi8vICAgICAgIGNvbnN0IHdpdGhTbmFwID0gYXdhaXQgZ2V0RG9jcyh3aXRoUSk7XHJcbi8vICAgICAgIHNldFdpdGhkcmF3UmVxdWVzdHMod2l0aFNuYXAuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSkpO1xyXG4vLyAgICAgfTtcclxuXHJcbi8vICAgICBmZXRjaFJlcXVlc3RzKCk7XHJcbi8vICAgfSwgW2FkbWluLCBkYiwgcmVmcmVzaEtleV0pO1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVTZWFyY2ggPSBhc3luYyAoKSA9PiB7XHJcbi8vICAgICBpZiAoIXRhcmdldEVtYWlsKSB7XHJcbi8vICAgICAgIGFsZXJ0KCdFbnRlciBhIHZhbGlkIGVtYWlsLicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcbi8vICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGNvbnN0IHdhbGxldFF1ZXJ5ID0gcXVlcnkoXHJcbi8vICAgICAgICAgY29sbGVjdGlvbihkYiwgJ3dhbGxldHMnKSxcclxuLy8gICAgICAgICB3aGVyZSgnZW1haWwnLCAnPT0nLCB0YXJnZXRFbWFpbClcclxuLy8gICAgICAgKTtcclxuLy8gICAgICAgY29uc3Qgd2FsbGV0U25hcCA9IGF3YWl0IGdldERvY3Mod2FsbGV0UXVlcnkpO1xyXG5cclxuLy8gICAgICAgaWYgKCF3YWxsZXRTbmFwLmVtcHR5KSB7XHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0RG9jID0gd2FsbGV0U25hcC5kb2NzWzBdO1xyXG4vLyAgICAgICAgIHNldFRhcmdldFVpZCh3YWxsZXREb2MuZGF0YSgpLnVpZCk7XHJcbi8vICAgICAgICAgc2V0Q3VycmVudEJhbGFuY2Uod2FsbGV0RG9jLmRhdGEoKS5iYWxhbmNlID8/IDApO1xyXG4vLyAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIGFsZXJ0KFxyXG4vLyAgICAgICAgICAgJ1dhbGxldCBub3QgZm91bmQuIEFzayB0aGUgdXNlciB0byBsb2dpbiBvbmNlIHNvIHRoZWlyIHdhbGxldCBpcyBhdXRvLWNyZWF0ZWQuJ1xyXG4vLyAgICAgICAgICk7XHJcbi8vICAgICAgICAgc2V0VGFyZ2V0VWlkKCcnKTtcclxuLy8gICAgICAgICBzZXRDdXJyZW50QmFsYW5jZShudWxsKTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHNlYXJjaDonLCBlcnJvcik7XHJcbi8vICAgICAgIGFsZXJ0KCdFcnJvciBzZWFyY2hpbmcgZm9yIHdhbGxldC4nKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVBZGRCYWxhbmNlID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgaWYgKCF0YXJnZXRVaWQpIHtcclxuLy8gICAgICAgYWxlcnQoJ1NlYXJjaCBhbmQgc2VsZWN0IGEgdXNlciBmaXJzdC4nKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRUb0FkZCk7XHJcbi8vICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAgICAgICBhbGVydCgnRW50ZXIgYSB2YWxpZCBwb3NpdGl2ZSBhbW91bnQuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBzZXRTdWJtaXR0aW5nKHRydWUpO1xyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3Qgd2FsbGV0UmVmID0gZG9jKGRiLCAnd2FsbGV0cycsIHRhcmdldFVpZCk7XHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh3YWxsZXRSZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiAoY3VycmVudEJhbGFuY2UgPz8gMCkgKyBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKChwcmV2KSA9PiAocHJldiA/PyAwKSArIGFtb3VudCk7XHJcbi8vICAgICAgIHNldEFtb3VudFRvQWRkKCcnKTtcclxuLy8gICAgICAgYWxlcnQoJ1dhbGxldCBiYWxhbmNlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgd2FsbGV0OicsIGVycm9yKTtcclxuLy8gICAgICAgYWxlcnQoJ0ZhaWxlZCB0byB1cGRhdGUgd2FsbGV0LicpO1xyXG4vLyAgICAgfSBmaW5hbGx5IHtcclxuLy8gICAgICAgc2V0U3VibWl0dGluZyhmYWxzZSk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlRGVkdWN0QmFsYW5jZSA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgIGlmICghdGFyZ2V0VWlkKSB7XHJcbi8vICAgICAgIGFsZXJ0KCdTZWFyY2ggYW5kIHNlbGVjdCBhIHVzZXIgZmlyc3QuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuLy8gICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoYW1vdW50VG9EZWR1Y3QpO1xyXG4vLyAgICAgaWYgKGlzTmFOKGFtb3VudCkgfHwgYW1vdW50IDw9IDApIHtcclxuLy8gICAgICAgYWxlcnQoJ0VudGVyIGEgdmFsaWQgcG9zaXRpdmUgYW1vdW50LicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgaWYgKGFtb3VudCA+IChjdXJyZW50QmFsYW5jZSA/PyAwKSkge1xyXG4vLyAgICAgICBhbGVydCgnQ2Fubm90IGRlZHVjdCBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgYmFsYW5jZS4nKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCB3YWxsZXRSZWYgPSBkb2MoZGIsICd3YWxsZXRzJywgdGFyZ2V0VWlkKTtcclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKHdhbGxldFJlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6IChjdXJyZW50QmFsYW5jZSA/PyAwKSAtIGFtb3VudCxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuLy8gICAgICAgc2V0Q3VycmVudEJhbGFuY2UoKHByZXYpID0+IChwcmV2ID8/IDApIC0gYW1vdW50KTtcclxuLy8gICAgICAgc2V0QW1vdW50VG9EZWR1Y3QoJycpO1xyXG4vLyAgICAgICBhbGVydCgnV2FsbGV0IGJhbGFuY2UgZGVkdWN0ZWQgc3VjY2Vzc2Z1bGx5IScpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVkdWN0aW5nIHdhbGxldDonLCBlcnJvcik7XHJcbi8vICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gZGVkdWN0IHdhbGxldCBiYWxhbmNlLicpO1xyXG4vLyAgICAgfSBmaW5hbGx5IHtcclxuLy8gICAgICAgc2V0U3VibWl0dGluZyhmYWxzZSk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlU3RhdHVzQ2hhbmdlID0gYXN5bmMgKGNvbGxlY3Rpb25OYW1lLCBpZCwgbmV3U3RhdHVzKSA9PiB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCByZWYgPSBkb2MoZGIsIGNvbGxlY3Rpb25OYW1lLCBpZCk7XHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcclxuLy8gICAgICAgICBzdGF0dXM6IG5ld1N0YXR1cyxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuLy8gICAgICAgYWxlcnQoYFJlcXVlc3QgbWFya2VkIGFzICR7bmV3U3RhdHVzfWApO1xyXG4vLyAgICAgICBzZXRSZWZyZXNoS2V5KChwcmV2KSA9PiBwcmV2ICsgMSk7XHJcbi8vICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBzdGF0dXM6JywgZXJyb3IpO1xyXG4vLyAgICAgICBhbGVydCgnRmFpbGVkIHRvIHVwZGF0ZSBzdGF0dXMuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgaWYgKCFhZG1pbikge1xyXG4vLyAgICAgcmV0dXJuIChcclxuLy8gICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS05MDAgdGV4dC13aGl0ZVwiPlxyXG4vLyAgICAgICAgIDxwPlBsZWFzZSBsb2dpbiBhcyBhZG1pbiB0byBtYW5hZ2Ugd2FsbGV0cy48L3A+XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgKTtcclxuLy8gICB9XHJcblxyXG4vLyAgIHJldHVybiAoXHJcbi8vICAgICA8TGF5b3V0PlxyXG4vLyAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktc3RhcnQgcC04IHNwYWNlLXktOFwiPlxyXG4vLyAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS04MDAgcm91bmRlZC1sZyBzaGFkb3ctMnhsIHAtNiBtYXgtdy1tZCB3LWZ1bGxcIj5cclxuLy8gICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPlxyXG4vLyAgICAgICAgICAgICBBZG1pbjogTWFuYWdlIFdhbGxldFxyXG4vLyAgICAgICAgICAgPC9oMT5cclxuXHJcbi8vICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cclxuLy8gICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIG1iLTJcIj5Vc2VyIEVtYWlsPC9sYWJlbD5cclxuLy8gICAgICAgICAgICAgPGlucHV0XHJcbi8vICAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuLy8gICAgICAgICAgICAgICB2YWx1ZT17dGFyZ2V0RW1haWx9XHJcbi8vICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRUYXJnZXRFbWFpbChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB1c2VyIGVtYWlsXCJcclxuLy8gICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtNCBweS0zIHJvdW5kZWQgYmctZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCB0ZXh0LXdoaXRlIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy15ZWxsb3ctNDAwXCJcclxuLy8gICAgICAgICAgICAgLz5cclxuLy8gICAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaH1cclxuLy8gICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cclxuLy8gICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtdC0yIHctZnVsbCBweS0zIHJvdW5kZWQtbWQgZm9udC1zZW1pYm9sZCB0ZXh0LWJsYWNrICR7XHJcbi8vICAgICAgICAgICAgICAgICBsb2FkaW5nXHJcbi8vICAgICAgICAgICAgICAgICAgID8gJ2JnLXllbGxvdy0xMDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xyXG4vLyAgICAgICAgICAgICAgICAgICA6ICdiZy15ZWxsb3ctNDAwIGhvdmVyOmJnLXllbGxvdy01MDAnXHJcbi8vICAgICAgICAgICAgICAgfWB9XHJcbi8vICAgICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAgICB7bG9hZGluZyA/ICdTZWFyY2hpbmcuLi4nIDogJ0ZpbmQgV2FsbGV0J31cclxuLy8gICAgICAgICAgICAgPC9idXR0b24+XHJcbi8vICAgICAgICAgICA8L2Rpdj5cclxuXHJcbi8vICAgICAgICAgICB7dGFyZ2V0VWlkICYmIChcclxuLy8gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00XCI+XHJcbi8vICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBtYi0xIHRleHQtZ3JheS00MDAgYnJlYWstYWxsXCI+XHJcbi8vICAgICAgICAgICAgICAgICBVSUQ6IDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+e3RhcmdldFVpZH08L3NwYW4+XHJcbi8vICAgICAgICAgICAgICAgPC9wPlxyXG4vLyAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGcgbWItNFwiPlxyXG4vLyAgICAgICAgICAgICAgICAgQ3VycmVudCBCYWxhbmNlOnsnICd9XHJcbi8vICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXllbGxvdy00MDAgZm9udC1zZW1pYm9sZFwiPlxyXG4vLyAgICAgICAgICAgICAgICAgICDigrl7Y3VycmVudEJhbGFuY2U/LnRvRml4ZWQoMil9XHJcbi8vICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbi8vICAgICAgICAgICAgICAgPC9wPlxyXG5cclxuLy8gICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgbWItMlwiPkFkZCBCYWxhbmNlPC9sYWJlbD5cclxuLy8gICAgICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgbWluPVwiMFwiXHJcbi8vICAgICAgICAgICAgICAgICBzdGVwPVwiMC4wMVwiXHJcbi8vICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50VG9BZGR9XHJcbi8vICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFtb3VudFRvQWRkKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgYW1vdW50IHRvIGFkZFwiXHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtNCBweS0zIG1iLTIgcm91bmRlZCBiZy1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHRleHQtd2hpdGUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXllbGxvdy00MDBcIlxyXG4vLyAgICAgICAgICAgICAgIC8+XHJcbi8vICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkQmFsYW5jZX1cclxuLy8gICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzdWJtaXR0aW5nfVxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHB5LTMgcm91bmRlZC1tZCBmb250LXNlbWlib2xkIHRleHQtYmxhY2sgJHtcclxuLy8gICAgICAgICAgICAgICAgICAgc3VibWl0dGluZ1xyXG4vLyAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXllbGxvdy0xMDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXllbGxvdy00MDAgaG92ZXI6YmcteWVsbG93LTUwMCdcclxuLy8gICAgICAgICAgICAgICAgIH1gfVxyXG4vLyAgICAgICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAgICAgIHtzdWJtaXR0aW5nID8gJ1VwZGF0aW5nLi4uJyA6ICdBZGQgQmFsYW5jZSd9XHJcbi8vICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4vLyAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayBtYi0yIG10LTZcIj5EZWR1Y3QgQmFsYW5jZTwvbGFiZWw+XHJcbi8vICAgICAgICAgICAgICAgPGlucHV0XHJcbi8vICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuLy8gICAgICAgICAgICAgICAgIG1pbj1cIjBcIlxyXG4vLyAgICAgICAgICAgICAgICAgc3RlcD1cIjAuMDFcIlxyXG4vLyAgICAgICAgICAgICAgICAgdmFsdWU9e2Ftb3VudFRvRGVkdWN0fVxyXG4vLyAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBbW91bnRUb0RlZHVjdChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIGFtb3VudCB0byBkZWR1Y3RcIlxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMyBtYi0yIHJvdW5kZWQgYmctZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCB0ZXh0LXdoaXRlIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1yZWQtNDAwXCJcclxuLy8gICAgICAgICAgICAgICAvPlxyXG4vLyAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURlZHVjdEJhbGFuY2V9XHJcbi8vICAgICAgICAgICAgICAgICBkaXNhYmxlZD17c3VibWl0dGluZ31cclxuLy8gICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCBweS0zIHJvdW5kZWQtbWQgZm9udC1zZW1pYm9sZCB0ZXh0LWJsYWNrICR7XHJcbi8vICAgICAgICAgICAgICAgICAgIHN1Ym1pdHRpbmdcclxuLy8gICAgICAgICAgICAgICAgICAgICA/ICdiZy1yZWQtMTAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuLy8gICAgICAgICAgICAgICAgICAgICA6ICdiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAnXHJcbi8vICAgICAgICAgICAgICAgICB9YH1cclxuLy8gICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICB7c3VibWl0dGluZyA/ICdVcGRhdGluZy4uLicgOiAnRGVkdWN0IEJhbGFuY2UnfVxyXG4vLyAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICA8L2Rpdj5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcblxyXG4vLyAgICAgICAgIHsvKiBEZXBvc2l0IFJlcXVlc3RzICovfVxyXG4vLyAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS04MDAgcm91bmRlZC1sZyBzaGFkb3ctMnhsIHAtNiBtYXgtdy0yeGwgdy1mdWxsXCI+XHJcbi8vICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgbWItNFwiPkRlcG9zaXQgUmVxdWVzdHM8L2gyPlxyXG4vLyAgICAgICAgICAge2RlcG9zaXRSZXF1ZXN0cy5sZW5ndGggPT09IDAgJiYgKFxyXG4vLyAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwXCI+Tm8gZGVwb3NpdCByZXF1ZXN0cyBmb3VuZC48L3A+XHJcbi8vICAgICAgICAgICApfVxyXG4vLyAgICAgICAgICAge2RlcG9zaXRSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4vLyAgICAgICAgICAgICA8ZGl2XHJcbi8vICAgICAgICAgICAgICAga2V5PXtyZXEuaWR9XHJcbi8vICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWItNCBib3JkZXItYiBib3JkZXItZ3JheS02MDAgcGItMiB0ZXh0LXNtXCJcclxuLy8gICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgIDxwPkVtYWlsOiB7cmVxLmVtYWlsfTwvcD5cclxuLy8gICAgICAgICAgICAgICA8cD5BbW91bnQ6IOKCuXtyZXEuYW1vdW50fTwvcD5cclxuLy8gICAgICAgICAgICAgICA8cD5UeG4gSUQ6IHtyZXEudHJhbnNhY3Rpb25JZH08L3A+XHJcbi8vICAgICAgICAgICAgICAgPHA+U3RhdHVzOiA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGRcIj57cmVxLnN0YXR1c308L3NwYW4+PC9wPlxyXG4vLyAgICAgICAgICAgICAgIDxwPlxyXG4vLyAgICAgICAgICAgICAgICAgRGF0ZTp7JyAnfVxyXG4vLyAgICAgICAgICAgICAgICAge3JlcS5jcmVhdGVkQXQ/LnRvRGF0ZVxyXG4vLyAgICAgICAgICAgICAgICAgICA/IHJlcS5jcmVhdGVkQXQudG9EYXRlKCkudG9Mb2NhbGVTdHJpbmcoKVxyXG4vLyAgICAgICAgICAgICAgICAgICA6ICdOL0EnfVxyXG4vLyAgICAgICAgICAgICAgIDwvcD5cclxuLy8gICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgZmxleCBnYXAtMlwiPlxyXG4vLyAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdGF0dXNDaGFuZ2UoJ2RlcG9zaXRSZXF1ZXN0cycsIHJlcS5pZCwgJ2FwcHJvdmVkJyl9XHJcbi8vICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTEgcHgtMyByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAgICAgICAgQXBwcm92ZVxyXG4vLyAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbi8vICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVN0YXR1c0NoYW5nZSgnZGVwb3NpdFJlcXVlc3RzJywgcmVxLmlkLCAncmVqZWN0ZWQnKX1cclxuLy8gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCBob3ZlcjpiZy1yZWQtNjAwIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0xIHB4LTMgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICAgIFJlamVjdFxyXG4vLyAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbi8vICAgICAgICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICAgKSl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcblxyXG4vLyAgICAgICAgIHsvKiBXaXRoZHJhdyBSZXF1ZXN0cyAqL31cclxuLy8gICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTgwMCByb3VuZGVkLWxnIHNoYWRvdy0yeGwgcC02IG1heC13LTJ4bCB3LWZ1bGxcIj5cclxuLy8gICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi00XCI+V2l0aGRyYXcgUmVxdWVzdHM8L2gyPlxyXG4vLyAgICAgICAgICAge3dpdGhkcmF3UmVxdWVzdHMubGVuZ3RoID09PSAwICYmIChcclxuLy8gICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPk5vIHdpdGhkcmF3IHJlcXVlc3RzIGZvdW5kLjwvcD5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4vLyAgICAgICAgICAgICA8ZGl2XHJcbi8vICAgICAgICAgICAgICAga2V5PXtyZXEuaWR9XHJcbi8vICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWItNCBib3JkZXItYiBib3JkZXItZ3JheS02MDAgcGItMiB0ZXh0LXNtXCJcclxuLy8gICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgIDxwPkVtYWlsOiB7cmVxLmVtYWlsfTwvcD5cclxuLy8gICAgICAgICAgICAgICA8cD5BbW91bnQ6IOKCuXtyZXEuYW1vdW50fTwvcD5cclxuLy8gICAgICAgICAgICAgICA8cD5TdGF0dXM6IDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZFwiPntyZXEuc3RhdHVzfTwvc3Bhbj48L3A+XHJcbi8vICAgICAgICAgICAgICAgPHA+XHJcbi8vICAgICAgICAgICAgICAgICBEYXRlOnsnICd9XHJcbi8vICAgICAgICAgICAgICAgICB7cmVxLmNyZWF0ZWRBdD8udG9EYXRlXHJcbi8vICAgICAgICAgICAgICAgICAgID8gcmVxLmNyZWF0ZWRBdC50b0RhdGUoKS50b0xvY2FsZVN0cmluZygpXHJcbi8vICAgICAgICAgICAgICAgICAgIDogJ04vQSd9XHJcbi8vICAgICAgICAgICAgICAgPC9wPlxyXG4vLyAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBmbGV4IGdhcC0yXCI+XHJcbi8vICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVN0YXR1c0NoYW5nZSgnd2l0aGRyYXdSZXF1ZXN0cycsIHJlcS5pZCwgJ2FwcHJvdmVkJyl9XHJcbi8vICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTEgcHgtMyByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAgICAgICAgQXBwcm92ZVxyXG4vLyAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbi8vICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVN0YXR1c0NoYW5nZSgnd2l0aGRyYXdSZXF1ZXN0cycsIHJlcS5pZCwgJ3JlamVjdGVkJyl9XHJcbi8vICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXJlZC01MDAgaG92ZXI6YmctcmVkLTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMSBweC0zIHJvdW5kZWRcIlxyXG4vLyAgICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgICBSZWplY3RcclxuLy8gICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICAgICA8L2Rpdj5cclxuLy8gICAgICAgICAgICkpfVxyXG4vLyAgICAgICAgIDwvZGl2PiAqL31cclxuLy8gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktODAwIHJvdW5kZWQtbGcgc2hhZG93LTJ4bCBwLTYgbWF4LXctMnhsIHctZnVsbFwiPlxyXG4vLyAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi00XCI+V2l0aGRyYXcgUmVxdWVzdHM8L2gyPlxyXG4vLyAgIHt3aXRoZHJhd1JlcXVlc3RzLmxlbmd0aCA9PT0gMCAmJiAoXHJcbi8vICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwXCI+Tm8gd2l0aGRyYXcgcmVxdWVzdHMgZm91bmQuPC9wPlxyXG4vLyAgICl9XHJcbi8vICAge3dpdGhkcmF3UmVxdWVzdHMubWFwKChyZXEpID0+IChcclxuLy8gICAgIDxkaXZcclxuLy8gICAgICAga2V5PXtyZXEuaWR9XHJcbi8vICAgICAgIGNsYXNzTmFtZT1cIm1iLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNjAwIHBiLTMgdGV4dC1zbVwiXHJcbi8vICAgICA+XHJcbi8vICAgICAgIDxwPjxzcGFuIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj5FbWFpbDo8L3NwYW4+IHtyZXEuZW1haWx9PC9wPlxyXG4vLyAgICAgICA8cD48c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+QW1vdW50Ojwvc3Bhbj4g4oK5e3JlcS5hbW91bnR9PC9wPlxyXG4vLyAgICAgICA8cD48c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+U3RhdHVzOjwvc3Bhbj4gPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkXCI+e3JlcS5zdGF0dXN9PC9zcGFuPjwvcD5cclxuLy8gICAgICAgPHA+XHJcbi8vICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPkRhdGU6PC9zcGFuPnsnICd9XHJcbi8vICAgICAgICAge3JlcS5jcmVhdGVkQXQ/LnRvRGF0ZVxyXG4vLyAgICAgICAgICAgPyByZXEuY3JlYXRlZEF0LnRvRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKClcclxuLy8gICAgICAgICAgIDogJ04vQSd9XHJcbi8vICAgICAgIDwvcD5cclxuLy8gICAgICAgPHA+PHNwYW4gY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPk1ldGhvZDo8L3NwYW4+IHtyZXEubWV0aG9kIHx8ICdOL0EnfTwvcD5cclxuLy8gICAgICAgPHA+PHNwYW4gY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPkFkZHJlc3M6PC9zcGFuPiB7cmVxLmFkZHJlc3MgfHwgJ04vQSd9PC9wPlxyXG5cclxuLy8gICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIGZsZXggZ2FwLTJcIj5cclxuLy8gICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdGF0dXNDaGFuZ2UoJ3dpdGhkcmF3UmVxdWVzdHMnLCByZXEuaWQsICdhcHByb3ZlZCcpfVxyXG4vLyAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAwIGhvdmVyOmJnLWdyZWVuLTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMSBweC0zIHJvdW5kZWRcIlxyXG4vLyAgICAgICAgID5cclxuLy8gICAgICAgICAgIEFwcHJvdmVcclxuLy8gICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdGF0dXNDaGFuZ2UoJ3dpdGhkcmF3UmVxdWVzdHMnLCByZXEuaWQsICdyZWplY3RlZCcpfVxyXG4vLyAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCBob3ZlcjpiZy1yZWQtNjAwIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0xIHB4LTMgcm91bmRlZFwiXHJcbi8vICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgUmVqZWN0XHJcbi8vICAgICAgICAgPC9idXR0b24+XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgPC9kaXY+XHJcbi8vICAgKSl9XHJcbi8vIDwvZGl2PlxyXG4vLyAgICAgICA8L2Rpdj5cclxuLy8gICAgIDwvTGF5b3V0PlxyXG4vLyAgICk7XHJcbi8vIH1cclxuXHJcblxyXG4vLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBkb2MsXHJcbi8vICAgdXBkYXRlRG9jLFxyXG4vLyAgIHNlcnZlclRpbWVzdGFtcCxcclxuLy8gfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG4vLyBpbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAnQC9maXJlYmFzZSc7XHJcbi8vIGltcG9ydCBMYXlvdXQgZnJvbSAnQC9hcHAvQ29tcG9uZW50cy9MYXlvdXQnO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gV2FsbGV0QWRtaW5QYWdlKCkge1xyXG4vLyAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuLy8gICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShmaXJlYmFzZUFwcCk7XHJcblxyXG4vLyAgIGNvbnN0IFtzdWJhZG1pbiwgc2V0U3ViYWRtaW5dID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4vLyAgIGNvbnN0IFt0YXJnZXRFbWFpbCwgc2V0VGFyZ2V0RW1haWxdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFt0YXJnZXRVaWQsIHNldFRhcmdldFVpZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW2N1cnJlbnRCYWxhbmNlLCBzZXRDdXJyZW50QmFsYW5jZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbYW1vdW50VG9BZGQsIHNldEFtb3VudFRvQWRkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuLy8gICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHVzZXIpID0+IHtcclxuLy8gICAgICAgc2V0U3ViYWRtaW4odXNlcik7XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFthdXRoXSk7XHJcblxyXG4vLyAgIGNvbnN0IGhhbmRsZVNlYXJjaCA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbi8vICAgICBzZXRNZXNzYWdlKCcnKTtcclxuLy8gICAgIHNldFRhcmdldFVpZCgnJyk7XHJcbi8vICAgICBzZXRDdXJyZW50QmFsYW5jZShudWxsKTtcclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCB3YWxsZXRRdWVyeSA9IHF1ZXJ5KFxyXG4vLyAgICAgICAgIGNvbGxlY3Rpb24oZGIsICd3YWxsZXRzJyksXHJcbi8vICAgICAgICAgd2hlcmUoJ2VtYWlsJywgJz09JywgdGFyZ2V0RW1haWwpXHJcbi8vICAgICAgICk7XHJcbi8vICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyh3YWxsZXRRdWVyeSk7XHJcblxyXG4vLyAgICAgICBpZiAoc25hcHNob3QuZW1wdHkpIHtcclxuLy8gICAgICAgICBzZXRNZXNzYWdlKCfinYwgV2FsbGV0IG5vdCBmb3VuZC4gQXNrIHVzZXIgdG8gbG9nIGluIG9uY2UuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBjb25zdCB3YWxsZXQgPSBzbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcclxuXHJcbi8vICAgICAgIC8vIOKchSBBbGxvdyBvbmx5IGlmIHdhbGxldC5zdWJBZG1pbklkIG1hdGNoZXMgY3VycmVudCBzdWJhZG1pbi51aWRcclxuLy8gICAgICAgaWYgKHdhbGxldC5zdWJBZG1pbklkICE9PSBzdWJhZG1pbj8udWlkKSB7XHJcbi8vICAgICAgICAgc2V0TWVzc2FnZSgn4p2MIEFjY2VzcyBkZW5pZWQuIFRoaXMgdXNlciB3YXMgbm90IGNyZWF0ZWQgYnkgeW91LicpO1xyXG4vLyAgICAgICAgIHJldHVybjtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgc2V0VGFyZ2V0VWlkKHdhbGxldC51aWQpO1xyXG4vLyAgICAgICBzZXRDdXJyZW50QmFsYW5jZSh3YWxsZXQuYmFsYW5jZSA/PyAwKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4pyFIFdhbGxldCBmb3VuZCBhbmQgdmVyaWZpZWQuJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyb3I6JywgZXJyb3IpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRmFpbGVkIHRvIHNlYXJjaCB3YWxsZXQuJyk7XHJcbi8vICAgICB9IGZpbmFsbHkge1xyXG4vLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuLy8gICAgIH1cclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVBZGRCYWxhbmNlID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgaWYgKCF0YXJnZXRVaWQgfHwgIWFtb3VudFRvQWRkKSByZXR1cm47XHJcblxyXG4vLyAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRUb0FkZCk7XHJcbi8vICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRW50ZXIgdmFsaWQgYW1vdW50LicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3Qgd2FsbGV0UmVmID0gZG9jKGRiLCAnd2FsbGV0cycsIHRhcmdldFVpZCk7XHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh3YWxsZXRSZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiAoY3VycmVudEJhbGFuY2UgPz8gMCkgKyBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKChwcmV2KSA9PiAocHJldiA/PyAwKSArIGFtb3VudCk7XHJcbi8vICAgICAgIHNldEFtb3VudFRvQWRkKCcnKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4pyFIEJhbGFuY2UgYWRkZWQuJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcignQWRkIGVycm9yOicsIGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBGYWlsZWQgdG8gYWRkIGJhbGFuY2UuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC04IGZsZXgganVzdGlmeS1jZW50ZXJcIj5cclxuLy8gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy14bCBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPlN1YmFkbWluOiBBZGQgQmFsYW5jZTwvaDE+XHJcblxyXG4vLyAgICAgICAgICAgPGlucHV0XHJcbi8vICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXHJcbi8vICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVXNlciBlbWFpbFwiXHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4vLyAgICAgICAgICAgICB2YWx1ZT17dGFyZ2V0RW1haWx9XHJcbi8vICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VGFyZ2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxyXG4vLyAgICAgICAgICAgLz5cclxuXHJcbi8vICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaH1cclxuLy8gICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy15ZWxsb3ctNTAwIGhvdmVyOmJnLXllbGxvdy02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZCBtYi00XCJcclxuLy8gICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAge2xvYWRpbmcgPyAnU2VhcmNoaW5nLi4uJyA6ICdGaW5kIFdhbGxldCd9XHJcbi8vICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbi8vICAgICAgICAgICB7bWVzc2FnZSAmJiAoXHJcbi8vICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtc20gbWItNCB0ZXh0LXllbGxvdy00MDBcIj57bWVzc2FnZX08L3A+XHJcbi8vICAgICAgICAgICApfVxyXG5cclxuLy8gICAgICAgICAgIHt0YXJnZXRVaWQgJiYgKFxyXG4vLyAgICAgICAgICAgICA8PlxyXG4vLyAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTJcIj5DdXJyZW50IEJhbGFuY2U6IOKCuXtjdXJyZW50QmFsYW5jZT8udG9GaXhlZCgyKX08L3A+XHJcblxyXG4vLyAgICAgICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbi8vICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFtb3VudCB0byBhZGRcIlxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50VG9BZGR9XHJcbi8vICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFtb3VudFRvQWRkKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgICAgICAvPlxyXG5cclxuLy8gICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRCYWxhbmNlfVxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgQWRkIEJhbGFuY2VcclxuLy8gICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgPC8+XHJcbi8vICAgICAgICAgICApfVxyXG4vLyAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICA8L2Rpdj5cclxuLy8gICAgIDwvTGF5b3V0PlxyXG4vLyAgICk7XHJcbi8vIH1cclxuXHJcblxyXG4vLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBkb2MsXHJcbi8vICAgdXBkYXRlRG9jLFxyXG4vLyAgIHNlcnZlclRpbWVzdGFtcCxcclxuLy8gfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG4vLyBpbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAnQC9maXJlYmFzZSc7XHJcbi8vIGltcG9ydCBMYXlvdXQgZnJvbSAnQC9hcHAvQ29tcG9uZW50cy9MYXlvdXQnO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gV2FsbGV0QWRtaW5QYWdlKCkge1xyXG4vLyAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuLy8gICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShmaXJlYmFzZUFwcCk7XHJcblxyXG4vLyAgIGNvbnN0IFthZG1pbiwgc2V0QWRtaW5dID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4vLyAgIGNvbnN0IFt0YXJnZXRFbWFpbCwgc2V0VGFyZ2V0RW1haWxdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFt0YXJnZXRVaWQsIHNldFRhcmdldFVpZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW2N1cnJlbnRCYWxhbmNlLCBzZXRDdXJyZW50QmFsYW5jZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbYW1vdW50VG9BZGQsIHNldEFtb3VudFRvQWRkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuLy8gICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHVzZXIpID0+IHtcclxuLy8gICAgICAgc2V0QWRtaW4odXNlcik7XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFtdKTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuLy8gICAgIHNldE1lc3NhZ2UoJycpO1xyXG4vLyAgICAgc2V0VGFyZ2V0VWlkKCcnKTtcclxuLy8gICAgIHNldEN1cnJlbnRCYWxhbmNlKG51bGwpO1xyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGNvbnN0IHEgPSBxdWVyeShcclxuLy8gICAgICAgICBjb2xsZWN0aW9uKGRiLCAnd2FsbGV0cycpLFxyXG4vLyAgICAgICAgIHdoZXJlKCdlbWFpbCcsICc9PScsIHRhcmdldEVtYWlsKVxyXG4vLyAgICAgICApO1xyXG4vLyAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbi8vICAgICAgIGlmIChzbmFwLmVtcHR5KSB7XHJcbi8vICAgICAgICAgc2V0TWVzc2FnZSgn4p2MIFdhbGxldCBub3QgZm91bmQuIEFzayB1c2VyIHRvIGxvZ2luIG9uY2UuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBjb25zdCB3YWxsZXQgPSBzbmFwLmRvY3NbMF0uZGF0YSgpO1xyXG4vLyAgICAgICBzZXRUYXJnZXRVaWQod2FsbGV0LnVpZCk7XHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKHdhbGxldC5iYWxhbmNlID8/IDApO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgU3ViLWFkbWluIHdhbGxldCBmb3VuZC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBFcnJvciBmZXRjaGluZyB3YWxsZXQuJyk7XHJcbi8vICAgICB9IGZpbmFsbHkge1xyXG4vLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuLy8gICAgIH1cclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVBZGRCYWxhbmNlID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgaWYgKCF0YXJnZXRVaWQgfHwgIWFtb3VudFRvQWRkKSByZXR1cm47XHJcblxyXG4vLyAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRUb0FkZCk7XHJcbi8vICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRW50ZXIgYSB2YWxpZCBhbW91bnQuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCB3YWxsZXRSZWYgPSBkb2MoZGIsICd3YWxsZXRzJywgdGFyZ2V0VWlkKTtcclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKHdhbGxldFJlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6IChjdXJyZW50QmFsYW5jZSA/PyAwKSArIGFtb3VudCxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKChwcmV2KSA9PiAocHJldiA/PyAwKSArIGFtb3VudCk7XHJcbi8vICAgICAgIHNldEFtb3VudFRvQWRkKCcnKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4pyFIEJhbGFuY2Ugc3VjY2Vzc2Z1bGx5IGFkZGVkIHRvIHN1YmFkbWluLicpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEZhaWxlZCB0byB1cGRhdGUgd2FsbGV0LicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIHJldHVybiAoXHJcbi8vICAgICA8TGF5b3V0PlxyXG4vLyAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHAtOCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XHJcbi8vICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXcteGwgYmctZ3JheS04MDAgcC02IHJvdW5kZWQgc2hhZG93LWxnXCI+XHJcbi8vICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC1jZW50ZXJcIj5BZG1pbjogRnVuZCBTdWItYWRtaW48L2gxPlxyXG5cclxuLy8gICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxyXG4vLyAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlN1Yi1hZG1pbiBlbWFpbFwiXHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4vLyAgICAgICAgICAgICB2YWx1ZT17dGFyZ2V0RW1haWx9XHJcbi8vICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VGFyZ2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxyXG4vLyAgICAgICAgICAgLz5cclxuXHJcbi8vICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaH1cclxuLy8gICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy15ZWxsb3ctNTAwIGhvdmVyOmJnLXllbGxvdy02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZCBtYi00XCJcclxuLy8gICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAge2xvYWRpbmcgPyAnU2VhcmNoaW5nLi4uJyA6ICdGaW5kIFdhbGxldCd9XHJcbi8vICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbi8vICAgICAgICAgICB7bWVzc2FnZSAmJiAoXHJcbi8vICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtc20gbWItNCB0ZXh0LXllbGxvdy00MDBcIj57bWVzc2FnZX08L3A+XHJcbi8vICAgICAgICAgICApfVxyXG5cclxuLy8gICAgICAgICAgIHt0YXJnZXRVaWQgJiYgKFxyXG4vLyAgICAgICAgICAgICA8PlxyXG4vLyAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTJcIj5DdXJyZW50IEJhbGFuY2U6IOKCuXtjdXJyZW50QmFsYW5jZT8udG9GaXhlZCgyKX08L3A+XHJcblxyXG4vLyAgICAgICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbi8vICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFtb3VudCB0byBhZGRcIlxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50VG9BZGR9XHJcbi8vICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFtb3VudFRvQWRkKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgICAgICAvPlxyXG5cclxuLy8gICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRCYWxhbmNlfVxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgQWRkIEJhbGFuY2VcclxuLy8gICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgPC8+XHJcbi8vICAgICAgICAgICApfVxyXG4vLyAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICA8L2Rpdj5cclxuLy8gICAgIDwvTGF5b3V0PlxyXG4vLyAgICk7XHJcbi8vIH1cclxuXHJcblxyXG5cclxuLy8gJ3VzZSBjbGllbnQnO1xyXG5cclxuLy8gaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbi8vIGltcG9ydCB7IGdldEF1dGgsIG9uQXV0aFN0YXRlQ2hhbmdlZCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xyXG4vLyBpbXBvcnQge1xyXG4vLyAgIGdldEZpcmVzdG9yZSxcclxuLy8gICBjb2xsZWN0aW9uLFxyXG4vLyAgIHF1ZXJ5LFxyXG4vLyAgIHdoZXJlLFxyXG4vLyAgIGdldERvY3MsXHJcbi8vICAgZG9jLFxyXG4vLyAgIHVwZGF0ZURvYyxcclxuLy8gICBzZXJ2ZXJUaW1lc3RhbXAsXHJcbi8vIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuLy8gaW1wb3J0IGZpcmViYXNlQXBwIGZyb20gJ0AvZmlyZWJhc2UnO1xyXG4vLyBpbXBvcnQgTGF5b3V0IGZyb20gJ0AvYXBwL0NvbXBvbmVudHMvTGF5b3V0JztcclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdhbGxldEFkbWluUGFnZSgpIHtcclxuLy8gICBjb25zdCBhdXRoID0gZ2V0QXV0aChmaXJlYmFzZUFwcCk7XHJcbi8vICAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoZmlyZWJhc2VBcHApO1xyXG5cclxuLy8gICBjb25zdCBbYWRtaW4sIHNldEFkbWluXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuLy8gICBjb25zdCBbdGFyZ2V0RW1haWwsIHNldFRhcmdldEVtYWlsXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbdGFyZ2V0VWlkLCBzZXRUYXJnZXRVaWRdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFtjdXJyZW50QmFsYW5jZSwgc2V0Q3VycmVudEJhbGFuY2VdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW2Ftb3VudFRvQWRkLCBzZXRBbW91bnRUb0FkZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbi8vICAgdXNlRWZmZWN0KCgpID0+IHtcclxuLy8gICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsICh1c2VyKSA9PiB7XHJcbi8vICAgICAgIHNldEFkbWluKHVzZXIpO1xyXG4vLyAgICAgfSk7XHJcbi8vICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcclxuLy8gICB9LCBbXSk7XHJcblxyXG4vLyAgIGNvbnN0IGhhbmRsZVNlYXJjaCA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbi8vICAgICBzZXRNZXNzYWdlKCcnKTtcclxuLy8gICAgIHNldFRhcmdldFVpZCgnJyk7XHJcbi8vICAgICBzZXRDdXJyZW50QmFsYW5jZShudWxsKTtcclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBxID0gcXVlcnkoXHJcbi8vICAgICAgICAgY29sbGVjdGlvbihkYiwgJ3N1YndhbGxldHMnKSwgLy8g4pyFIFVzZSAnc3Vid2FsbGV0cycgaGVyZVxyXG4vLyAgICAgICAgIHdoZXJlKCdlbWFpbCcsICc9PScsIHRhcmdldEVtYWlsKVxyXG4vLyAgICAgICApO1xyXG4vLyAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbi8vICAgICAgIGlmIChzbmFwLmVtcHR5KSB7XHJcbi8vICAgICAgICAgc2V0TWVzc2FnZSgn4p2MIFN1YmFkbWluIHdhbGxldCBub3QgZm91bmQuIEFzayB0aGVtIHRvIGxvZ2luIG9uY2UuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBjb25zdCB3YWxsZXQgPSBzbmFwLmRvY3NbMF0uZGF0YSgpO1xyXG4vLyAgICAgICBzZXRUYXJnZXRVaWQod2FsbGV0LnVpZCk7XHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKHdhbGxldC5iYWxhbmNlID8/IDApO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgU3ViYWRtaW4gd2FsbGV0IGZvdW5kLicpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEVycm9yIGZldGNoaW5nIHN1YmFkbWluIHdhbGxldC4nKTtcclxuLy8gICAgIH0gZmluYWxseSB7XHJcbi8vICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIGNvbnN0IGhhbmRsZUFkZEJhbGFuY2UgPSBhc3luYyAoKSA9PiB7XHJcbi8vICAgICBpZiAoIXRhcmdldFVpZCB8fCAhYW1vdW50VG9BZGQpIHJldHVybjtcclxuXHJcbi8vICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudFRvQWRkKTtcclxuLy8gICAgIGlmIChpc05hTihhbW91bnQpIHx8IGFtb3VudCA8PSAwKSB7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBFbnRlciBhIHZhbGlkIGFtb3VudC4nKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGNvbnN0IHdhbGxldFJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCB0YXJnZXRVaWQpOyAvLyDinIUgVXNlICdzdWJ3YWxsZXRzJ1xyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2Mod2FsbGV0UmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogKGN1cnJlbnRCYWxhbmNlID8/IDApICsgYW1vdW50LFxyXG4vLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgc2V0Q3VycmVudEJhbGFuY2UoKHByZXYpID0+IChwcmV2ID8/IDApICsgYW1vdW50KTtcclxuLy8gICAgICAgc2V0QW1vdW50VG9BZGQoJycpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgQmFsYW5jZSBzdWNjZXNzZnVsbHkgYWRkZWQgdG8gc3ViYWRtaW4uJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRmFpbGVkIHRvIHVwZGF0ZSBzdWJhZG1pbiB3YWxsZXQuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC04IGZsZXgganVzdGlmeS1jZW50ZXJcIj5cclxuLy8gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy14bCBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPkFkbWluOiBGdW5kIFN1Yi1hZG1pbiBXYWxsZXQ8L2gxPlxyXG5cclxuLy8gICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxyXG4vLyAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlN1YmFkbWluIEVtYWlsXCJcclxuLy8gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgIHZhbHVlPXt0YXJnZXRFbWFpbH1cclxuLy8gICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRUYXJnZXRFbWFpbChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAvPlxyXG5cclxuLy8gICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VhcmNofVxyXG4vLyAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cclxuLy8gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXllbGxvdy01MDAgaG92ZXI6YmcteWVsbG93LTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkIG1iLTRcIlxyXG4vLyAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICB7bG9hZGluZyA/ICdTZWFyY2hpbmcuLi4nIDogJ0ZpbmQgU3ViYWRtaW4gV2FsbGV0J31cclxuLy8gICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuLy8gICAgICAgICAgIHttZXNzYWdlICYmIChcclxuLy8gICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBtYi00IHRleHQteWVsbG93LTQwMFwiPnttZXNzYWdlfTwvcD5cclxuLy8gICAgICAgICAgICl9XHJcblxyXG4vLyAgICAgICAgICAge3RhcmdldFVpZCAmJiAoXHJcbi8vICAgICAgICAgICAgIDw+XHJcbi8vICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMlwiPkN1cnJlbnQgQmFsYW5jZTog4oK5e2N1cnJlbnRCYWxhbmNlPy50b0ZpeGVkKDIpfTwvcD5cclxuXHJcbi8vICAgICAgICAgICAgICAgPGlucHV0XHJcbi8vICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuLy8gICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW1vdW50IHRvIGFkZFwiXHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0zIHJvdW5kZWQgYmctZ3JheS03MDAgdGV4dC13aGl0ZSBtYi00XCJcclxuLy8gICAgICAgICAgICAgICAgIHZhbHVlPXthbW91bnRUb0FkZH1cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0QW1vdW50VG9BZGQoZS50YXJnZXQudmFsdWUpfVxyXG4vLyAgICAgICAgICAgICAgIC8+XHJcblxyXG4vLyAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZEJhbGFuY2V9XHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JlZW4tNTAwIGhvdmVyOmJnLWdyZWVuLTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICBBZGQgQmFsYW5jZVxyXG4vLyAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICA8Lz5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgPC9MYXlvdXQ+XHJcbi8vICAgKTtcclxuLy8gfVxyXG5cclxuXHJcbi8vICd1c2UgY2xpZW50JztcclxuXHJcbi8vIGltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG4vLyBpbXBvcnQgeyBnZXRBdXRoLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcclxuLy8gaW1wb3J0IHtcclxuLy8gICBnZXRGaXJlc3RvcmUsXHJcbi8vICAgY29sbGVjdGlvbixcclxuLy8gICBxdWVyeSxcclxuLy8gICB3aGVyZSxcclxuLy8gICBnZXREb2NzLFxyXG4vLyAgIGRvYyxcclxuLy8gICBnZXREb2MsXHJcbi8vICAgdXBkYXRlRG9jLFxyXG4vLyAgIHNlcnZlclRpbWVzdGFtcCxcclxuLy8gfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG4vLyBpbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAnQC9maXJlYmFzZSc7XHJcbi8vIGltcG9ydCBMYXlvdXQgZnJvbSAnQC9hcHAvQ29tcG9uZW50cy9MYXlvdXQnO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gV2FsbGV0QWRtaW5QYWdlKCkge1xyXG4vLyAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuLy8gICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShmaXJlYmFzZUFwcCk7XHJcblxyXG4vLyAgIGNvbnN0IFthZG1pbiwgc2V0QWRtaW5dID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW2FkbWluQmFsYW5jZSwgc2V0QWRtaW5CYWxhbmNlXSA9IHVzZVN0YXRlKDApO1xyXG5cclxuLy8gICBjb25zdCBbdGFyZ2V0RW1haWwsIHNldFRhcmdldEVtYWlsXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbdGFyZ2V0VWlkLCBzZXRUYXJnZXRVaWRdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFtzdWJhZG1pbkJhbGFuY2UsIHNldFN1YmFkbWluQmFsYW5jZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbYW1vdW50VG9BZGQsIHNldEFtb3VudFRvQWRkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuLy8gICAvLyDinIUgR2V0IGN1cnJlbnQgYWRtaW5cclxuLy8gICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKHVzZXIpID0+IHtcclxuLy8gICAgICAgc2V0QWRtaW4odXNlcik7XHJcbi8vICAgICAgIGlmICh1c2VyKSB7XHJcbi8vICAgICAgICAgY29uc3QgYWRtaW5XYWxsZXRSZWYgPSBkb2MoZGIsICdhZG1pbndhbGxldHMnLCB1c2VyLnVpZCk7XHJcbi8vICAgICAgICAgY29uc3QgYWRtaW5XYWxsZXRTbmFwID0gYXdhaXQgZ2V0RG9jKGFkbWluV2FsbGV0UmVmKTtcclxuLy8gICAgICAgICBpZiAoYWRtaW5XYWxsZXRTbmFwLmV4aXN0cygpKSB7XHJcbi8vICAgICAgICAgICBjb25zdCBkYXRhID0gYWRtaW5XYWxsZXRTbmFwLmRhdGEoKTtcclxuLy8gICAgICAgICAgIHNldEFkbWluQmFsYW5jZShkYXRhLmJhbGFuY2UgPz8gMCk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFtdKTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuLy8gICAgIHNldE1lc3NhZ2UoJycpO1xyXG4vLyAgICAgc2V0VGFyZ2V0VWlkKCcnKTtcclxuLy8gICAgIHNldFN1YmFkbWluQmFsYW5jZShudWxsKTtcclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBxID0gcXVlcnkoXHJcbi8vICAgICAgICAgY29sbGVjdGlvbihkYiwgJ3N1YndhbGxldHMnKSxcclxuLy8gICAgICAgICB3aGVyZSgnZW1haWwnLCAnPT0nLCB0YXJnZXRFbWFpbClcclxuLy8gICAgICAgKTtcclxuLy8gICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcblxyXG4vLyAgICAgICBpZiAoc25hcC5lbXB0eSkge1xyXG4vLyAgICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBTdWJhZG1pbiB3YWxsZXQgbm90IGZvdW5kLicpO1xyXG4vLyAgICAgICAgIHJldHVybjtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgY29uc3Qgd2FsbGV0ID0gc25hcC5kb2NzWzBdLmRhdGEoKTtcclxuLy8gICAgICAgc2V0VGFyZ2V0VWlkKHdhbGxldC51aWQpO1xyXG4vLyAgICAgICBzZXRTdWJhZG1pbkJhbGFuY2Uod2FsbGV0LmJhbGFuY2UgPz8gMCk7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KchSBTdWJhZG1pbiB3YWxsZXQgZm91bmQuJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRXJyb3IgZmV0Y2hpbmcgc3ViYWRtaW4gd2FsbGV0LicpO1xyXG4vLyAgICAgfSBmaW5hbGx5IHtcclxuLy8gICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlQWRkQmFsYW5jZSA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgIGlmICghdGFyZ2V0VWlkIHx8ICFhbW91bnRUb0FkZCkgcmV0dXJuO1xyXG5cclxuLy8gICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoYW1vdW50VG9BZGQpO1xyXG4vLyAgICAgaWYgKGlzTmFOKGFtb3VudCkgfHwgYW1vdW50IDw9IDApIHtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEVudGVyIGEgdmFsaWQgYW1vdW50LicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgaWYgKGFtb3VudCA+IGFkbWluQmFsYW5jZSkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgSW5zdWZmaWNpZW50IGFkbWluIGJhbGFuY2UuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBzdWJSZWYgPSBkb2MoZGIsICdzdWJ3YWxsZXRzJywgdGFyZ2V0VWlkKTtcclxuLy8gICAgICAgY29uc3QgYWRtaW5SZWYgPSBkb2MoZGIsICdhZG1pbndhbGxldHMnLCBhZG1pbi51aWQpO1xyXG5cclxuLy8gICAgICAgLy8g4pyFIFVwZGF0ZSBib3RoIHdhbGxldHNcclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKHN1YlJlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6IChzdWJhZG1pbkJhbGFuY2UgPz8gMCkgKyBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2MoYWRtaW5SZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiBhZG1pbkJhbGFuY2UgLSBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBzZXRTdWJhZG1pbkJhbGFuY2UoKHByZXYpID0+IChwcmV2ID8/IDApICsgYW1vdW50KTtcclxuLy8gICAgICAgc2V0QWRtaW5CYWxhbmNlKChwcmV2KSA9PiBwcmV2IC0gYW1vdW50KTtcclxuLy8gICAgICAgc2V0QW1vdW50VG9BZGQoJycpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgVHJhbnNmZXIgc3VjY2Vzc2Z1bC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBGYWlsZWQgdG8gdXBkYXRlIGJhbGFuY2VzLicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIHJldHVybiAoXHJcbi8vICAgICA8TGF5b3V0PlxyXG4vLyAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHAtOCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XHJcbi8vICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXcteGwgYmctZ3JheS04MDAgcC02IHJvdW5kZWQgc2hhZG93LWxnXCI+XHJcbi8vICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIG1iLTYgdGV4dC1jZW50ZXJcIj5BZG1pbjogRnVuZCBTdWItYWRtaW4gV2FsbGV0PC9oMT5cclxuXHJcbi8vICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi00IHRleHQtZ3JlZW4tNDAwXCI+WW91ciBCYWxhbmNlOiDigrl7YWRtaW5CYWxhbmNlLnRvRml4ZWQoMil9PC9wPlxyXG5cclxuLy8gICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxyXG4vLyAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlN1YmFkbWluIEVtYWlsXCJcclxuLy8gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgIHZhbHVlPXt0YXJnZXRFbWFpbH1cclxuLy8gICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRUYXJnZXRFbWFpbChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAvPlxyXG5cclxuLy8gICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VhcmNofVxyXG4vLyAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cclxuLy8gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXllbGxvdy01MDAgaG92ZXI6YmcteWVsbG93LTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkIG1iLTRcIlxyXG4vLyAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICB7bG9hZGluZyA/ICdTZWFyY2hpbmcuLi4nIDogJ0ZpbmQgU3ViYWRtaW4gV2FsbGV0J31cclxuLy8gICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuLy8gICAgICAgICAgIHttZXNzYWdlICYmIChcclxuLy8gICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBtYi00IHRleHQteWVsbG93LTQwMFwiPnttZXNzYWdlfTwvcD5cclxuLy8gICAgICAgICAgICl9XHJcblxyXG4vLyAgICAgICAgICAge3RhcmdldFVpZCAmJiAoXHJcbi8vICAgICAgICAgICAgIDw+XHJcbi8vICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMlwiPlN1YmFkbWluIEJhbGFuY2U6IOKCuXtzdWJhZG1pbkJhbGFuY2U/LnRvRml4ZWQoMil9PC9wPlxyXG5cclxuLy8gICAgICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBbW91bnQgdG8gdHJhbnNmZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50VG9BZGR9XHJcbi8vICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFtb3VudFRvQWRkKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgICAgICAvPlxyXG5cclxuLy8gICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRCYWxhbmNlfVxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgVHJhbnNmZXIgRnVuZHNcclxuLy8gICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgPC8+XHJcbi8vICAgICAgICAgICApfVxyXG4vLyAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICA8L2Rpdj5cclxuLy8gICAgIDwvTGF5b3V0PlxyXG4vLyAgICk7XHJcbi8vIH1cclxuXHJcblxyXG4vLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBkb2MsXHJcbi8vICAgZ2V0RG9jLFxyXG4vLyAgIHVwZGF0ZURvYyxcclxuLy8gICBzZXJ2ZXJUaW1lc3RhbXAsXHJcbi8vIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuLy8gaW1wb3J0IGZpcmViYXNlQXBwIGZyb20gJ0AvZmlyZWJhc2UnO1xyXG4vLyBpbXBvcnQgTGF5b3V0IGZyb20gJ0AvYXBwL0NvbXBvbmVudHMvTGF5b3V0JztcclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdhbGxldEFkbWluUGFnZSgpIHtcclxuLy8gICBjb25zdCBhdXRoID0gZ2V0QXV0aChmaXJlYmFzZUFwcCk7XHJcbi8vICAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoZmlyZWJhc2VBcHApO1xyXG5cclxuLy8gICBjb25zdCBbY3VycmVudFVzZXIsIHNldEN1cnJlbnRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFtyb2xlLCBzZXRSb2xlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFtjdXJyZW50QmFsYW5jZSwgc2V0Q3VycmVudEJhbGFuY2VdID0gdXNlU3RhdGUoMCk7XHJcblxyXG4vLyAgIGNvbnN0IFt0YXJnZXRFbWFpbCwgc2V0VGFyZ2V0RW1haWxdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFt0YXJnZXRVaWQsIHNldFRhcmdldFVpZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW3RhcmdldEJhbGFuY2UsIHNldFRhcmdldEJhbGFuY2VdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW2Ftb3VudFRvQWRkLCBzZXRBbW91bnRUb0FkZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbi8vICAgLy8g4pyFIEdldCBjdXJyZW50IHVzZXIsIHJvbGUsIGFuZCB3YWxsZXQgYmFsYW5jZVxyXG4vLyAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbi8vICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAodXNlcikgPT4ge1xyXG4vLyAgICAgICBzZXRDdXJyZW50VXNlcih1c2VyKTtcclxuLy8gICAgICAgaWYgKHVzZXIpIHtcclxuLy8gICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyLnVpZCk7XHJcbi8vICAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcclxuLy8gICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHNuYXAuZXhpc3RzKCkgPyBzbmFwLmRhdGEoKSA6IHt9O1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJSb2xlID0gdXNlckRhdGEucm9sZSB8fCAndXNlcic7XHJcbi8vICAgICAgICAgc2V0Um9sZSh1c2VyUm9sZSk7XHJcblxyXG4vLyAgICAgICAgIGNvbnN0IHdhbGxldENvbCA9IHVzZXJSb2xlID09PSAnYWRtaW4nID8gJ2FkbWlud2FsbGV0cycgOiAnc3Vid2FsbGV0cyc7XHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0UmVmID0gZG9jKGRiLCB3YWxsZXRDb2wsIHVzZXIudWlkKTtcclxuLy8gICAgICAgICBjb25zdCB3YWxsZXRTbmFwID0gYXdhaXQgZ2V0RG9jKHdhbGxldFJlZik7XHJcbi8vICAgICAgICAgY29uc3QgYmFsYW5jZSA9IHdhbGxldFNuYXAuZXhpc3RzKCkgPyB3YWxsZXRTbmFwLmRhdGEoKS5iYWxhbmNlID8/IDAgOiAwO1xyXG4vLyAgICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKGJhbGFuY2UpO1xyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFtdKTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuLy8gICAgIHNldE1lc3NhZ2UoJycpO1xyXG4vLyAgICAgc2V0VGFyZ2V0VWlkKCcnKTtcclxuLy8gICAgIHNldFRhcmdldEJhbGFuY2UobnVsbCk7XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgdGFyZ2V0V2FsbGV0Q29sID0gcm9sZSA9PT0gJ2FkbWluJyA/ICdzdWJ3YWxsZXRzJyA6ICdzdWJ3YWxsZXRzJzsgLy8gc3ViYWRtaW5zICYgdXNlcnNcclxuLy8gICAgICAgY29uc3QgcSA9IHF1ZXJ5KFxyXG4vLyAgICAgICAgIGNvbGxlY3Rpb24oZGIsIHRhcmdldFdhbGxldENvbCksXHJcbi8vICAgICAgICAgd2hlcmUoJ2VtYWlsJywgJz09JywgdGFyZ2V0RW1haWwpXHJcbi8vICAgICAgICk7XHJcbi8vICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG5cclxuLy8gICAgICAgaWYgKHNuYXAuZW1wdHkpIHtcclxuLy8gICAgICAgICBzZXRNZXNzYWdlKCfinYwgV2FsbGV0IG5vdCBmb3VuZC4nKTtcclxuLy8gICAgICAgICByZXR1cm47XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIGNvbnN0IHdhbGxldCA9IHNuYXAuZG9jc1swXS5kYXRhKCk7XHJcbi8vICAgICAgIGNvbnN0IHVpZCA9IHdhbGxldC51aWQ7XHJcblxyXG4vLyAgICAgICAvLyDinIUgSWYgc3ViYWRtaW46IG9ubHkgYWxsb3cgZGVwb3NpdGluZyB0byB0aGVpciBvd24gdXNlcnNcclxuLy8gICAgICAgaWYgKHJvbGUgPT09ICdzdWJhZG1pbicgJiYgd2FsbGV0LnN1YkFkbWluSWQgIT09IGN1cnJlbnRVc2VyLnVpZCkge1xyXG4vLyAgICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBZb3UgY2FuIG9ubHkgZnVuZCB1c2VycyBjcmVhdGVkIGJ5IHlvdS4nKTtcclxuLy8gICAgICAgICByZXR1cm47XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIHNldFRhcmdldFVpZCh1aWQpO1xyXG4vLyAgICAgICBzZXRUYXJnZXRCYWxhbmNlKHdhbGxldC5iYWxhbmNlID8/IDApO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgV2FsbGV0IGZvdW5kLicpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEVycm9yIGZldGNoaW5nIHdhbGxldC4nKTtcclxuLy8gICAgIH0gZmluYWxseSB7XHJcbi8vICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIGNvbnN0IGhhbmRsZUFkZEJhbGFuY2UgPSBhc3luYyAoKSA9PiB7XHJcbi8vICAgICBpZiAoIXRhcmdldFVpZCB8fCAhYW1vdW50VG9BZGQpIHJldHVybjtcclxuXHJcbi8vICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudFRvQWRkKTtcclxuLy8gICAgIGlmIChpc05hTihhbW91bnQpIHx8IGFtb3VudCA8PSAwKSB7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBFbnRlciBhIHZhbGlkIGFtb3VudC4nKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGlmIChhbW91bnQgPiBjdXJyZW50QmFsYW5jZSkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgSW5zdWZmaWNpZW50IGJhbGFuY2UuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBmcm9tV2FsbGV0Q29sID0gcm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4vLyAgICAgICBjb25zdCB0b1dhbGxldENvbCA9ICdzdWJ3YWxsZXRzJzsgLy8gQWxsIHJlY2VpdmVycyBhcmUgaW4gc3Vid2FsbGV0c1xyXG5cclxuLy8gICAgICAgY29uc3QgZnJvbVJlZiA9IGRvYyhkYiwgZnJvbVdhbGxldENvbCwgY3VycmVudFVzZXIudWlkKTtcclxuLy8gICAgICAgY29uc3QgdG9SZWYgPSBkb2MoZGIsIHRvV2FsbGV0Q29sLCB0YXJnZXRVaWQpO1xyXG5cclxuLy8gICAgICAgLy8g4pyFIFRyYW5zZmVyIGZ1bmRzXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh0b1JlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6ICh0YXJnZXRCYWxhbmNlID8/IDApICsgYW1vdW50LFxyXG4vLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKGZyb21SZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiBjdXJyZW50QmFsYW5jZSAtIGFtb3VudCxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIHNldFRhcmdldEJhbGFuY2UoKHByZXYpID0+IChwcmV2ID8/IDApICsgYW1vdW50KTtcclxuLy8gICAgICAgc2V0Q3VycmVudEJhbGFuY2UoKHByZXYpID0+IHByZXYgLSBhbW91bnQpO1xyXG4vLyAgICAgICBzZXRBbW91bnRUb0FkZCgnJyk7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KchSBUcmFuc2ZlciBzdWNjZXNzZnVsLicpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEZhaWxlZCB0byB1cGRhdGUgYmFsYW5jZXMuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC04IGZsZXgganVzdGlmeS1jZW50ZXJcIj5cclxuLy8gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy14bCBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPlxyXG4vLyAgICAgICAgICAgICB7cm9sZSA9PT0gJ2FkbWluJyA/ICdBZG1pbjogRnVuZCBTdWJhZG1pbicgOiAnU3ViYWRtaW46IEZ1bmQgVXNlcid9XHJcbi8vICAgICAgICAgICA8L2gxPlxyXG5cclxuLy8gICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTQgdGV4dC1ncmVlbi00MDBcIj5cclxuLy8gICAgICAgICAgICAgWW91ciBCYWxhbmNlOiDigrl7Y3VycmVudEJhbGFuY2UudG9GaXhlZCgyKX1cclxuLy8gICAgICAgICAgIDwvcD5cclxuXHJcbi8vICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuLy8gICAgICAgICAgICAgcGxhY2Vob2xkZXI9e1xyXG4vLyAgICAgICAgICAgICAgIHJvbGUgPT09ICdhZG1pbicgPyAnU3ViYWRtaW4gRW1haWwnIDogJ1VzZXIgRW1haWwnXHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgIHZhbHVlPXt0YXJnZXRFbWFpbH1cclxuLy8gICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRUYXJnZXRFbWFpbChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAvPlxyXG5cclxuLy8gICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VhcmNofVxyXG4vLyAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cclxuLy8gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXllbGxvdy01MDAgaG92ZXI6YmcteWVsbG93LTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkIG1iLTRcIlxyXG4vLyAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICB7bG9hZGluZyA/ICdTZWFyY2hpbmcuLi4nIDogJ0ZpbmQgV2FsbGV0J31cclxuLy8gICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuLy8gICAgICAgICAgIHttZXNzYWdlICYmIChcclxuLy8gICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBtYi00IHRleHQteWVsbG93LTQwMFwiPlxyXG4vLyAgICAgICAgICAgICAgIHttZXNzYWdlfVxyXG4vLyAgICAgICAgICAgICA8L3A+XHJcbi8vICAgICAgICAgICApfVxyXG5cclxuLy8gICAgICAgICAgIHt0YXJnZXRVaWQgJiYgKFxyXG4vLyAgICAgICAgICAgICA8PlxyXG4vLyAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTJcIj5cclxuLy8gICAgICAgICAgICAgICAgIFJlY2lwaWVudCBCYWxhbmNlOiDigrl7dGFyZ2V0QmFsYW5jZT8udG9GaXhlZCgyKX1cclxuLy8gICAgICAgICAgICAgICA8L3A+XHJcblxyXG4vLyAgICAgICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbi8vICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFtb3VudCB0byB0cmFuc2ZlclwiXHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0zIHJvdW5kZWQgYmctZ3JheS03MDAgdGV4dC13aGl0ZSBtYi00XCJcclxuLy8gICAgICAgICAgICAgICAgIHZhbHVlPXthbW91bnRUb0FkZH1cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0QW1vdW50VG9BZGQoZS50YXJnZXQudmFsdWUpfVxyXG4vLyAgICAgICAgICAgICAgIC8+XHJcblxyXG4vLyAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZEJhbGFuY2V9XHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JlZW4tNTAwIGhvdmVyOmJnLWdyZWVuLTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICBUcmFuc2ZlciBGdW5kc1xyXG4vLyAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICA8Lz5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgPC9MYXlvdXQ+XHJcbi8vICAgKTtcclxuLy8gfVxyXG5cclxuXHJcbi8vICd1c2UgY2xpZW50JztcclxuXHJcbi8vIGltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG4vLyBpbXBvcnQgeyBnZXRBdXRoLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcclxuLy8gaW1wb3J0IHtcclxuLy8gICBnZXRGaXJlc3RvcmUsXHJcbi8vICAgY29sbGVjdGlvbixcclxuLy8gICBxdWVyeSxcclxuLy8gICB3aGVyZSxcclxuLy8gICBnZXREb2NzLFxyXG4vLyAgIGRvYyxcclxuLy8gICBnZXREb2MsXHJcbi8vICAgdXBkYXRlRG9jLFxyXG4vLyAgIHNlcnZlclRpbWVzdGFtcCxcclxuLy8gfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG4vLyBpbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAnQC9maXJlYmFzZSc7XHJcbi8vIGltcG9ydCBMYXlvdXQgZnJvbSAnQC9hcHAvQ29tcG9uZW50cy9MYXlvdXQnO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gV2FsbGV0QWRtaW5QYWdlKCkge1xyXG4vLyAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuLy8gICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShmaXJlYmFzZUFwcCk7XHJcblxyXG4vLyAgIGNvbnN0IFtjdXJyZW50VXNlciwgc2V0Q3VycmVudFVzZXJdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW3JvbGUsIHNldFJvbGVdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW3JlcXVlc3RzLCBzZXRSZXF1ZXN0c10gPSB1c2VTdGF0ZShbXSk7XHJcbi8vICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcblxyXG4vLyAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbi8vICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAodXNlcikgPT4ge1xyXG4vLyAgICAgICBpZiAodXNlcikge1xyXG4vLyAgICAgICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG5cclxuLy8gICAgICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyhkb2MoZGIsICd1c2VycycsIHVzZXIudWlkKSk7XHJcbi8vICAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyU25hcC5leGlzdHMoKSA/IHVzZXJTbmFwLmRhdGEoKSA6IHt9O1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJSb2xlID0gdXNlckRhdGEucm9sZSB8fCAndXNlcic7XHJcbi8vICAgICAgICAgc2V0Um9sZSh1c2VyUm9sZSk7XHJcblxyXG4vLyAgICAgICAgIGZldGNoV2l0aGRyYXdSZXF1ZXN0cyh1c2VyLnVpZCwgdXNlclJvbGUpO1xyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcclxuLy8gICB9LCBbXSk7XHJcblxyXG4vLyAgIGNvbnN0IGZldGNoV2l0aGRyYXdSZXF1ZXN0cyA9IGFzeW5jICh1aWQsIHVzZXJSb2xlKSA9PiB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBjb2xSZWYgPSBjb2xsZWN0aW9uKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycpO1xyXG5cclxuLy8gICAgICAgbGV0IHEgPSBudWxsO1xyXG4vLyAgICAgICBpZiAodXNlclJvbGUgPT09ICdhZG1pbicpIHtcclxuLy8gICAgICAgICAvLyBBZG1pbiBzZWVzIHJlcXVlc3RzIGZyb20gc3ViYWRtaW5zXHJcbi8vICAgICAgICAgY29uc3Qgc3ViYWRtaW5TbmFwID0gYXdhaXQgZ2V0RG9jcyhcclxuLy8gICAgICAgICAgIHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICd1c2VycycpLCB3aGVyZSgncm9sZScsICc9PScsICdzdWJhZG1pbicpKVxyXG4vLyAgICAgICAgICk7XHJcbi8vICAgICAgICAgY29uc3Qgc3ViYWRtaW5JZHMgPSBzdWJhZG1pblNuYXAuZG9jcy5tYXAoKGRvYykgPT4gZG9jLmlkKTtcclxuXHJcbi8vICAgICAgICAgcSA9IHF1ZXJ5KGNvbFJlZiwgd2hlcmUoJ3VpZCcsICdpbicsIHN1YmFkbWluSWRzKSk7XHJcbi8vICAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09ICdzdWJhZG1pbicpIHtcclxuLy8gICAgICAgICAvLyBTdWJhZG1pbiBzZWVzIHJlcXVlc3RzIGZyb20gdXNlcnMgdGhleSBjcmVhdGVkXHJcbi8vICAgICAgICAgY29uc3QgdXNlclNuYXAgPSBhd2FpdCBnZXREb2NzKFxyXG4vLyAgICAgICAgICAgcXVlcnkoY29sbGVjdGlvbihkYiwgJ3N1YndhbGxldHMnKSwgd2hlcmUoJ3N1YkFkbWluSWQnLCAnPT0nLCB1aWQpKVxyXG4vLyAgICAgICAgICk7XHJcbi8vICAgICAgICAgY29uc3QgdXNlcklkcyA9IHVzZXJTbmFwLmRvY3MubWFwKChkb2MpID0+IGRvYy5pZCk7XHJcblxyXG4vLyAgICAgICAgIGlmICh1c2VySWRzLmxlbmd0aCA9PT0gMCkge1xyXG4vLyAgICAgICAgICAgc2V0UmVxdWVzdHMoW10pO1xyXG4vLyAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbi8vICAgICAgICAgICByZXR1cm47XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBxID0gcXVlcnkoY29sUmVmLCB3aGVyZSgndWlkJywgJ2luJywgdXNlcklkcykpO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBjb25zdCByZXFTbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuLy8gICAgICAgY29uc3QgZm9ybWF0dGVkID0gcmVxU25hcC5kb2NzLm1hcCgoZG9jKSA9PiAoe1xyXG4vLyAgICAgICAgIGlkOiBkb2MuaWQsXHJcbi8vICAgICAgICAgLi4uZG9jLmRhdGEoKSxcclxuLy8gICAgICAgfSkpO1xyXG5cclxuLy8gICAgICAgc2V0UmVxdWVzdHMoZm9ybWF0dGVkKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdpdGhkcmF3YWwgcmVxdWVzdHM6JywgZXJyb3IpO1xyXG4vLyAgICAgfSBmaW5hbGx5IHtcclxuLy8gICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlQXBwcm92ZSA9IGFzeW5jIChyZXF1ZXN0KSA9PiB7XHJcbi8vICAgICBjb25zdCBjb25maXJtID0gd2luZG93LmNvbmZpcm0oYEFwcHJvdmUgd2l0aGRyYXdhbCBvZiDigrkke3JlcXVlc3QuYW1vdW50fT9gKTtcclxuLy8gICAgIGlmICghY29uZmlybSkgcmV0dXJuO1xyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGNvbnN0IHJlcXVlc3RSZWYgPSBkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgcmVxdWVzdC5pZCk7XHJcblxyXG4vLyAgICAgICAvLyBEZWR1Y3QgZnJvbSB1c2VyJ3Mgd2FsbGV0XHJcbi8vICAgICAgIGNvbnN0IHVzZXJXYWxsZXRSZWYgPSBkb2MoZGIsICdzdWJ3YWxsZXRzJywgcmVxdWVzdC51aWQpO1xyXG4vLyAgICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldERvYyh1c2VyV2FsbGV0UmVmKTtcclxuLy8gICAgICAgY29uc3QgdXNlckJhbCA9IHVzZXJTbmFwLmRhdGEoKS5iYWxhbmNlID8/IDA7XHJcblxyXG4vLyAgICAgICBpZiAodXNlckJhbCA8IHJlcXVlc3QuYW1vdW50KSB7XHJcbi8vICAgICAgICAgYWxlcnQoJ0luc3VmZmljaWVudCB1c2VyIGJhbGFuY2UuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICAvLyBDcmVkaXQgdG8gc3ViYWRtaW4gd2FsbGV0IChpZiBzdWJhZG1pbilcclxuLy8gICAgICAgaWYgKHJvbGUgPT09ICdzdWJhZG1pbicpIHtcclxuLy8gICAgICAgICBjb25zdCBzdWJXYWxsZXRSZWYgPSBkb2MoZGIsICdzdWJ3YWxsZXRzJywgY3VycmVudFVzZXIudWlkKTtcclxuLy8gICAgICAgICBjb25zdCBzdWJTbmFwID0gYXdhaXQgZ2V0RG9jKHN1YldhbGxldFJlZik7XHJcbi8vICAgICAgICAgY29uc3Qgc3ViQmFsID0gc3ViU25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwO1xyXG5cclxuLy8gICAgICAgICBhd2FpdCB1cGRhdGVEb2Moc3ViV2FsbGV0UmVmLCB7XHJcbi8vICAgICAgICAgICBiYWxhbmNlOiBzdWJCYWwgKyByZXF1ZXN0LmFtb3VudCxcclxuLy8gICAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIC8vIFVwZGF0ZSB1c2VyIHdhbGxldCBhbmQgbWFyayByZXF1ZXN0IGFzIGFwcHJvdmVkXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyV2FsbGV0UmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogdXNlckJhbCAtIHJlcXVlc3QuYW1vdW50LFxyXG4vLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKHJlcXVlc3RSZWYsIHtcclxuLy8gICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhbGVydCgnV2l0aGRyYXdhbCBhcHByb3ZlZCEnKTtcclxuLy8gICAgICAgc2V0UmVxdWVzdHMoKHByZXYpID0+XHJcbi8vICAgICAgICAgcHJldi5tYXAoKHIpID0+XHJcbi8vICAgICAgICAgICByLmlkID09PSByZXF1ZXN0LmlkID8geyAuLi5yLCBzdGF0dXM6ICdhcHByb3ZlZCcgfSA6IHJcclxuLy8gICAgICAgICApXHJcbi8vICAgICAgICk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4vLyAgICAgICBhbGVydCgnRXJyb3IgYXBwcm92aW5nIHJlcXVlc3QuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC02XCI+XHJcbi8vICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy00eGwgbXgtYXV0byBiZy1ncmF5LTgwMCByb3VuZGVkLWxnIHAtNiBzaGFkb3dcIj5cclxuLy8gICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNFwiPlxyXG4vLyAgICAgICAgICAgICB7cm9sZSA9PT0gJ2FkbWluJyA/ICdTdWJhZG1pbiBXaXRoZHJhdyBSZXF1ZXN0cycgOiAnVXNlciBXaXRoZHJhdyBSZXF1ZXN0cyd9XHJcbi8vICAgICAgICAgICA8L2gyPlxyXG5cclxuLy8gICAgICAgICAgIHtsb2FkaW5nID8gKFxyXG4vLyAgICAgICAgICAgICA8cD5Mb2FkaW5nIHJlcXVlc3RzLi4uPC9wPlxyXG4vLyAgICAgICAgICAgKSA6IHJlcXVlc3RzLmxlbmd0aCA9PT0gMCA/IChcclxuLy8gICAgICAgICAgICAgPHA+Tm8gd2l0aGRyYXdhbCByZXF1ZXN0cyBmb3VuZC48L3A+XHJcbi8vICAgICAgICAgICApIDogKFxyXG4vLyAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJmbG93LXgtYXV0b1wiPlxyXG4vLyAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IGJvcmRlci1jb2xsYXBzZVwiPlxyXG4vLyAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzTmFtZT1cImJnLWdyYXktNzAwXCI+XHJcbi8vICAgICAgICAgICAgICAgICAgIDx0cj5cclxuLy8gICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yXCI+RW1haWw8L3RoPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTJcIj5BbW91bnQ8L3RoPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTJcIj5NZXRob2Q8L3RoPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTJcIj5EZXRhaWxzPC90aD5cclxuLy8gICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yXCI+U3RhdHVzPC90aD5cclxuLy8gICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yXCI+QWN0aW9uPC90aD5cclxuLy8gICAgICAgICAgICAgICAgICAgPC90cj5cclxuLy8gICAgICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbi8vICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbi8vICAgICAgICAgICAgICAgICAgIHtyZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e3JlcS5pZH0gY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLWdyYXktNjAwXCI+XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicC0yXCI+e3JlcS5lbWFpbH08L3RkPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInAtMlwiPuKCuXtyZXEuYW1vdW50fTwvdGQ+XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicC0yXCI+e3JlcS5tZXRob2R9PC90ZD5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTJcIj57cmVxLm1ldGhvZERldGFpbHN9PC90ZD5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTIgY2FwaXRhbGl6ZVwiPntyZXEuc3RhdHVzfTwvdGQ+XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicC0yXCI+XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXEuc3RhdHVzID09PSAncGVuZGluZycgPyAoXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQXBwcm92ZShyZXEpfVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHJvdW5kZWRcIlxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFwcHJvdmVcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyZWVuLTQwMFwiPuKclO+4jzwvc3Bhbj5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuLy8gICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbi8vICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuLy8gICAgICAgICAgICAgICAgICAgKSl9XHJcbi8vICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4vLyAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbi8vICAgICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICAgKX1cclxuLy8gICAgICAgICA8L2Rpdj5cclxuLy8gICAgICAgPC9kaXY+XHJcbi8vICAgICA8L0xheW91dD5cclxuLy8gICApO1xyXG4vLyB9XHJcblxyXG4vLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBnZXREb2MsXHJcbi8vICAgZG9jLFxyXG4vLyAgIHVwZGF0ZURvYyxcclxuLy8gICBzZXJ2ZXJUaW1lc3RhbXAsXHJcbi8vIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuLy8gaW1wb3J0IGZpcmViYXNlQXBwIGZyb20gJ0AvZmlyZWJhc2UnO1xyXG4vLyBpbXBvcnQgTGF5b3V0IGZyb20gJ0AvYXBwL0NvbXBvbmVudHMvTGF5b3V0JztcclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdhbGxldEFkbWluUGFnZSgpIHtcclxuLy8gICBjb25zdCBhdXRoID0gZ2V0QXV0aChmaXJlYmFzZUFwcCk7XHJcbi8vICAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoZmlyZWJhc2VBcHApO1xyXG5cclxuLy8gICBjb25zdCBbY3VycmVudFVzZXIsIHNldEN1cnJlbnRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFtyb2xlLCBzZXRSb2xlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFtkZXBvc2l0UmVxdWVzdHMsIHNldERlcG9zaXRSZXF1ZXN0c10gPSB1c2VTdGF0ZShbXSk7XHJcbi8vICAgY29uc3QgW2N1cnJlbnRCYWxhbmNlLCBzZXRDdXJyZW50QmFsYW5jZV0gPSB1c2VTdGF0ZSgwKTtcclxuXHJcbi8vICAgdXNlRWZmZWN0KCgpID0+IHtcclxuLy8gICAgIGNvbnN0IHVuc3ViID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jICh1c2VyKSA9PiB7XHJcbi8vICAgICAgIGlmICh1c2VyKSB7XHJcbi8vICAgICAgICAgc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbi8vICAgICAgICAgY29uc3QgdXNlclNuYXAgPSBhd2FpdCBnZXREb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VyLnVpZCkpO1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclNuYXAuZXhpc3RzKCkgPyB1c2VyU25hcC5kYXRhKCkgOiB7fTtcclxuLy8gICAgICAgICBjb25zdCB1c2VyUm9sZSA9IHVzZXJEYXRhLnJvbGUgfHwgJ3VzZXInO1xyXG4vLyAgICAgICAgIHNldFJvbGUodXNlclJvbGUpO1xyXG5cclxuLy8gICAgICAgICBjb25zdCB3YWxsZXRDb2wgPSB1c2VyUm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4vLyAgICAgICAgIGNvbnN0IHdhbGxldFJlZiA9IGRvYyhkYiwgd2FsbGV0Q29sLCB1c2VyLnVpZCk7XHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0U25hcCA9IGF3YWl0IGdldERvYyh3YWxsZXRSZWYpO1xyXG4vLyAgICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKHdhbGxldFNuYXAuZXhpc3RzKCkgPyB3YWxsZXRTbmFwLmRhdGEoKS5iYWxhbmNlID8/IDAgOiAwKTtcclxuXHJcbi8vICAgICAgICAgZmV0Y2hEZXBvc2l0UmVxdWVzdHModXNlci51aWQsIHVzZXJSb2xlKTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgcmV0dXJuICgpID0+IHVuc3ViKCk7XHJcbi8vICAgfSwgW10pO1xyXG5cclxuLy8gICBjb25zdCBmZXRjaERlcG9zaXRSZXF1ZXN0cyA9IGFzeW5jICh1aWQsIHVzZXJSb2xlKSA9PiB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBjb2xSZWYgPSBjb2xsZWN0aW9uKGRiLCAnc3ViZGVwb3NpdFJlcXVlc3RzJyk7XHJcblxyXG4vLyAgICAgICBsZXQgcTtcclxuLy8gICAgICAgaWYgKHVzZXJSb2xlID09PSAnYWRtaW4nKSB7XHJcbi8vICAgICAgICAgcSA9IHF1ZXJ5KGNvbFJlZiwgd2hlcmUoJ3JvbGUnLCAnPT0nLCAnc3ViYWRtaW4nKSk7XHJcbi8vICAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09ICdzdWJhZG1pbicpIHtcclxuLy8gICAgICAgICBjb25zdCB1c2VyV2FsbGV0cyA9IGF3YWl0IGdldERvY3MoXHJcbi8vICAgICAgICAgICBxdWVyeShjb2xsZWN0aW9uKGRiLCAnc3Vid2FsbGV0cycpLCB3aGVyZSgnc3ViQWRtaW5JZCcsICc9PScsIHVpZCkpXHJcbi8vICAgICAgICAgKTtcclxuLy8gICAgICAgICBjb25zdCB1c2VySWRzID0gdXNlcldhbGxldHMuZG9jcy5tYXAoKGRvYykgPT4gZG9jLmlkKTtcclxuLy8gICAgICAgICBpZiAodXNlcklkcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbi8vICAgICAgICAgcSA9IHF1ZXJ5KGNvbFJlZiwgd2hlcmUoJ3VpZCcsICdpbicsIHVzZXJJZHMpKTtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbi8vICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHNuYXAuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbi8vICAgICAgIHNldERlcG9zaXRSZXF1ZXN0cyhmb3JtYXR0ZWQpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZldGNoIGZhaWxlZCcsIGVycik7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlQXBwcm92ZSA9IGFzeW5jIChyZXEpID0+IHtcclxuLy8gICAgIGNvbnN0IGNvbmZpcm0gPSB3aW5kb3cuY29uZmlybShgQXBwcm92ZSDigrkke3JlcS5hbW91bnR9IGRlcG9zaXQgZnJvbSAke3JlcS5lbWFpbH0/YCk7XHJcbi8vICAgICBpZiAoIWNvbmZpcm0pIHJldHVybjtcclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBmcm9tUm9sZSA9IHJlcS5yb2xlO1xyXG4vLyAgICAgICBjb25zdCB0b1VpZCA9IGN1cnJlbnRVc2VyLnVpZDtcclxuXHJcbi8vICAgICAgIGNvbnN0IGZyb21SZWYgPSBkb2MoZGIsICdzdWJ3YWxsZXRzJywgcmVxLnVpZCk7XHJcbi8vICAgICAgIGNvbnN0IHRvQ29sID0gcm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4vLyAgICAgICBjb25zdCB0b1JlZiA9IGRvYyhkYiwgdG9Db2wsIHRvVWlkKTtcclxuXHJcbi8vICAgICAgIGNvbnN0IHRvU25hcCA9IGF3YWl0IGdldERvYyh0b1JlZik7XHJcbi8vICAgICAgIGNvbnN0IHRvQmFsYW5jZSA9IHRvU25hcC5leGlzdHMoKSA/IHRvU25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwIDogMDtcclxuXHJcbi8vICAgICAgIC8vIOKchSBVcGRhdGUgcmVjaXBpZW50IHdhbGxldCAoYWRtaW4gb3Igc3ViYWRtaW4pXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh0b1JlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6IHRvQmFsYW5jZSArIHJlcS5hbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICAvLyDinIUgTWFyayByZXF1ZXN0IGFzIGFwcHJvdmVkXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdWJkZXBvc2l0UmVxdWVzdHMnLCByZXEuaWQpLCB7XHJcbi8vICAgICAgICAgc3RhdHVzOiAnYXBwcm92ZWQnLFxyXG4vLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgYWxlcnQoJ0RlcG9zaXQgYXBwcm92ZWQhJyk7XHJcbi8vICAgICAgIHNldERlcG9zaXRSZXF1ZXN0cygocHJldikgPT5cclxuLy8gICAgICAgICBwcmV2Lm1hcCgocikgPT4gKHIuaWQgPT09IHJlcS5pZCA/IHsgLi4uciwgc3RhdHVzOiAnYXBwcm92ZWQnIH0gOiByKSlcclxuLy8gICAgICAgKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKCdBcHByb3ZhbCBmYWlsZWQnLCBlcnIpO1xyXG4vLyAgICAgICBhbGVydCgnU29tZXRoaW5nIHdlbnQgd3JvbmcuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC02XCI+XHJcbi8vICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy00eGwgbXgtYXV0byBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNFwiPlxyXG4vLyAgICAgICAgICAgICB7cm9sZSA9PT0gJ2FkbWluJyA/ICdTdWJhZG1pbiBEZXBvc2l0IFJlcXVlc3RzJyA6ICdVc2VyIERlcG9zaXQgUmVxdWVzdHMnfVxyXG4vLyAgICAgICAgICAgPC9oMj5cclxuXHJcbi8vICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyZWVuLTQwMCBtYi00XCI+WW91ciBCYWxhbmNlOiDigrl7Y3VycmVudEJhbGFuY2UudG9GaXhlZCgyKX08L3A+XHJcblxyXG4vLyAgICAgICAgICAge2RlcG9zaXRSZXF1ZXN0cy5sZW5ndGggPT09IDAgPyAoXHJcbi8vICAgICAgICAgICAgIDxwPk5vIGRlcG9zaXQgcmVxdWVzdHMgZm91bmQuPC9wPlxyXG4vLyAgICAgICAgICAgKSA6IChcclxuLy8gICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInctZnVsbCBib3JkZXItY29sbGFwc2UgdGV4dC1zbVwiPlxyXG4vLyAgICAgICAgICAgICAgIDx0aGVhZCBjbGFzc05hbWU9XCJiZy1ncmF5LTcwMFwiPlxyXG4vLyAgICAgICAgICAgICAgICAgPHRyPlxyXG4vLyAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yXCI+RW1haWw8L3RoPlxyXG4vLyAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwicC0yXCI+QW1vdW50PC90aD5cclxuLy8gICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMlwiPk1ldGhvZDwvdGg+XHJcbi8vICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTJcIj5EZXRhaWxzPC90aD5cclxuLy8gICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInAtMlwiPlN0YXR1czwvdGg+XHJcbi8vICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJwLTJcIj5BY3Rpb248L3RoPlxyXG4vLyAgICAgICAgICAgICAgICAgPC90cj5cclxuLy8gICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4vLyAgICAgICAgICAgICAgIDx0Ym9keT5cclxuLy8gICAgICAgICAgICAgICAgIHtkZXBvc2l0UmVxdWVzdHMubWFwKChyZXEpID0+IChcclxuLy8gICAgICAgICAgICAgICAgICAgPHRyIGtleT17cmVxLmlkfSBjbGFzc05hbWU9XCJib3JkZXItdCBib3JkZXItZ3JheS02MDBcIj5cclxuLy8gICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicC0yXCI+e3JlcS5lbWFpbH08L3RkPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTJcIj7igrl7cmVxLmFtb3VudH08L3RkPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTJcIj57cmVxLm1ldGhvZH08L3RkPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTJcIj57cmVxLm1ldGhvZERldGFpbHN9PC90ZD5cclxuLy8gICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwicC0yIGNhcGl0YWxpemVcIj57cmVxLnN0YXR1c308L3RkPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJwLTJcIj5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgIHtyZXEuc3RhdHVzID09PSAncGVuZGluZycgPyAoXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVBcHByb3ZlKHJlcSl9XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHJvdW5kZWRcIlxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgQXBwcm92ZVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JlZW4tNDAwXCI+4pyU77iPPC9zcGFuPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuLy8gICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4vLyAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4vLyAgICAgICAgICAgICAgICAgKSl9XHJcbi8vICAgICAgICAgICAgICAgPC90Ym9keT5cclxuLy8gICAgICAgICAgICAgPC90YWJsZT5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgPC9MYXlvdXQ+XHJcbi8vICAgKTtcclxuLy8gfVxyXG5cclxuXHJcblxyXG4vLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBkb2MsXHJcbi8vICAgZ2V0RG9jLFxyXG4vLyAgIHVwZGF0ZURvYyxcclxuLy8gICBzZXJ2ZXJUaW1lc3RhbXAsXHJcbi8vIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuLy8gaW1wb3J0IGZpcmViYXNlQXBwIGZyb20gJ0AvZmlyZWJhc2UnO1xyXG4vLyBpbXBvcnQgTGF5b3V0IGZyb20gJ0AvYXBwL0NvbXBvbmVudHMvTGF5b3V0JztcclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhZ2UoKSB7XHJcbi8vICAgY29uc3QgYXV0aCA9IGdldEF1dGgoZmlyZWJhc2VBcHApO1xyXG4vLyAgIGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGZpcmViYXNlQXBwKTtcclxuXHJcbi8vICAgY29uc3QgW2N1cnJlbnRVc2VyLCBzZXRDdXJyZW50VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbcm9sZSwgc2V0Um9sZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbY3VycmVudEJhbGFuY2UsIHNldEN1cnJlbnRCYWxhbmNlXSA9IHVzZVN0YXRlKDApO1xyXG5cclxuLy8gICBjb25zdCBbdGFyZ2V0RW1haWwsIHNldFRhcmdldEVtYWlsXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbdGFyZ2V0VWlkLCBzZXRUYXJnZXRVaWRdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFt0YXJnZXRCYWxhbmNlLCBzZXRUYXJnZXRCYWxhbmNlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFthbW91bnRUb0FkZCwgc2V0QW1vdW50VG9BZGRdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4vLyAgIGNvbnN0IFt3aXRoZHJhd1JlcXVlc3RzLCBzZXRXaXRoZHJhd1JlcXVlc3RzXSA9IHVzZVN0YXRlKFtdKTtcclxuXHJcbi8vICAgdXNlRWZmZWN0KCgpID0+IHtcclxuLy8gICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jICh1c2VyKSA9PiB7XHJcbi8vICAgICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4vLyAgICAgICBpZiAodXNlcikge1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXIudWlkKTtcclxuLy8gICAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gc25hcC5leGlzdHMoKSA/IHNuYXAuZGF0YSgpIDoge307XHJcbi8vICAgICAgICAgY29uc3QgdXNlclJvbGUgPSB1c2VyRGF0YS5yb2xlIHx8ICd1c2VyJztcclxuLy8gICAgICAgICBzZXRSb2xlKHVzZXJSb2xlKTtcclxuXHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0Q29sID0gdXNlclJvbGUgPT09ICdhZG1pbicgPyAnYWRtaW53YWxsZXRzJyA6ICdzdWJ3YWxsZXRzJztcclxuLy8gICAgICAgICBjb25zdCB3YWxsZXRSZWYgPSBkb2MoZGIsIHdhbGxldENvbCwgdXNlci51aWQpO1xyXG4vLyAgICAgICAgIGNvbnN0IHdhbGxldFNuYXAgPSBhd2FpdCBnZXREb2Mod2FsbGV0UmVmKTtcclxuLy8gICAgICAgICBjb25zdCBiYWxhbmNlID0gd2FsbGV0U25hcC5leGlzdHMoKSA/IHdhbGxldFNuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMCA6IDA7XHJcbi8vICAgICAgICAgc2V0Q3VycmVudEJhbGFuY2UoYmFsYW5jZSk7XHJcblxyXG4vLyAgICAgICAgIGxvYWRXaXRoZHJhd1JlcXVlc3RzKHVzZXIudWlkLCB1c2VyUm9sZSk7XHJcbi8vICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG4vLyAgICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKCk7XHJcbi8vICAgfSwgW10pO1xyXG5cclxuLy8gICBjb25zdCBsb2FkV2l0aGRyYXdSZXF1ZXN0cyA9IGFzeW5jICh1aWQsIHVzZXJSb2xlKSA9PiB7XHJcbi8vICAgICBjb25zdCBmaWVsZCA9IHVzZXJSb2xlID09PSAnYWRtaW4nID8gJ2Zyb21TdWJBZG1pbklkJyA6ICdmcm9tVXNlclN1YkFkbWluSWQnO1xyXG4vLyAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJyksIHdoZXJlKGZpZWxkLCAnPT0nLCB1aWQpKTtcclxuLy8gICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG4vLyAgICAgY29uc3QgcmVzdWx0cyA9IHNuYXAuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbi8vICAgICBzZXRXaXRoZHJhd1JlcXVlc3RzKHJlc3VsdHMpO1xyXG4vLyAgIH07XHJcblxyXG4vLyAgIGNvbnN0IGhhbmRsZVNlYXJjaCA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbi8vICAgICBzZXRNZXNzYWdlKCcnKTtcclxuLy8gICAgIHNldFRhcmdldFVpZCgnJyk7XHJcbi8vICAgICBzZXRUYXJnZXRCYWxhbmNlKG51bGwpO1xyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGNvbnN0IHEgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnc3Vid2FsbGV0cycpLCB3aGVyZSgnZW1haWwnLCAnPT0nLCB0YXJnZXRFbWFpbCkpO1xyXG4vLyAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbi8vICAgICAgIGlmIChzbmFwLmVtcHR5KSB7XHJcbi8vICAgICAgICAgc2V0TWVzc2FnZSgn4p2MIFdhbGxldCBub3QgZm91bmQuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBjb25zdCB3YWxsZXQgPSBzbmFwLmRvY3NbMF0uZGF0YSgpO1xyXG4vLyAgICAgICBjb25zdCB1aWQgPSB3YWxsZXQudWlkO1xyXG5cclxuLy8gICAgICAgaWYgKHJvbGUgPT09ICdzdWJhZG1pbicgJiYgd2FsbGV0LnN1YkFkbWluSWQgIT09IGN1cnJlbnRVc2VyLnVpZCkge1xyXG4vLyAgICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBOb3QgeW91ciB1c2VyLicpO1xyXG4vLyAgICAgICAgIHJldHVybjtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgc2V0VGFyZ2V0VWlkKHVpZCk7XHJcbi8vICAgICAgIHNldFRhcmdldEJhbGFuY2Uod2FsbGV0LmJhbGFuY2UgPz8gMCk7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KchSBXYWxsZXQgZm91bmQuJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRXJyb3Igc2VhcmNoaW5nLicpO1xyXG4vLyAgICAgfSBmaW5hbGx5IHtcclxuLy8gICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlQWRkQmFsYW5jZSA9IGFzeW5jICgpID0+IHtcclxuLy8gICAgIGlmICghdGFyZ2V0VWlkIHx8ICFhbW91bnRUb0FkZCkgcmV0dXJuO1xyXG5cclxuLy8gICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoYW1vdW50VG9BZGQpO1xyXG4vLyAgICAgaWYgKGlzTmFOKGFtb3VudCkgfHwgYW1vdW50IDw9IDApIHtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEludmFsaWQgYW1vdW50LicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgaWYgKGFtb3VudCA+IGN1cnJlbnRCYWxhbmNlKSB7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBJbnN1ZmZpY2llbnQgYmFsYW5jZS4nKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGNvbnN0IGZyb21XYWxsZXRDb2wgPSByb2xlID09PSAnYWRtaW4nID8gJ2FkbWlud2FsbGV0cycgOiAnc3Vid2FsbGV0cyc7XHJcbi8vICAgICAgIGNvbnN0IHRvV2FsbGV0Q29sID0gJ3N1YndhbGxldHMnO1xyXG5cclxuLy8gICAgICAgY29uc3QgZnJvbVJlZiA9IGRvYyhkYiwgZnJvbVdhbGxldENvbCwgY3VycmVudFVzZXIudWlkKTtcclxuLy8gICAgICAgY29uc3QgdG9SZWYgPSBkb2MoZGIsIHRvV2FsbGV0Q29sLCB0YXJnZXRVaWQpO1xyXG5cclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKHRvUmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogKHRhcmdldEJhbGFuY2UgPz8gMCkgKyBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2MoZnJvbVJlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6IGN1cnJlbnRCYWxhbmNlIC0gYW1vdW50LFxyXG4vLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgc2V0VGFyZ2V0QmFsYW5jZSgocHJldikgPT4gKHByZXYgPz8gMCkgKyBhbW91bnQpO1xyXG4vLyAgICAgICBzZXRDdXJyZW50QmFsYW5jZSgocHJldikgPT4gcHJldiAtIGFtb3VudCk7XHJcbi8vICAgICAgIHNldEFtb3VudFRvQWRkKCcnKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4pyFIFRyYW5zZmVyIHN1Y2Nlc3NmdWwuJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgRmFpbGVkIHRvIHRyYW5zZmVyLicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIC8vIGNvbnN0IGhhbmRsZUFjY2VwdFdpdGhkcmF3ID0gYXN5bmMgKHJlcSkgPT4ge1xyXG4vLyAgIC8vICAgY29uc3QgYW1vdW50ID0gcmVxLmFtb3VudDtcclxuLy8gICAvLyAgIGNvbnN0IGZyb21XYWxsZXRDb2wgPSByb2xlID09PSAnYWRtaW4nID8gJ2FkbWlud2FsbGV0cycgOiAnc3Vid2FsbGV0cyc7XHJcbi8vICAgLy8gICBjb25zdCB0b1dhbGxldENvbCA9ICdzdWJ3YWxsZXRzJztcclxuXHJcbi8vICAgLy8gICBjb25zdCB0b1JlZiA9IGRvYyhkYiwgdG9XYWxsZXRDb2wsIHJlcS5mcm9tVWlkKTtcclxuLy8gICAvLyAgIGNvbnN0IGZyb21SZWYgPSBkb2MoZGIsIGZyb21XYWxsZXRDb2wsIGN1cnJlbnRVc2VyLnVpZCk7XHJcblxyXG4vLyAgIC8vICAgY29uc3QgdG9TbmFwID0gYXdhaXQgZ2V0RG9jKHRvUmVmKTtcclxuLy8gICAvLyAgIGNvbnN0IGZyb21TbmFwID0gYXdhaXQgZ2V0RG9jKGZyb21SZWYpO1xyXG5cclxuLy8gICAvLyAgIGlmICghdG9TbmFwLmV4aXN0cygpIHx8ICFmcm9tU25hcC5leGlzdHMoKSkge1xyXG4vLyAgIC8vICAgICBzZXRNZXNzYWdlKCfinYwgV2FsbGV0IG5vdCBmb3VuZC4nKTtcclxuLy8gICAvLyAgICAgcmV0dXJuO1xyXG4vLyAgIC8vICAgfVxyXG5cclxuLy8gICAvLyAgIGNvbnN0IGZyb21CYWxhbmNlID0gZnJvbVNuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMDtcclxuLy8gICAvLyAgIGlmIChmcm9tQmFsYW5jZSA8IGFtb3VudCkge1xyXG4vLyAgIC8vICAgICBzZXRNZXNzYWdlKCfinYwgTm90IGVub3VnaCBiYWxhbmNlLicpO1xyXG4vLyAgIC8vICAgICByZXR1cm47XHJcbi8vICAgLy8gICB9XHJcblxyXG4vLyAgIC8vICAgYXdhaXQgdXBkYXRlRG9jKHRvUmVmLCB7XHJcbi8vICAgLy8gICAgIGJhbGFuY2U6ICh0b1NuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMCkgKyBhbW91bnQsXHJcbi8vICAgLy8gICB9KTtcclxuXHJcbi8vICAgLy8gICBhd2FpdCB1cGRhdGVEb2MoZnJvbVJlZiwge1xyXG4vLyAgIC8vICAgICBiYWxhbmNlOiBmcm9tQmFsYW5jZSAtIGFtb3VudCxcclxuLy8gICAvLyAgIH0pO1xyXG5cclxuLy8gICAvLyAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgcmVxLmlkKSwge1xyXG4vLyAgIC8vICAgICBzdGF0dXM6ICdhY2NlcHRlZCcsXHJcbi8vICAgLy8gICAgIGFwcHJvdmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgIC8vICAgfSk7XHJcblxyXG4vLyAgIC8vICAgc2V0V2l0aGRyYXdSZXF1ZXN0cygocHJldikgPT4gcHJldi5maWx0ZXIoKHIpID0+IHIuaWQgIT09IHJlcS5pZCkpO1xyXG4vLyAgIC8vICAgc2V0TWVzc2FnZSgn4pyFIFdpdGhkcmF3IGFjY2VwdGVkLicpO1xyXG4vLyAgIC8vIH07XHJcbi8vIGNvbnN0IGhhbmRsZUFjY2VwdFdpdGhkcmF3ID0gYXN5bmMgKHdpdGhkcmF3KSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGlmICghd2l0aGRyYXcgfHwgdHlwZW9mIHdpdGhkcmF3ICE9PSAnb2JqZWN0Jykge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKCfinYwgSW52YWxpZCB3aXRoZHJhdyBvYmplY3Q6Jywgd2l0aGRyYXcpO1xyXG4vLyAgICAgICByZXR1cm4gYWxlcnQoJ0ludmFsaWQgcmVxdWVzdC4nKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjb25zdCB7IHVpZCwgYW1vdW50LCBpZCwgZnJvbVN1YkFkbWluSWQgfSA9IHdpdGhkcmF3O1xyXG5cclxuLy8gICAgIGlmICghdWlkIHx8IHR5cGVvZiB1aWQgIT09ICdzdHJpbmcnKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBNaXNzaW5nIG9yIGludmFsaWQgVUlEIGluIHdpdGhkcmF3OicsIHdpdGhkcmF3KTtcclxuLy8gICAgICAgcmV0dXJuIGFsZXJ0KCdXaXRoZHJhdyBVSUQgaXMgbWlzc2luZy4nKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoIWlkKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBNaXNzaW5nIEZpcmVzdG9yZSBkb2N1bWVudCBJRCBvZiB3aXRoZHJhdyByZXF1ZXN0Jyk7XHJcbi8vICAgICAgIHJldHVybiBhbGVydCgnV2l0aGRyYXcgcmVxdWVzdCBJRCBtaXNzaW5nLicpO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIC8vIERlZmluZSByZWZlcmVuY2VzXHJcbi8vICAgICBjb25zdCB1c2VyV2FsbGV0UmVmID0gZG9jKGRiLCAnc3Vid2FsbGV0cycsIHVpZCk7IC8vIHVzZXIgd2FsbGV0XHJcbi8vICAgICBjb25zdCBzdWJBZG1pbldhbGxldFJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCBmcm9tU3ViQWRtaW5JZCk7IC8vIHN1YmFkbWluIHdhbGxldFxyXG4vLyAgICAgY29uc3Qgd2l0aGRyYXdSZWYgPSBkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgaWQpO1xyXG5cclxuLy8gICAgIC8vIEZldGNoIGN1cnJlbnQgYmFsYW5jZXNcclxuLy8gICAgIGNvbnN0IFt1c2VyU25hcCwgc3ViQWRtaW5TbmFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuLy8gICAgICAgZ2V0RG9jKHVzZXJXYWxsZXRSZWYpLFxyXG4vLyAgICAgICBnZXREb2Moc3ViQWRtaW5XYWxsZXRSZWYpLFxyXG4vLyAgICAgXSk7XHJcblxyXG4vLyAgICAgY29uc3QgdXNlckJhbGFuY2UgPSB1c2VyU25hcC5leGlzdHMoKSA/IHVzZXJTbmFwLmRhdGEoKT8uYmFsYW5jZSA/PyAwIDogMDtcclxuLy8gICAgIGNvbnN0IHN1YkFkbWluQmFsYW5jZSA9IHN1YkFkbWluU25hcC5leGlzdHMoKSA/IHN1YkFkbWluU25hcC5kYXRhKCk/LmJhbGFuY2UgPz8gMCA6IDA7XHJcblxyXG4vLyAgICAgaWYgKHN1YkFkbWluQmFsYW5jZSA8IGFtb3VudCkge1xyXG4vLyAgICAgICByZXR1cm4gYWxlcnQoJ1N1YmFkbWluIGhhcyBpbnN1ZmZpY2llbnQgYmFsYW5jZSB0byBhcHByb3ZlIHRoaXMgd2l0aGRyYXdhbC4nKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyDinIUgVXBkYXRlIHVzZXIgd2FsbGV0IChhZGQgZnVuZHMpXHJcbi8vICAgICBhd2FpdCB1cGRhdGVEb2ModXNlcldhbGxldFJlZiwge1xyXG4vLyAgICAgICBiYWxhbmNlOiB1c2VyQmFsYW5jZSArIGFtb3VudCxcclxuLy8gICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgIH0pO1xyXG5cclxuLy8gICAgIC8vIOKchSBEZWR1Y3QgZnJvbSBzdWJhZG1pbiB3YWxsZXRcclxuLy8gICAgIGF3YWl0IHVwZGF0ZURvYyhzdWJBZG1pbldhbGxldFJlZiwge1xyXG4vLyAgICAgICBiYWxhbmNlOiBzdWJBZG1pbkJhbGFuY2UgLSBhbW91bnQsXHJcbi8vICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyDinIUgVXBkYXRlIHdpdGhkcmF3IHJlcXVlc3Qgc3RhdHVzXHJcbi8vICAgICBhd2FpdCB1cGRhdGVEb2Mod2l0aGRyYXdSZWYsIHtcclxuLy8gICAgICAgc3RhdHVzOiAnYXBwcm92ZWQnLFxyXG4vLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgYWxlcnQoJ+KchSBXaXRoZHJhdyBhcHByb3ZlZCBhbmQgZnVuZHMgYWRkZWQgdG8gdXNlciB3YWxsZXQuJyk7XHJcbi8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKCfinYwgaGFuZGxlQWNjZXB0V2l0aGRyYXcgZXJyb3I6JywgZXJyKTtcclxuLy8gICAgIGFsZXJ0KCdTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBhY2NlcHRpbmcgdGhlIHdpdGhkcmF3LicpO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC04XCI+XHJcbi8vICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy14bCBteC1hdXRvIGJnLWdyYXktODAwIHAtNiByb3VuZGVkIHNoYWRvdy1sZ1wiPlxyXG4vLyAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCBtYi02IHRleHQtY2VudGVyXCI+XHJcbi8vICAgICAgICAgICAgIHtyb2xlID09PSAnYWRtaW4nID8gJ0FkbWluOiBGdW5kIFN1YmFkbWluJyA6ICdTdWJhZG1pbjogRnVuZCBVc2VyJ31cclxuLy8gICAgICAgICAgIDwvaDE+XHJcblxyXG4vLyAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItNCB0ZXh0LWdyZWVuLTQwMFwiPllvdXIgQmFsYW5jZTog4oK5e2N1cnJlbnRCYWxhbmNlLnRvRml4ZWQoMil9PC9wPlxyXG5cclxuLy8gICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxyXG4vLyAgICAgICAgICAgICBwbGFjZWhvbGRlcj17cm9sZSA9PT0gJ2FkbWluJyA/ICdTdWJhZG1pbiBFbWFpbCcgOiAnVXNlciBFbWFpbCd9XHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4vLyAgICAgICAgICAgICB2YWx1ZT17dGFyZ2V0RW1haWx9XHJcbi8vICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VGFyZ2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxyXG4vLyAgICAgICAgICAgLz5cclxuXHJcbi8vICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaH1cclxuLy8gICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy15ZWxsb3ctNTAwIGhvdmVyOmJnLXllbGxvdy02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZCBtYi00XCJcclxuLy8gICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAge2xvYWRpbmcgPyAnU2VhcmNoaW5nLi4uJyA6ICdGaW5kIFdhbGxldCd9XHJcbi8vICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbi8vICAgICAgICAgICB7bWVzc2FnZSAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LXNtIG1iLTQgdGV4dC15ZWxsb3ctNDAwXCI+e21lc3NhZ2V9PC9wPn1cclxuXHJcbi8vICAgICAgICAgICB7dGFyZ2V0VWlkICYmIChcclxuLy8gICAgICAgICAgICAgPD5cclxuLy8gICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yXCI+UmVjaXBpZW50IEJhbGFuY2U6IOKCuXt0YXJnZXRCYWxhbmNlPy50b0ZpeGVkKDIpfTwvcD5cclxuLy8gICAgICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBbW91bnQgdG8gdHJhbnNmZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50VG9BZGR9XHJcbi8vICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFtb3VudFRvQWRkKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgICAgICAvPlxyXG4vLyAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZEJhbGFuY2V9XHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JlZW4tNTAwIGhvdmVyOmJnLWdyZWVuLTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICBUcmFuc2ZlciBGdW5kc1xyXG4vLyAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICA8Lz5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcblxyXG4vLyAgICAgICAgIHsvKiBXaXRoZHJhdyBSZXF1ZXN0cyAqL31cclxuLy8gICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5sZW5ndGggPiAwICYmIChcclxuLy8gICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctMnhsIG14LWF1dG8gbXQtMTAgYmctZ3JheS04MDAgcC02IHJvdW5kZWQgc2hhZG93LWxnXCI+XHJcbi8vICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNFwiPlBlbmRpbmcgV2l0aGRyYXcgUmVxdWVzdHM8L2gyPlxyXG4vLyAgICAgICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4vLyAgICAgICAgICAgICAgIDxkaXYga2V5PXtyZXEuaWR9IGNsYXNzTmFtZT1cImJnLWdyYXktNzAwIHAtMyBtYi0zIHJvdW5kZWRcIj5cclxuLy8gICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+RnJvbTo8L3N0cm9uZz4ge3JlcS5mcm9tRW1haWx9PC9wPlxyXG4vLyAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5BbW91bnQ6PC9zdHJvbmc+IOKCuXtyZXEuYW1vdW50fTwvcD5cclxuLy8gICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+TWV0aG9kOjwvc3Ryb25nPiB7cmVxLm1ldGhvZH0gKHtyZXEuZGV0YWlsc30pPC9wPlxyXG4vLyAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcHktMSBweC00IHJvdW5kZWRcIlxyXG4vLyAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVBY2NlcHRXaXRoZHJhdyhyZXEpfVxyXG4vLyAgICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgICBBY2NlcHRcclxuLy8gICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICAgICApKX1cclxuLy8gICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICl9XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgPC9MYXlvdXQ+XHJcbi8vICAgKTtcclxuLy8gfVxyXG5cclxuLy8gJ3VzZSBjbGllbnQnO1xyXG5cclxuLy8gaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbi8vIGltcG9ydCB7IGdldEF1dGgsIG9uQXV0aFN0YXRlQ2hhbmdlZCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xyXG4vLyBpbXBvcnQge1xyXG4vLyAgIGdldEZpcmVzdG9yZSxcclxuLy8gICBjb2xsZWN0aW9uLFxyXG4vLyAgIHF1ZXJ5LFxyXG4vLyAgIHdoZXJlLFxyXG4vLyAgIGdldERvY3MsXHJcbi8vICAgZG9jLFxyXG4vLyAgIGdldERvYyxcclxuLy8gICB1cGRhdGVEb2MsXHJcbi8vICAgc2VydmVyVGltZXN0YW1wLFxyXG4vLyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbi8vIGltcG9ydCBmaXJlYmFzZUFwcCBmcm9tICdAL2ZpcmViYXNlJztcclxuLy8gaW1wb3J0IExheW91dCBmcm9tICdAL2FwcC9Db21wb25lbnRzL0xheW91dCc7XHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYWdlKCkge1xyXG4vLyAgIGNvbnN0IGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuLy8gICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShmaXJlYmFzZUFwcCk7XHJcblxyXG4vLyAgIGNvbnN0IFtjdXJyZW50VXNlciwgc2V0Q3VycmVudFVzZXJdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW3JvbGUsIHNldFJvbGVdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW2N1cnJlbnRCYWxhbmNlLCBzZXRDdXJyZW50QmFsYW5jZV0gPSB1c2VTdGF0ZSgwKTtcclxuXHJcbi8vICAgY29uc3QgW3RhcmdldEVtYWlsLCBzZXRUYXJnZXRFbWFpbF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW3RhcmdldFVpZCwgc2V0VGFyZ2V0VWlkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbdGFyZ2V0QmFsYW5jZSwgc2V0VGFyZ2V0QmFsYW5jZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbYW1vdW50VG9BZGQsIHNldEFtb3VudFRvQWRkXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuLy8gICBjb25zdCBbd2l0aGRyYXdSZXF1ZXN0cywgc2V0V2l0aGRyYXdSZXF1ZXN0c10gPSB1c2VTdGF0ZShbXSk7XHJcblxyXG4vLyAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbi8vICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAodXNlcikgPT4ge1xyXG4vLyAgICAgICBzZXRDdXJyZW50VXNlcih1c2VyKTtcclxuLy8gICAgICAgaWYgKHVzZXIpIHtcclxuLy8gICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyLnVpZCk7XHJcbi8vICAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcclxuLy8gICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHNuYXAuZXhpc3RzKCkgPyBzbmFwLmRhdGEoKSA6IHt9O1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJSb2xlID0gdXNlckRhdGEucm9sZSB8fCAndXNlcic7XHJcbi8vICAgICAgICAgc2V0Um9sZSh1c2VyUm9sZSk7XHJcblxyXG4vLyAgICAgICAgIGNvbnN0IHdhbGxldENvbCA9IHVzZXJSb2xlID09PSAnYWRtaW4nID8gJ2FkbWlud2FsbGV0cycgOiAnc3Vid2FsbGV0cyc7XHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0UmVmID0gZG9jKGRiLCB3YWxsZXRDb2wsIHVzZXIudWlkKTtcclxuLy8gICAgICAgICBjb25zdCB3YWxsZXRTbmFwID0gYXdhaXQgZ2V0RG9jKHdhbGxldFJlZik7XHJcbi8vICAgICAgICAgY29uc3QgYmFsYW5jZSA9IHdhbGxldFNuYXAuZXhpc3RzKCkgPyB3YWxsZXRTbmFwLmRhdGEoKS5iYWxhbmNlID8/IDAgOiAwO1xyXG4vLyAgICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKGJhbGFuY2UpO1xyXG5cclxuLy8gICAgICAgICBsb2FkV2l0aGRyYXdSZXF1ZXN0cyh1c2VyLnVpZCwgdXNlclJvbGUpO1xyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFtdKTtcclxuXHJcbi8vICAgY29uc3QgbG9hZFdpdGhkcmF3UmVxdWVzdHMgPSBhc3luYyAodWlkLCB1c2VyUm9sZSkgPT4ge1xyXG4vLyAgICAgY29uc3QgZmllbGQgPSB1c2VyUm9sZSA9PT0gJ2FkbWluJyA/ICdmcm9tU3ViQWRtaW5JZCcgOiAnZnJvbVVzZXJTdWJBZG1pbklkJztcclxuLy8gICAgIGNvbnN0IHEgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycpLCB3aGVyZShmaWVsZCwgJz09JywgdWlkKSk7XHJcbi8vICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuLy8gICAgIGNvbnN0IHJlc3VsdHMgPSBzbmFwLmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4vLyAgICAgc2V0V2l0aGRyYXdSZXF1ZXN0cyhyZXN1bHRzKTtcclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVTZWFyY2ggPSBhc3luYyAoKSA9PiB7XHJcbi8vICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4vLyAgICAgc2V0TWVzc2FnZSgnJyk7XHJcbi8vICAgICBzZXRUYXJnZXRVaWQoJycpO1xyXG4vLyAgICAgc2V0VGFyZ2V0QmFsYW5jZShudWxsKTtcclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3N1YndhbGxldHMnKSwgd2hlcmUoJ2VtYWlsJywgJz09JywgdGFyZ2V0RW1haWwpKTtcclxuLy8gICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcblxyXG4vLyAgICAgICBpZiAoc25hcC5lbXB0eSkge1xyXG4vLyAgICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBXYWxsZXQgbm90IGZvdW5kLicpO1xyXG4vLyAgICAgICAgIHJldHVybjtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgY29uc3Qgd2FsbGV0ID0gc25hcC5kb2NzWzBdLmRhdGEoKTtcclxuLy8gICAgICAgY29uc3QgdWlkID0gd2FsbGV0LnVpZDtcclxuXHJcbi8vICAgICAgIGlmIChyb2xlID09PSAnc3ViYWRtaW4nICYmIHdhbGxldC5zdWJBZG1pbklkICE9PSBjdXJyZW50VXNlci51aWQpIHtcclxuLy8gICAgICAgICBzZXRNZXNzYWdlKCfinYwgTm90IHlvdXIgdXNlci4nKTtcclxuLy8gICAgICAgICByZXR1cm47XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIHNldFRhcmdldFVpZCh1aWQpO1xyXG4vLyAgICAgICBzZXRUYXJnZXRCYWxhbmNlKHdhbGxldC5iYWxhbmNlID8/IDApO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgV2FsbGV0IGZvdW5kLicpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEVycm9yIHNlYXJjaGluZy4nKTtcclxuLy8gICAgIH0gZmluYWxseSB7XHJcbi8vICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIGNvbnN0IGhhbmRsZUFkZEJhbGFuY2UgPSBhc3luYyAoKSA9PiB7XHJcbi8vICAgICBpZiAoIXRhcmdldFVpZCB8fCAhYW1vdW50VG9BZGQpIHJldHVybjtcclxuXHJcbi8vICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudFRvQWRkKTtcclxuLy8gICAgIGlmIChpc05hTihhbW91bnQpIHx8IGFtb3VudCA8PSAwKSB7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBJbnZhbGlkIGFtb3VudC4nKTtcclxuLy8gICAgICAgcmV0dXJuO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGlmIChhbW91bnQgPiBjdXJyZW50QmFsYW5jZSkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgSW5zdWZmaWNpZW50IGJhbGFuY2UuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICBjb25zdCBmcm9tV2FsbGV0Q29sID0gcm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4vLyAgICAgICBjb25zdCB0b1dhbGxldENvbCA9ICdzdWJ3YWxsZXRzJztcclxuXHJcbi8vICAgICAgIGNvbnN0IGZyb21SZWYgPSBkb2MoZGIsIGZyb21XYWxsZXRDb2wsIGN1cnJlbnRVc2VyLnVpZCk7XHJcbi8vICAgICAgIGNvbnN0IHRvUmVmID0gZG9jKGRiLCB0b1dhbGxldENvbCwgdGFyZ2V0VWlkKTtcclxuXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh0b1JlZiwge1xyXG4vLyAgICAgICAgIGJhbGFuY2U6ICh0YXJnZXRCYWxhbmNlID8/IDApICsgYW1vdW50LFxyXG4vLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgYXdhaXQgdXBkYXRlRG9jKGZyb21SZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiBjdXJyZW50QmFsYW5jZSAtIGFtb3VudCxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIHNldFRhcmdldEJhbGFuY2UoKHByZXYpID0+IChwcmV2ID8/IDApICsgYW1vdW50KTtcclxuLy8gICAgICAgc2V0Q3VycmVudEJhbGFuY2UoKHByZXYpID0+IHByZXYgLSBhbW91bnQpO1xyXG4vLyAgICAgICBzZXRBbW91bnRUb0FkZCgnJyk7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KchSBUcmFuc2ZlciBzdWNjZXNzZnVsLicpO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEZhaWxlZCB0byB0cmFuc2Zlci4nKTtcclxuLy8gICAgIH1cclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVBY2NlcHRXaXRoZHJhdyA9IGFzeW5jICh3aXRoZHJhdykgPT4ge1xyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgaWYgKCF3aXRoZHJhdyB8fCB0eXBlb2Ygd2l0aGRyYXcgIT09ICdvYmplY3QnKSB7XHJcbi8vICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEludmFsaWQgd2l0aGRyYXcgb2JqZWN0OicsIHdpdGhkcmF3KTtcclxuLy8gICAgICAgICByZXR1cm4gYWxlcnQoJ0ludmFsaWQgcmVxdWVzdC4nKTtcclxuLy8gICAgICAgfVxyXG5cclxuLy8gICAgICAgY29uc3QgeyB1aWQsIGFtb3VudCwgaWQsIGZyb21TdWJBZG1pbklkIH0gPSB3aXRoZHJhdztcclxuXHJcbi8vICAgICAgIGlmICghdWlkIHx8IHR5cGVvZiB1aWQgIT09ICdzdHJpbmcnKSB7XHJcbi8vICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIE1pc3Npbmcgb3IgaW52YWxpZCBVSUQgaW4gd2l0aGRyYXc6Jywgd2l0aGRyYXcpO1xyXG4vLyAgICAgICAgIHJldHVybiBhbGVydCgnV2l0aGRyYXcgVUlEIGlzIG1pc3NpbmcuJyk7XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIGlmICghaWQpIHtcclxuLy8gICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgTWlzc2luZyBGaXJlc3RvcmUgZG9jdW1lbnQgSUQgb2Ygd2l0aGRyYXcgcmVxdWVzdCcpO1xyXG4vLyAgICAgICAgIHJldHVybiBhbGVydCgnV2l0aGRyYXcgcmVxdWVzdCBJRCBtaXNzaW5nLicpO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBjb25zdCB1c2VyV2FsbGV0UmVmID0gZG9jKGRiLCAnc3Vid2FsbGV0cycsIHVpZCk7XHJcbi8vICAgICAgIGNvbnN0IHN1YkFkbWluV2FsbGV0UmVmID0gZG9jKGRiLCAnc3Vid2FsbGV0cycsIGZyb21TdWJBZG1pbklkKTtcclxuLy8gICAgICAgY29uc3Qgd2l0aGRyYXdSZWYgPSBkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgaWQpO1xyXG5cclxuLy8gICAgICAgY29uc3QgW3VzZXJTbmFwLCBzdWJBZG1pblNuYXBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4vLyAgICAgICAgIGdldERvYyh1c2VyV2FsbGV0UmVmKSxcclxuLy8gICAgICAgICBnZXREb2Moc3ViQWRtaW5XYWxsZXRSZWYpLFxyXG4vLyAgICAgICBdKTtcclxuXHJcbi8vICAgICAgIGNvbnN0IHVzZXJCYWxhbmNlID0gdXNlclNuYXAuZXhpc3RzKCkgPyB1c2VyU25hcC5kYXRhKCk/LmJhbGFuY2UgPz8gMCA6IDA7XHJcbi8vICAgICAgIGNvbnN0IHN1YkFkbWluQmFsYW5jZSA9IHN1YkFkbWluU25hcC5leGlzdHMoKSA/IHN1YkFkbWluU25hcC5kYXRhKCk/LmJhbGFuY2UgPz8gMCA6IDA7XHJcblxyXG4vLyAgICAgICBpZiAoc3ViQWRtaW5CYWxhbmNlIDwgYW1vdW50KSB7XHJcbi8vICAgICAgICAgcmV0dXJuIGFsZXJ0KCdTdWJhZG1pbiBoYXMgaW5zdWZmaWNpZW50IGJhbGFuY2UgdG8gYXBwcm92ZSB0aGlzIHdpdGhkcmF3YWwuJyk7XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyV2FsbGV0UmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogdXNlckJhbGFuY2UgKyBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2Moc3ViQWRtaW5XYWxsZXRSZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiBzdWJBZG1pbkJhbGFuY2UgLSBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2Mod2l0aGRyYXdSZWYsIHtcclxuLy8gICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBzZXRXaXRoZHJhd1JlcXVlc3RzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigocikgPT4gci5pZCAhPT0gaWQpKTtcclxuLy8gICAgICAgYWxlcnQoJ+KchSBXaXRoZHJhdyBhcHByb3ZlZCBhbmQgZnVuZHMgYWRkZWQgdG8gdXNlciB3YWxsZXQuJyk7XHJcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgICAgY29uc29sZS5lcnJvcign4p2MIGhhbmRsZUFjY2VwdFdpdGhkcmF3IGVycm9yOicsIGVycik7XHJcbi8vICAgICAgIGFsZXJ0KCdTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBhY2NlcHRpbmcgdGhlIHdpdGhkcmF3LicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIHJldHVybiAoXHJcbi8vICAgICA8TGF5b3V0PlxyXG4vLyAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHAtOFwiPlxyXG4vLyAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXcteGwgbXgtYXV0byBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPlxyXG4vLyAgICAgICAgICAgICB7cm9sZSA9PT0gJ2FkbWluJyA/ICdBZG1pbjogRnVuZCBTdWJhZG1pbicgOiAnU3ViYWRtaW46IEZ1bmQgVXNlcid9XHJcbi8vICAgICAgICAgICA8L2gxPlxyXG5cclxuLy8gICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTQgdGV4dC1ncmVlbi00MDBcIj5Zb3VyIEJhbGFuY2U6IOKCuXtjdXJyZW50QmFsYW5jZS50b0ZpeGVkKDIpfTwvcD5cclxuXHJcbi8vICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuLy8gICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3JvbGUgPT09ICdhZG1pbicgPyAnU3ViYWRtaW4gRW1haWwnIDogJ1VzZXIgRW1haWwnfVxyXG4vLyAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0zIHJvdW5kZWQgYmctZ3JheS03MDAgdGV4dC13aGl0ZSBtYi00XCJcclxuLy8gICAgICAgICAgICAgdmFsdWU9e3RhcmdldEVtYWlsfVxyXG4vLyAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFRhcmdldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgIC8+XHJcblxyXG4vLyAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZWFyY2h9XHJcbi8vICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxyXG4vLyAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmcteWVsbG93LTUwMCBob3ZlcjpiZy15ZWxsb3ctNjAwIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0yIHJvdW5kZWQgbWItNFwiXHJcbi8vICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgIHtsb2FkaW5nID8gJ1NlYXJjaGluZy4uLicgOiAnRmluZCBXYWxsZXQnfVxyXG4vLyAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4vLyAgICAgICAgICAge21lc3NhZ2UgJiYgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBtYi00IHRleHQteWVsbG93LTQwMFwiPnttZXNzYWdlfTwvcD59XHJcblxyXG4vLyAgICAgICAgICAge3RhcmdldFVpZCAmJiAoXHJcbi8vICAgICAgICAgICAgIDw+XHJcbi8vICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMlwiPlJlY2lwaWVudCBCYWxhbmNlOiDigrl7dGFyZ2V0QmFsYW5jZT8udG9GaXhlZCgyKX08L3A+XHJcbi8vICAgICAgICAgICAgICAgPGlucHV0XHJcbi8vICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuLy8gICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW1vdW50IHRvIHRyYW5zZmVyXCJcclxuLy8gICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4vLyAgICAgICAgICAgICAgICAgdmFsdWU9e2Ftb3VudFRvQWRkfVxyXG4vLyAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBbW91bnRUb0FkZChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAgICAgLz5cclxuLy8gICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRCYWxhbmNlfVxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgVHJhbnNmZXIgRnVuZHNcclxuLy8gICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgPC8+XHJcbi8vICAgICAgICAgICApfVxyXG4vLyAgICAgICAgIDwvZGl2PlxyXG5cclxuLy8gICAgICAgICB7Lyog4pyFIFdpdGhkcmF3IFJlcXVlc3RzICovfVxyXG4vLyAgICAgICAgIHt3aXRoZHJhd1JlcXVlc3RzLmxlbmd0aCA+IDAgJiYgKFxyXG4vLyAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0byBtdC0xMCBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1zZW1pYm9sZCBtYi00XCI+UGVuZGluZyBXaXRoZHJhdyBSZXF1ZXN0czwvaDI+XHJcbi8vICAgICAgICAgICAgIHt3aXRoZHJhd1JlcXVlc3RzLm1hcCgocmVxKSA9PiAoXHJcbi8vICAgICAgICAgICAgICAgPGRpdiBrZXk9e3JlcS5pZH0gY2xhc3NOYW1lPVwiYmctZ3JheS03MDAgcC0zIG1iLTMgcm91bmRlZFwiPlxyXG4vLyAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Vc2VyOjwvc3Ryb25nPiB7cmVxLmVtYWlsfTwvcD5cclxuLy8gICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+QW1vdW50Ojwvc3Ryb25nPiDigrl7cmVxLmFtb3VudH08L3A+XHJcbi8vICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPk1ldGhvZDo8L3N0cm9uZz4ge3JlcS5tZXRob2R9ICh7cmVxLnBheW1lbnRJZH0pPC9wPlxyXG4vLyAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5SZXF1ZXN0ZWQ6PC9zdHJvbmc+IHtyZXEuY3JlYXRlZEF0Py5zZWNvbmRzID8gbmV3IERhdGUocmVxLmNyZWF0ZWRBdC5zZWNvbmRzICogMTAwMCkudG9Mb2NhbGVTdHJpbmcoKSA6ICdOL0EnfTwvcD5cclxuLy8gICAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXQtMiBiZy1ibHVlLTUwMCBob3ZlcjpiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHB5LTEgcHgtNCByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQWNjZXB0V2l0aGRyYXcocmVxKX1cclxuLy8gICAgICAgICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAgICAgICAgQWNjZXB0XHJcbi8vICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgICA8L2Rpdj5cclxuLy8gICAgICAgICAgICAgKSl9XHJcbi8vICAgICAgICAgICA8L2Rpdj5cclxuLy8gICAgICAgICApfVxyXG4vLyAgICAgICA8L2Rpdj5cclxuLy8gICAgIDwvTGF5b3V0PlxyXG4vLyAgICk7XHJcbi8vIH1cclxuXHJcbi8vICd1c2UgY2xpZW50JztcclxuXHJcbi8vIGltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG4vLyBpbXBvcnQgeyBnZXRBdXRoLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcclxuLy8gaW1wb3J0IHtcclxuLy8gICBnZXRGaXJlc3RvcmUsXHJcbi8vICAgY29sbGVjdGlvbixcclxuLy8gICBxdWVyeSxcclxuLy8gICB3aGVyZSxcclxuLy8gICBnZXREb2NzLFxyXG4vLyAgIGRvYyxcclxuLy8gICBnZXREb2MsXHJcbi8vICAgdXBkYXRlRG9jLFxyXG4vLyAgIHNlcnZlclRpbWVzdGFtcCxcclxuLy8gfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG4vLyBpbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAnQC9maXJlYmFzZSc7XHJcbi8vIGltcG9ydCBMYXlvdXQgZnJvbSAnQC9hcHAvQ29tcG9uZW50cy9MYXlvdXQnO1xyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZSgpIHtcclxuLy8gICBjb25zdCBhdXRoID0gZ2V0QXV0aChmaXJlYmFzZUFwcCk7XHJcbi8vICAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoZmlyZWJhc2VBcHApO1xyXG5cclxuLy8gICBjb25zdCBbY3VycmVudFVzZXIsIHNldEN1cnJlbnRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFtyb2xlLCBzZXRSb2xlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFtjdXJyZW50QmFsYW5jZSwgc2V0Q3VycmVudEJhbGFuY2VdID0gdXNlU3RhdGUoMCk7XHJcblxyXG4vLyAgIGNvbnN0IFt0YXJnZXRFbWFpbCwgc2V0VGFyZ2V0RW1haWxdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFt0YXJnZXRVaWQsIHNldFRhcmdldFVpZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW3RhcmdldEJhbGFuY2UsIHNldFRhcmdldEJhbGFuY2VdID0gdXNlU3RhdGUobnVsbCk7XHJcbi8vICAgY29uc3QgW2Ftb3VudFRvQWRkLCBzZXRBbW91bnRUb0FkZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbi8vICAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbi8vICAgY29uc3QgW3dpdGhkcmF3UmVxdWVzdHMsIHNldFdpdGhkcmF3UmVxdWVzdHNdID0gdXNlU3RhdGUoW10pO1xyXG5cclxuLy8gICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4vLyAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKHVzZXIpID0+IHtcclxuLy8gICAgICAgc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbi8vICAgICAgIGlmICh1c2VyKSB7XHJcbi8vICAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlci51aWQpO1xyXG4vLyAgICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbi8vICAgICAgICAgY29uc3QgdXNlckRhdGEgPSBzbmFwLmV4aXN0cygpID8gc25hcC5kYXRhKCkgOiB7fTtcclxuLy8gICAgICAgICBjb25zdCB1c2VyUm9sZSA9IHVzZXJEYXRhLnJvbGUgfHwgJ3VzZXInO1xyXG4vLyAgICAgICAgIHNldFJvbGUodXNlclJvbGUpO1xyXG5cclxuLy8gICAgICAgICBjb25zdCB3YWxsZXRDb2wgPSB1c2VyUm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4vLyAgICAgICAgIGNvbnN0IHdhbGxldFJlZiA9IGRvYyhkYiwgd2FsbGV0Q29sLCB1c2VyLnVpZCk7XHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0U25hcCA9IGF3YWl0IGdldERvYyh3YWxsZXRSZWYpO1xyXG4vLyAgICAgICAgIGNvbnN0IGJhbGFuY2UgPSB3YWxsZXRTbmFwLmV4aXN0cygpID8gd2FsbGV0U25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwIDogMDtcclxuLy8gICAgICAgICBzZXRDdXJyZW50QmFsYW5jZShiYWxhbmNlKTtcclxuXHJcbi8vICAgICAgICAgbG9hZFdpdGhkcmF3UmVxdWVzdHModXNlci51aWQsIHVzZXJSb2xlKTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfSk7XHJcbi8vICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcclxuLy8gICB9LCBbXSk7XHJcblxyXG4vLyAgIGNvbnN0IGxvYWRXaXRoZHJhd1JlcXVlc3RzID0gYXN5bmMgKHVpZCwgdXNlclJvbGUpID0+IHtcclxuLy8gICAgIGNvbnN0IGZpZWxkID0gdXNlclJvbGUgPT09ICdhZG1pbicgPyAnZnJvbVN1YkFkbWluSWQnIDogJ2Zyb21Vc2VyU3ViQWRtaW5JZCc7XHJcbi8vICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3N1YndpdGhkcmF3UmVxdWVzdHMnKSwgd2hlcmUoZmllbGQsICc9PScsIHVpZCkpO1xyXG4vLyAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbi8vICAgICBjb25zdCByZXN1bHRzID0gc25hcC5kb2NzLm1hcCgoZG9jKSA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuLy8gICAgIHNldFdpdGhkcmF3UmVxdWVzdHMocmVzdWx0cyk7XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuLy8gICAgIHNldE1lc3NhZ2UoJycpO1xyXG4vLyAgICAgc2V0VGFyZ2V0VWlkKCcnKTtcclxuLy8gICAgIHNldFRhcmdldEJhbGFuY2UobnVsbCk7XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdzdWJ3YWxsZXRzJyksIHdoZXJlKCdlbWFpbCcsICc9PScsIHRhcmdldEVtYWlsKSk7XHJcbi8vICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG5cclxuLy8gICAgICAgaWYgKHNuYXAuZW1wdHkpIHtcclxuLy8gICAgICAgICBzZXRNZXNzYWdlKCfinYwgV2FsbGV0IG5vdCBmb3VuZC4nKTtcclxuLy8gICAgICAgICByZXR1cm47XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIGNvbnN0IHdhbGxldCA9IHNuYXAuZG9jc1swXS5kYXRhKCk7XHJcbi8vICAgICAgIGNvbnN0IHVpZCA9IHdhbGxldC51aWQ7XHJcblxyXG4vLyAgICAgICBpZiAocm9sZSA9PT0gJ3N1YmFkbWluJyAmJiB3YWxsZXQuc3ViQWRtaW5JZCAhPT0gY3VycmVudFVzZXIudWlkKSB7XHJcbi8vICAgICAgICAgc2V0TWVzc2FnZSgn4p2MIE5vdCB5b3VyIHVzZXIuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBzZXRUYXJnZXRVaWQodWlkKTtcclxuLy8gICAgICAgc2V0VGFyZ2V0QmFsYW5jZSh3YWxsZXQuYmFsYW5jZSA/PyAwKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4pyFIFdhbGxldCBmb3VuZC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBFcnJvciBzZWFyY2hpbmcuJyk7XHJcbi8vICAgICB9IGZpbmFsbHkge1xyXG4vLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuLy8gICAgIH1cclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVBZGRCYWxhbmNlID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgaWYgKCF0YXJnZXRVaWQgfHwgIWFtb3VudFRvQWRkKSByZXR1cm47XHJcblxyXG4vLyAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRUb0FkZCk7XHJcbi8vICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgSW52YWxpZCBhbW91bnQuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoYW1vdW50ID4gY3VycmVudEJhbGFuY2UpIHtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEluc3VmZmljaWVudCBiYWxhbmNlLicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgZnJvbVdhbGxldENvbCA9IHJvbGUgPT09ICdhZG1pbicgPyAnYWRtaW53YWxsZXRzJyA6ICdzdWJ3YWxsZXRzJztcclxuLy8gICAgICAgY29uc3QgdG9XYWxsZXRDb2wgPSAnc3Vid2FsbGV0cyc7XHJcblxyXG4vLyAgICAgICBjb25zdCBmcm9tUmVmID0gZG9jKGRiLCBmcm9tV2FsbGV0Q29sLCBjdXJyZW50VXNlci51aWQpO1xyXG4vLyAgICAgICBjb25zdCB0b1JlZiA9IGRvYyhkYiwgdG9XYWxsZXRDb2wsIHRhcmdldFVpZCk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2ModG9SZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiAodGFyZ2V0QmFsYW5jZSA/PyAwKSArIGFtb3VudCxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyhmcm9tUmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogY3VycmVudEJhbGFuY2UgLSBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBzZXRUYXJnZXRCYWxhbmNlKChwcmV2KSA9PiAocHJldiA/PyAwKSArIGFtb3VudCk7XHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKChwcmV2KSA9PiBwcmV2IC0gYW1vdW50KTtcclxuLy8gICAgICAgc2V0QW1vdW50VG9BZGQoJycpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgVHJhbnNmZXIgc3VjY2Vzc2Z1bC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBGYWlsZWQgdG8gdHJhbnNmZXIuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlQWNjZXB0V2l0aGRyYXcgPSBhc3luYyAod2l0aGRyYXcpID0+IHtcclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgIGlmICghd2l0aGRyYXcgfHwgdHlwZW9mIHdpdGhkcmF3ICE9PSAnb2JqZWN0JykgcmV0dXJuIGFsZXJ0KCdJbnZhbGlkIHJlcXVlc3QuJyk7XHJcblxyXG4vLyAgICAgICBjb25zdCB7IHVpZCwgYW1vdW50LCBpZCwgZnJvbVN1YkFkbWluSWQgfSA9IHdpdGhkcmF3O1xyXG4vLyAgICAgICBpZiAoIXVpZCB8fCAhaWQgfHwgIWZyb21TdWJBZG1pbklkKSByZXR1cm4gYWxlcnQoJ01pc3NpbmcgZGF0YSBpbiByZXF1ZXN0LicpO1xyXG5cclxuLy8gICAgICAgY29uc3QgdXNlcldhbGxldFJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCB1aWQpO1xyXG4vLyAgICAgICBjb25zdCBzdWJBZG1pbldhbGxldFJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCBmcm9tU3ViQWRtaW5JZCk7XHJcbi8vICAgICAgIGNvbnN0IHdpdGhkcmF3UmVmID0gZG9jKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycsIGlkKTtcclxuXHJcbi8vICAgICAgIGNvbnN0IFt1c2VyU25hcCwgc3ViQWRtaW5TbmFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuLy8gICAgICAgICBnZXREb2ModXNlcldhbGxldFJlZiksXHJcbi8vICAgICAgICAgZ2V0RG9jKHN1YkFkbWluV2FsbGV0UmVmKSxcclxuLy8gICAgICAgXSk7XHJcblxyXG4vLyAgICAgICBjb25zdCB1c2VyQmFsYW5jZSA9IHVzZXJTbmFwLmV4aXN0cygpID8gdXNlclNuYXAuZGF0YSgpPy5iYWxhbmNlID8/IDAgOiAwO1xyXG4vLyAgICAgICBjb25zdCBzdWJBZG1pbkJhbGFuY2UgPSBzdWJBZG1pblNuYXAuZXhpc3RzKCkgPyBzdWJBZG1pblNuYXAuZGF0YSgpPy5iYWxhbmNlID8/IDAgOiAwO1xyXG5cclxuLy8gICAgICAgaWYgKHN1YkFkbWluQmFsYW5jZSA8IGFtb3VudCkgcmV0dXJuIGFsZXJ0KCdJbnN1ZmZpY2llbnQgc3ViYWRtaW4gYmFsYW5jZS4nKTtcclxuXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyV2FsbGV0UmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogdXNlckJhbGFuY2UgKyBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2Moc3ViQWRtaW5XYWxsZXRSZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiBzdWJBZG1pbkJhbGFuY2UgLSBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2Mod2l0aGRyYXdSZWYsIHtcclxuLy8gICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBzZXRXaXRoZHJhd1JlcXVlc3RzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigocikgPT4gci5pZCAhPT0gaWQpKTtcclxuLy8gICAgICAgYWxlcnQoJ+KchSBXaXRoZHJhdyBhcHByb3ZlZC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKCfinYwgV2l0aGRyYXcgYXBwcm92YWwgZXJyb3I6JywgZXJyKTtcclxuLy8gICAgICAgYWxlcnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nLicpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH07XHJcblxyXG4vLyAgIHJldHVybiAoXHJcbi8vICAgICA8TGF5b3V0PlxyXG4vLyAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHAtOFwiPlxyXG4vLyAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXcteGwgbXgtYXV0byBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuLy8gICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPlxyXG4vLyAgICAgICAgICAgICB7cm9sZSA9PT0gJ2FkbWluJyA/ICdBZG1pbjogRnVuZCBTdWJhZG1pbicgOiAnU3ViYWRtaW46IEZ1bmQgVXNlcid9XHJcbi8vICAgICAgICAgICA8L2gxPlxyXG5cclxuLy8gICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTQgdGV4dC1ncmVlbi00MDBcIj5Zb3VyIEJhbGFuY2U6IOKCuXtjdXJyZW50QmFsYW5jZS50b0ZpeGVkKDIpfTwvcD5cclxuXHJcbi8vICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuLy8gICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3JvbGUgPT09ICdhZG1pbicgPyAnU3ViYWRtaW4gRW1haWwnIDogJ1VzZXIgRW1haWwnfVxyXG4vLyAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0zIHJvdW5kZWQgYmctZ3JheS03MDAgdGV4dC13aGl0ZSBtYi00XCJcclxuLy8gICAgICAgICAgICAgdmFsdWU9e3RhcmdldEVtYWlsfVxyXG4vLyAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFRhcmdldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgIC8+XHJcblxyXG4vLyAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZWFyY2h9XHJcbi8vICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxyXG4vLyAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmcteWVsbG93LTUwMCBob3ZlcjpiZy15ZWxsb3ctNjAwIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0yIHJvdW5kZWQgbWItNFwiXHJcbi8vICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgIHtsb2FkaW5nID8gJ1NlYXJjaGluZy4uLicgOiAnRmluZCBXYWxsZXQnfVxyXG4vLyAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4vLyAgICAgICAgICAge21lc3NhZ2UgJiYgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBtYi00IHRleHQteWVsbG93LTQwMFwiPnttZXNzYWdlfTwvcD59XHJcblxyXG4vLyAgICAgICAgICAge3RhcmdldFVpZCAmJiAoXHJcbi8vICAgICAgICAgICAgIDw+XHJcbi8vICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMlwiPlJlY2lwaWVudCBCYWxhbmNlOiDigrl7dGFyZ2V0QmFsYW5jZT8udG9GaXhlZCgyKX08L3A+XHJcbi8vICAgICAgICAgICAgICAgPGlucHV0XHJcbi8vICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuLy8gICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW1vdW50IHRvIHRyYW5zZmVyXCJcclxuLy8gICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4vLyAgICAgICAgICAgICAgICAgdmFsdWU9e2Ftb3VudFRvQWRkfVxyXG4vLyAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBbW91bnRUb0FkZChlLnRhcmdldC52YWx1ZSl9XHJcbi8vICAgICAgICAgICAgICAgLz5cclxuLy8gICAgICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRCYWxhbmNlfVxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgVHJhbnNmZXIgRnVuZHNcclxuLy8gICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuLy8gICAgICAgICAgICAgPC8+XHJcbi8vICAgICAgICAgICApfVxyXG4vLyAgICAgICAgIDwvZGl2PlxyXG5cclxuLy8gICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5sZW5ndGggPiAwICYmIChcclxuLy8gICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctMnhsIG14LWF1dG8gbXQtMTAgYmctZ3JheS04MDAgcC02IHJvdW5kZWQgc2hhZG93LWxnXCI+XHJcbi8vICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNFwiPlBlbmRpbmcgV2l0aGRyYXcgUmVxdWVzdHM8L2gyPlxyXG4vLyAgICAgICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4vLyAgICAgICAgICAgICAgIDxkaXYga2V5PXtyZXEuaWR9IGNsYXNzTmFtZT1cImJnLWdyYXktNzAwIHAtMyBtYi0zIHJvdW5kZWRcIj5cclxuLy8gICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+VXNlcjo8L3N0cm9uZz4ge3JlcS5lbWFpbH08L3A+XHJcbi8vICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkFtb3VudDo8L3N0cm9uZz4g4oK5e3JlcS5hbW91bnR9PC9wPlxyXG4vLyAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5NZXRob2Q6PC9zdHJvbmc+IHtyZXEubWV0aG9kfSAoe3JlcS5wYXltZW50SWR9KTwvcD5cclxuLy8gICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+VGltZTo8L3N0cm9uZz4ge3JlcS5jcmVhdGVkQXQ/LnNlY29uZHMgPyBuZXcgRGF0ZShyZXEuY3JlYXRlZEF0LnNlY29uZHMgKiAxMDAwKS50b0xvY2FsZVN0cmluZygpIDogJ04vQSd9PC9wPlxyXG4vLyAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4vLyAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcHktMSBweC00IHJvdW5kZWRcIlxyXG4vLyAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVBY2NlcHRXaXRoZHJhdyhyZXEpfVxyXG4vLyAgICAgICAgICAgICAgICAgPlxyXG4vLyAgICAgICAgICAgICAgICAgICBBY2NlcHRcclxuLy8gICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICAgICApKX1cclxuLy8gICAgICAgICAgIDwvZGl2PlxyXG4vLyAgICAgICAgICl9XHJcbi8vICAgICAgIDwvZGl2PlxyXG4vLyAgICAgPC9MYXlvdXQ+XHJcbi8vICAgKTtcclxuLy8gfVxyXG5cclxuXHJcblxyXG4vLyAndXNlIGNsaWVudCc7XHJcblxyXG4vLyBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuLy8gaW1wb3J0IHsgZ2V0QXV0aCwgb25BdXRoU3RhdGVDaGFuZ2VkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0RmlyZXN0b3JlLFxyXG4vLyAgIGNvbGxlY3Rpb24sXHJcbi8vICAgcXVlcnksXHJcbi8vICAgd2hlcmUsXHJcbi8vICAgZ2V0RG9jcyxcclxuLy8gICBkb2MsXHJcbi8vICAgZ2V0RG9jLFxyXG4vLyAgIHVwZGF0ZURvYyxcclxuLy8gICBzZXJ2ZXJUaW1lc3RhbXAsXHJcbi8vIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuLy8gaW1wb3J0IGZpcmViYXNlQXBwIGZyb20gJ0AvZmlyZWJhc2UnO1xyXG4vLyBpbXBvcnQgTGF5b3V0IGZyb20gJ0AvYXBwL0NvbXBvbmVudHMvTGF5b3V0JztcclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhZ2UoKSB7XHJcbi8vICAgY29uc3QgYXV0aCA9IGdldEF1dGgoZmlyZWJhc2VBcHApO1xyXG4vLyAgIGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGZpcmViYXNlQXBwKTtcclxuXHJcbi8vICAgY29uc3QgW2N1cnJlbnRVc2VyLCBzZXRDdXJyZW50VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbcm9sZSwgc2V0Um9sZV0gPSB1c2VTdGF0ZShudWxsKTtcclxuLy8gICBjb25zdCBbY3VycmVudEJhbGFuY2UsIHNldEN1cnJlbnRCYWxhbmNlXSA9IHVzZVN0YXRlKDApO1xyXG5cclxuLy8gICBjb25zdCBbdGFyZ2V0RW1haWwsIHNldFRhcmdldEVtYWlsXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbdGFyZ2V0VWlkLCBzZXRUYXJnZXRVaWRdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFt0YXJnZXRCYWxhbmNlLCBzZXRUYXJnZXRCYWxhbmNlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4vLyAgIGNvbnN0IFthbW91bnRUb0FkZCwgc2V0QW1vdW50VG9BZGRdID0gdXNlU3RhdGUoJycpO1xyXG4vLyAgIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcclxuLy8gICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4vLyAgIGNvbnN0IFt3aXRoZHJhd1JlcXVlc3RzLCBzZXRXaXRoZHJhd1JlcXVlc3RzXSA9IHVzZVN0YXRlKFtdKTtcclxuXHJcbi8vICAgdXNlRWZmZWN0KCgpID0+IHtcclxuLy8gICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jICh1c2VyKSA9PiB7XHJcbi8vICAgICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4vLyAgICAgICBpZiAodXNlcikge1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXIudWlkKTtcclxuLy8gICAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gc25hcC5leGlzdHMoKSA/IHNuYXAuZGF0YSgpIDoge307XHJcbi8vICAgICAgICAgY29uc3QgdXNlclJvbGUgPSB1c2VyRGF0YS5yb2xlIHx8ICd1c2VyJztcclxuLy8gICAgICAgICBzZXRSb2xlKHVzZXJSb2xlKTtcclxuXHJcbi8vICAgICAgICAgY29uc3Qgd2FsbGV0Q29sID0gdXNlclJvbGUgPT09ICdhZG1pbicgPyAnYWRtaW53YWxsZXRzJyA6ICdzdWJ3YWxsZXRzJztcclxuLy8gICAgICAgICBjb25zdCB3YWxsZXRSZWYgPSBkb2MoZGIsIHdhbGxldENvbCwgdXNlci51aWQpO1xyXG4vLyAgICAgICAgIGNvbnN0IHdhbGxldFNuYXAgPSBhd2FpdCBnZXREb2Mod2FsbGV0UmVmKTtcclxuLy8gICAgICAgICBjb25zdCBiYWxhbmNlID0gd2FsbGV0U25hcC5leGlzdHMoKSA/IHdhbGxldFNuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMCA6IDA7XHJcbi8vICAgICAgICAgc2V0Q3VycmVudEJhbGFuY2UoYmFsYW5jZSk7XHJcblxyXG4vLyAgICAgICAgIGxvYWRXaXRoZHJhd1JlcXVlc3RzKHVzZXIudWlkKTtcclxuLy8gICAgICAgICAvLyBsb2FkV2l0aGRyYXdSZXF1ZXN0cyh1c2VyLnVpZCwgdXNlclJvbGUpO1xyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xyXG4vLyAgIH0sIFtdKTtcclxuXHJcbi8vICAgLy8gY29uc3QgbG9hZFdpdGhkcmF3UmVxdWVzdHMgPSBhc3luYyAodWlkKSA9PiB7XHJcbi8vICAgLy8gICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3N1YndpdGhkcmF3UmVxdWVzdHMnKSwgd2hlcmUoJ2Zyb21TdWJBZG1pbklkJywgJz09JywgdWlkKSk7XHJcbi8vICAgLy8gICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuLy8gICAvLyAgIGNvbnN0IHJlc3VsdHMgPSBzbmFwLmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xyXG4vLyAgIC8vICAgc2V0V2l0aGRyYXdSZXF1ZXN0cyhyZXN1bHRzKTtcclxuLy8gICAvLyB9O1xyXG4vLyAgIGNvbnN0IGxvYWRXaXRoZHJhd1JlcXVlc3RzID0gYXN5bmMgKHVpZCwgcm9sZSkgPT4ge1xyXG4vLyAgIGxldCBxO1xyXG5cclxuLy8gICBpZiAocm9sZSA9PT0gJ2FkbWluJykge1xyXG4vLyAgICAgLy8gQWRtaW4gc2VlcyB3aXRoZHJhd3MgcmVxdWVzdGVkIGJ5IHN1YmFkbWluc1xyXG4vLyAgICAgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJyksIHdoZXJlKCdmcm9tU3ViQWRtaW5JZCcsICc9PScsIHVpZCkpO1xyXG4vLyAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ3N1YmFkbWluJykge1xyXG4vLyAgICAgLy8gU3ViYWRtaW4gc2VlcyB3aXRoZHJhd3MgcmVxdWVzdGVkIGJ5IHRoZWlyIHVzZXJzXHJcbi8vICAgICBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3N1YndpdGhkcmF3UmVxdWVzdHMnKSwgd2hlcmUoJ2Zyb21Vc2VyU3ViQWRtaW5JZCcsICc9PScsIHVpZCkpO1xyXG4vLyAgIH0gZWxzZSB7XHJcbi8vICAgICByZXR1cm47IC8vIERvIG5vdGhpbmcgZm9yIG5vcm1hbCB1c2Vyc1xyXG4vLyAgIH1cclxuXHJcbi8vICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbi8vICAgY29uc3QgcmVzdWx0cyA9IHNuYXAuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbi8vICAgc2V0V2l0aGRyYXdSZXF1ZXN0cyhyZXN1bHRzKTtcclxuLy8gfTtcclxuXHJcblxyXG4vLyAvLyBjb25zdCBsb2FkV2l0aGRyYXdSZXF1ZXN0cyA9IGFzeW5jICh1aWQsIHVzZXJSb2xlKSA9PiB7XHJcbi8vIC8vICAgbGV0IHE7XHJcblxyXG4vLyAvLyAgIGlmICh1c2VyUm9sZSA9PT0gJ2FkbWluJykge1xyXG4vLyAvLyAgICAgLy8gQWRtaW4gc2hvdWxkIHNlZSB3aXRoZHJhd3MgbWFkZSBieSBzdWJhZG1pbnNcclxuLy8gLy8gICAgIHEgPSBxdWVyeShcclxuLy8gLy8gICAgICAgY29sbGVjdGlvbihkYiwgJ3N1YndpdGhkcmF3UmVxdWVzdHMnKSxcclxuLy8gLy8gICAgICAgd2hlcmUoJ2Zyb21TdWJBZG1pbklkJywgJz09JywgdWlkKSxcclxuLy8gLy8gICAgICAgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwZW5kaW5nJylcclxuLy8gLy8gICAgICk7XHJcbi8vIC8vICAgfSBlbHNlIGlmICh1c2VyUm9sZSA9PT0gJ3N1YmFkbWluJykge1xyXG4vLyAvLyAgICAgLy8gU3ViYWRtaW4gc2hvdWxkIHNlZSB3aXRoZHJhd3MgbWFkZSBieSB0aGVpciB1c2Vyc1xyXG4vLyAvLyAgICAgcSA9IHF1ZXJ5KFxyXG4vLyAvLyAgICAgICBjb2xsZWN0aW9uKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycpLFxyXG4vLyAvLyAgICAgICB3aGVyZSgnZnJvbVVzZXJTdWJBZG1pbklkJywgJz09JywgdWlkKSxcclxuLy8gLy8gICAgICAgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwZW5kaW5nJylcclxuLy8gLy8gICAgICk7XHJcbi8vIC8vICAgfSBlbHNlIHtcclxuLy8gLy8gICAgIHJldHVybjsgLy8gTm8gYWNjZXNzIGZvciBvdGhlciByb2xlc1xyXG4vLyAvLyAgIH1cclxuXHJcbi8vIC8vICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbi8vIC8vICAgY29uc3QgcmVzdWx0cyA9IHNuYXAuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XHJcbi8vIC8vICAgc2V0V2l0aGRyYXdSZXF1ZXN0cyhyZXN1bHRzKTtcclxuLy8gLy8gfTtcclxuXHJcbi8vICAgY29uc3QgaGFuZGxlU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuLy8gICAgIHNldE1lc3NhZ2UoJycpO1xyXG4vLyAgICAgc2V0VGFyZ2V0VWlkKCcnKTtcclxuLy8gICAgIHNldFRhcmdldEJhbGFuY2UobnVsbCk7XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdzdWJ3YWxsZXRzJyksIHdoZXJlKCdlbWFpbCcsICc9PScsIHRhcmdldEVtYWlsKSk7XHJcbi8vICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG5cclxuLy8gICAgICAgaWYgKHNuYXAuZW1wdHkpIHtcclxuLy8gICAgICAgICBzZXRNZXNzYWdlKCfinYwgV2FsbGV0IG5vdCBmb3VuZC4nKTtcclxuLy8gICAgICAgICByZXR1cm47XHJcbi8vICAgICAgIH1cclxuXHJcbi8vICAgICAgIGNvbnN0IHdhbGxldCA9IHNuYXAuZG9jc1swXS5kYXRhKCk7XHJcbi8vICAgICAgIGNvbnN0IHVpZCA9IHdhbGxldC51aWQ7XHJcblxyXG4vLyAgICAgICBpZiAocm9sZSA9PT0gJ3N1YmFkbWluJyAmJiB3YWxsZXQuc3ViQWRtaW5JZCAhPT0gY3VycmVudFVzZXIudWlkKSB7XHJcbi8vICAgICAgICAgc2V0TWVzc2FnZSgn4p2MIE5vdCB5b3VyIHVzZXIuJyk7XHJcbi8vICAgICAgICAgcmV0dXJuO1xyXG4vLyAgICAgICB9XHJcblxyXG4vLyAgICAgICBzZXRUYXJnZXRVaWQodWlkKTtcclxuLy8gICAgICAgc2V0VGFyZ2V0QmFsYW5jZSh3YWxsZXQuYmFsYW5jZSA/PyAwKTtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4pyFIFdhbGxldCBmb3VuZC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBFcnJvciBzZWFyY2hpbmcuJyk7XHJcbi8vICAgICB9IGZpbmFsbHkge1xyXG4vLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuLy8gICAgIH1cclxuLy8gICB9O1xyXG5cclxuLy8gICBjb25zdCBoYW5kbGVBZGRCYWxhbmNlID0gYXN5bmMgKCkgPT4ge1xyXG4vLyAgICAgaWYgKCF0YXJnZXRVaWQgfHwgIWFtb3VudFRvQWRkKSByZXR1cm47XHJcblxyXG4vLyAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRUb0FkZCk7XHJcbi8vICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinYwgSW52YWxpZCBhbW91bnQuJyk7XHJcbi8vICAgICAgIHJldHVybjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoYW1vdW50ID4gY3VycmVudEJhbGFuY2UpIHtcclxuLy8gICAgICAgc2V0TWVzc2FnZSgn4p2MIEluc3VmZmljaWVudCBiYWxhbmNlLicpO1xyXG4vLyAgICAgICByZXR1cm47XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgZnJvbVdhbGxldENvbCA9IHJvbGUgPT09ICdhZG1pbicgPyAnYWRtaW53YWxsZXRzJyA6ICdzdWJ3YWxsZXRzJztcclxuLy8gICAgICAgY29uc3QgdG9XYWxsZXRDb2wgPSAnc3Vid2FsbGV0cyc7XHJcblxyXG4vLyAgICAgICBjb25zdCBmcm9tUmVmID0gZG9jKGRiLCBmcm9tV2FsbGV0Q29sLCBjdXJyZW50VXNlci51aWQpO1xyXG4vLyAgICAgICBjb25zdCB0b1JlZiA9IGRvYyhkYiwgdG9XYWxsZXRDb2wsIHRhcmdldFVpZCk7XHJcblxyXG4vLyAgICAgICBhd2FpdCB1cGRhdGVEb2ModG9SZWYsIHtcclxuLy8gICAgICAgICBiYWxhbmNlOiAodGFyZ2V0QmFsYW5jZSA/PyAwKSArIGFtb3VudCxcclxuLy8gICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyhmcm9tUmVmLCB7XHJcbi8vICAgICAgICAgYmFsYW5jZTogY3VycmVudEJhbGFuY2UgLSBhbW91bnQsXHJcbi8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICBzZXRUYXJnZXRCYWxhbmNlKChwcmV2KSA9PiAocHJldiA/PyAwKSArIGFtb3VudCk7XHJcbi8vICAgICAgIHNldEN1cnJlbnRCYWxhbmNlKChwcmV2KSA9PiBwcmV2IC0gYW1vdW50KTtcclxuLy8gICAgICAgc2V0QW1vdW50VG9BZGQoJycpO1xyXG4vLyAgICAgICBzZXRNZXNzYWdlKCfinIUgVHJhbnNmZXIgc3VjY2Vzc2Z1bC4nKTtcclxuLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbi8vICAgICAgIHNldE1lc3NhZ2UoJ+KdjCBGYWlsZWQgdG8gdHJhbnNmZXIuJyk7XHJcbi8vICAgICB9XHJcbi8vICAgfTtcclxuXHJcbi8vICAgLy8gY29uc3QgaGFuZGxlQWNjZXB0V2l0aGRyYXcgPSBhc3luYyAod2l0aGRyYXcpID0+IHtcclxuLy8gICAvLyAgIHRyeSB7XHJcbi8vICAgLy8gICAgIGNvbnN0IHsgdWlkLCBhbW91bnQsIGlkLCBmcm9tU3ViQWRtaW5JZCB9ID0gd2l0aGRyYXc7XHJcbi8vICAgLy8gICAgIGlmICghdWlkIHx8ICFpZCB8fCAhZnJvbVN1YkFkbWluSWQpIHtcclxuLy8gICAvLyAgICAgICByZXR1cm4gYWxlcnQoJ0ludmFsaWQgd2l0aGRyYXcgcmVxdWVzdC4nKTtcclxuLy8gICAvLyAgICAgfVxyXG5cclxuLy8gICAvLyAgICAgY29uc3QgdXNlcldhbGxldFJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCB1aWQpO1xyXG4vLyAgIC8vICAgICBjb25zdCBzdWJBZG1pbldhbGxldFJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCBmcm9tU3ViQWRtaW5JZCk7XHJcbi8vICAgLy8gICAgIGNvbnN0IHdpdGhkcmF3UmVmID0gZG9jKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycsIGlkKTtcclxuXHJcbi8vICAgLy8gICAgIGNvbnN0IFt1c2VyU25hcCwgc3ViQWRtaW5TbmFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuLy8gICAvLyAgICAgICBnZXREb2ModXNlcldhbGxldFJlZiksXHJcbi8vICAgLy8gICAgICAgZ2V0RG9jKHN1YkFkbWluV2FsbGV0UmVmKSxcclxuLy8gICAvLyAgICAgXSk7XHJcblxyXG4vLyAgIC8vICAgICBjb25zdCB1c2VyQmFsYW5jZSA9IHVzZXJTbmFwLmV4aXN0cygpID8gdXNlclNuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMCA6IDA7XHJcbi8vICAgLy8gICAgIGNvbnN0IHN1YkFkbWluQmFsYW5jZSA9IHN1YkFkbWluU25hcC5leGlzdHMoKSA/IHN1YkFkbWluU25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwIDogMDtcclxuXHJcbi8vICAgLy8gICAgIGlmIChzdWJBZG1pbkJhbGFuY2UgPCBhbW91bnQpIHtcclxuLy8gICAvLyAgICAgICByZXR1cm4gYWxlcnQoJ1N1YmFkbWluIGhhcyBpbnN1ZmZpY2llbnQgYmFsYW5jZSB0byBhcHByb3ZlIHRoaXMgd2l0aGRyYXdhbC4nKTtcclxuLy8gICAvLyAgICAgfVxyXG5cclxuLy8gICAvLyAgICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJXYWxsZXRSZWYsIHtcclxuLy8gICAvLyAgICAgICBiYWxhbmNlOiB1c2VyQmFsYW5jZSArIGFtb3VudCxcclxuLy8gICAvLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgIC8vICAgICB9KTtcclxuXHJcbi8vICAgLy8gICAgIGF3YWl0IHVwZGF0ZURvYyhzdWJBZG1pbldhbGxldFJlZiwge1xyXG4vLyAgIC8vICAgICAgIGJhbGFuY2U6IHN1YkFkbWluQmFsYW5jZSAtIGFtb3VudCxcclxuLy8gICAvLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgIC8vICAgICB9KTtcclxuXHJcbi8vICAgLy8gICAgIGF3YWl0IHVwZGF0ZURvYyh3aXRoZHJhd1JlZiwge1xyXG4vLyAgIC8vICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcclxuLy8gICAvLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgIC8vICAgICB9KTtcclxuXHJcbi8vICAgLy8gICAgIHNldFdpdGhkcmF3UmVxdWVzdHMoKHByZXYpID0+IHByZXYuZmlsdGVyKChyKSA9PiByLmlkICE9PSBpZCkpO1xyXG4vLyAgIC8vICAgICBhbGVydCgn4pyFIFdpdGhkcmF3IGFwcHJvdmVkIGFuZCBmdW5kcyBhZGRlZCB0byB1c2VyIHdhbGxldC4nKTtcclxuLy8gICAvLyAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgIC8vICAgICBjb25zb2xlLmVycm9yKCfinYwgaGFuZGxlQWNjZXB0V2l0aGRyYXcgZXJyb3I6JywgZXJyKTtcclxuLy8gICAvLyAgICAgYWxlcnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGFjY2VwdGluZyB0aGUgd2l0aGRyYXcuJyk7XHJcbi8vICAgLy8gICB9XHJcbi8vICAgLy8gfTtcclxuLy8gICBjb25zdCBoYW5kbGVBY2NlcHRXaXRoZHJhdyA9IGFzeW5jICh3aXRoZHJhdykgPT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB7IGlkLCBhbW91bnQsIGZyb21TdWJBZG1pbklkLCBzdGF0dXMgfSA9IHdpdGhkcmF3O1xyXG5cclxuLy8gICAgIGlmICghaWQgfHwgIWZyb21TdWJBZG1pbklkIHx8IHN0YXR1cyAhPT0gJ3BlbmRpbmcnKSB7XHJcbi8vICAgICAgIHJldHVybiBhbGVydCgnSW52YWxpZCBvciBhbHJlYWR5IHByb2Nlc3NlZCByZXF1ZXN0LicpO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIC8vIEdldCBzdWJhZG1pbiB3YWxsZXRcclxuLy8gICAgIGNvbnN0IHN1YkFkbWluV2FsbGV0UmVmID0gZG9jKGRiLCAnc3Vid2FsbGV0cycsIGZyb21TdWJBZG1pbklkKTtcclxuLy8gICAgIGNvbnN0IHN1YkFkbWluU25hcCA9IGF3YWl0IGdldERvYyhzdWJBZG1pbldhbGxldFJlZik7XHJcblxyXG4vLyAgICAgaWYgKCFzdWJBZG1pblNuYXAuZXhpc3RzKCkpIHJldHVybiBhbGVydCgnU3ViYWRtaW4gd2FsbGV0IG5vdCBmb3VuZC4nKTtcclxuXHJcbi8vICAgICBjb25zdCBzdWJBZG1pbkJhbGFuY2UgPSBzdWJBZG1pblNuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMDtcclxuXHJcbi8vICAgICAvLyDinIUgQWRkIGFtb3VudCBiYWNrIHRvIHN1YmFkbWluXHJcbi8vICAgICBhd2FpdCB1cGRhdGVEb2Moc3ViQWRtaW5XYWxsZXRSZWYsIHtcclxuLy8gICAgICAgYmFsYW5jZTogc3ViQWRtaW5CYWxhbmNlICsgYW1vdW50LFxyXG4vLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgLy8g4pyFIE1hcmsgdGhlIHJlcXVlc3QgYXMgYXBwcm92ZWRcclxuLy8gICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgaWQpLCB7XHJcbi8vICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcclxuLy8gICAgICAgYXBwcm92ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyDinIUgUmVtb3ZlIGZyb20gcGVuZGluZyBsaXN0IG9uIHNjcmVlblxyXG4vLyAgICAgc2V0V2l0aGRyYXdSZXF1ZXN0cygocHJldikgPT5cclxuLy8gICAgICAgcHJldi5tYXAoKHIpID0+XHJcbi8vICAgICAgICAgci5pZCA9PT0gaWQgPyB7IC4uLnIsIHN0YXR1czogJ2FwcHJvdmVkJyB9IDogclxyXG4vLyAgICAgICApXHJcbi8vICAgICApO1xyXG5cclxuLy8gICAgIGFsZXJ0KCfinIUgV2l0aGRyYXcgYXBwcm92ZWQuIEFtb3VudCBjcmVkaXRlZCBiYWNrIHRvIHN1YmFkbWluLicpO1xyXG4vLyAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGFwcHJvdmluZyB3aXRoZHJhdzonLCBlcnIpO1xyXG4vLyAgICAgYWxlcnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nLicpO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vICAgcmV0dXJuIChcclxuLy8gICAgIDxMYXlvdXQ+XHJcbi8vICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcC04XCI+XHJcbi8vICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy14bCBteC1hdXRvIGJnLWdyYXktODAwIHAtNiByb3VuZGVkIHNoYWRvdy1sZ1wiPlxyXG4vLyAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCBtYi02IHRleHQtY2VudGVyXCI+XHJcbi8vICAgICAgICAgICAgIHtyb2xlID09PSAnYWRtaW4nID8gJ0FkbWluOiBGdW5kIFN1YmFkbWluJyA6ICdTdWJhZG1pbjogRnVuZCBVc2VyJ31cclxuLy8gICAgICAgICAgIDwvaDE+XHJcblxyXG4vLyAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItNCB0ZXh0LWdyZWVuLTQwMFwiPllvdXIgQmFsYW5jZTog4oK5e2N1cnJlbnRCYWxhbmNlLnRvRml4ZWQoMil9PC9wPlxyXG5cclxuLy8gICAgICAgICAgIDxpbnB1dFxyXG4vLyAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxyXG4vLyAgICAgICAgICAgICBwbGFjZWhvbGRlcj17cm9sZSA9PT0gJ2FkbWluJyA/ICdTdWJhZG1pbiBFbWFpbCcgOiAnVXNlciBFbWFpbCd9XHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4vLyAgICAgICAgICAgICB2YWx1ZT17dGFyZ2V0RW1haWx9XHJcbi8vICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VGFyZ2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxyXG4vLyAgICAgICAgICAgLz5cclxuXHJcbi8vICAgICAgICAgICA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaH1cclxuLy8gICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbi8vICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy15ZWxsb3ctNTAwIGhvdmVyOmJnLXllbGxvdy02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZCBtYi00XCJcclxuLy8gICAgICAgICAgID5cclxuLy8gICAgICAgICAgICAge2xvYWRpbmcgPyAnU2VhcmNoaW5nLi4uJyA6ICdGaW5kIFdhbGxldCd9XHJcbi8vICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbi8vICAgICAgICAgICB7bWVzc2FnZSAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LXNtIG1iLTQgdGV4dC15ZWxsb3ctNDAwXCI+e21lc3NhZ2V9PC9wPn1cclxuXHJcbi8vICAgICAgICAgICB7dGFyZ2V0VWlkICYmIChcclxuLy8gICAgICAgICAgICAgPD5cclxuLy8gICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0yXCI+UmVjaXBpZW50IEJhbGFuY2U6IOKCuXt0YXJnZXRCYWxhbmNlPy50b0ZpeGVkKDIpfTwvcD5cclxuLy8gICAgICAgICAgICAgICA8aW5wdXRcclxuLy8gICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBbW91bnQgdG8gdHJhbnNmZXJcIlxyXG4vLyAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMyByb3VuZGVkIGJnLWdyYXktNzAwIHRleHQtd2hpdGUgbWItNFwiXHJcbi8vICAgICAgICAgICAgICAgICB2YWx1ZT17YW1vdW50VG9BZGR9XHJcbi8vICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFtb3VudFRvQWRkKGUudGFyZ2V0LnZhbHVlKX1cclxuLy8gICAgICAgICAgICAgICAvPlxyXG4vLyAgICAgICAgICAgICAgIDxidXR0b25cclxuLy8gICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZEJhbGFuY2V9XHJcbi8vICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JlZW4tNTAwIGhvdmVyOmJnLWdyZWVuLTYwMCB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkXCJcclxuLy8gICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICBUcmFuc2ZlciBGdW5kc1xyXG4vLyAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4vLyAgICAgICAgICAgICA8Lz5cclxuLy8gICAgICAgICAgICl9XHJcbi8vICAgICAgICAgPC9kaXY+XHJcblxyXG4vLyAgICAgICAgIHsvKiBXaXRoZHJhdyBSZXF1ZXN0cyAqL31cclxuLy8gICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5sZW5ndGggPiAwICYmIChcclxuLy8gICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctMnhsIG14LWF1dG8gbXQtMTAgYmctZ3JheS04MDAgcC02IHJvdW5kZWQgc2hhZG93LWxnXCI+XHJcbi8vICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNFwiPlBlbmRpbmcgV2l0aGRyYXcgUmVxdWVzdHM8L2gyPlxyXG4vLyAgICAgICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4vLyAgICAgICAgICAgICAgIDxkaXYga2V5PXtyZXEuaWR9IGNsYXNzTmFtZT1cImJnLWdyYXktNzAwIHAtMyBtYi0zIHJvdW5kZWRcIj5cclxuLy8gICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+VXNlciBFbWFpbDo8L3N0cm9uZz4ge3JlcS5lbWFpbH08L3A+XHJcbi8vICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkFtb3VudDo8L3N0cm9uZz4g4oK5e3JlcS5hbW91bnR9PC9wPlxyXG4vLyAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5NZXRob2Q6PC9zdHJvbmc+IHtyZXEubWV0aG9kfSAoe3JlcS5wYXltZW50SWR9KTwvcD5cclxuLy8gICAgICAgICAgICAgICAgIHsvKiA8YnV0dG9uXHJcbi8vICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTIgYmctYmx1ZS01MDAgaG92ZXI6YmctYmx1ZS02MDAgdGV4dC13aGl0ZSBweS0xIHB4LTQgcm91bmRlZFwiXHJcbi8vICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUFjY2VwdFdpdGhkcmF3KHJlcSl9XHJcbi8vICAgICAgICAgICAgICAgICA+XHJcbi8vICAgICAgICAgICAgICAgICAgIEFjY2VwdFxyXG4vLyAgICAgICAgICAgICAgICAgPC9idXR0b24+ICovfVxyXG4vLyAgICAgICAgICAgICAgICAge3JlcS5zdGF0dXMgPT09ICdwZW5kaW5nJyA/IChcclxuLy8gICA8YnV0dG9uXHJcbi8vICAgICBjbGFzc05hbWU9XCJtdC0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcHktMSBweC00IHJvdW5kZWRcIlxyXG4vLyAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQWNjZXB0V2l0aGRyYXcocmVxKX1cclxuLy8gICA+XHJcbi8vICAgICBBY2NlcHRcclxuLy8gICA8L2J1dHRvbj5cclxuLy8gKSA6IChcclxuLy8gICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgbXQtMiB0ZXh0LWdyZWVuLTQwMCBmb250LXNlbWlib2xkXCI+XHJcbi8vICAgICBBcHByb3ZlZFxyXG4vLyAgIDwvc3Bhbj5cclxuLy8gKX1cclxuXHJcbi8vICAgICAgICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgICAgICAgICkpfVxyXG4vLyAgICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgICAgKX1cclxuLy8gICAgICAgPC9kaXY+XHJcbi8vICAgICA8L0xheW91dD5cclxuLy8gICApO1xyXG4vLyB9XHJcblxyXG5cclxuLy8gYXBwL3lvdXJQYXRoL3BhZ2UuanNcclxuXHJcbid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBnZXRBdXRoLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcclxuaW1wb3J0IHsgc2V0RG9jIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHtcclxuICBnZXRGaXJlc3RvcmUsXHJcbiAgY29sbGVjdGlvbixcclxuICBxdWVyeSxcclxuICB3aGVyZSxcclxuICBnZXREb2NzLFxyXG4gIGRvYyxcclxuICBnZXREb2MsXHJcbiAgdXBkYXRlRG9jLFxyXG4gIHNlcnZlclRpbWVzdGFtcCxcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAnQC9maXJlYmFzZSc7XHJcbmltcG9ydCBMYXlvdXQgZnJvbSAnQC9hcHAvQ29tcG9uZW50cy9MYXlvdXQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZSgpIHtcclxuICBjb25zdCBhdXRoID0gZ2V0QXV0aChmaXJlYmFzZUFwcCk7XHJcbiAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoZmlyZWJhc2VBcHApO1xyXG5cclxuICBjb25zdCBbY3VycmVudFVzZXIsIHNldEN1cnJlbnRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtyb2xlLCBzZXRSb2xlXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtjdXJyZW50QmFsYW5jZSwgc2V0Q3VycmVudEJhbGFuY2VdID0gdXNlU3RhdGUoMCk7XHJcblxyXG4gIGNvbnN0IFt0YXJnZXRFbWFpbCwgc2V0VGFyZ2V0RW1haWxdID0gdXNlU3RhdGUoJycpO1xyXG4gIGNvbnN0IFt0YXJnZXRVaWQsIHNldFRhcmdldFVpZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbiAgY29uc3QgW3RhcmdldEJhbGFuY2UsIHNldFRhcmdldEJhbGFuY2VdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgW2Ftb3VudFRvQWRkLCBzZXRBbW91bnRUb0FkZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbiAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGUoJycpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgY29uc3QgW3dpdGhkcmF3UmVxdWVzdHMsIHNldFdpdGhkcmF3UmVxdWVzdHNdID0gdXNlU3RhdGUoW10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKHVzZXIpID0+IHtcclxuICAgICAgc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlci51aWQpO1xyXG4gICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBzbmFwLmV4aXN0cygpID8gc25hcC5kYXRhKCkgOiB7fTtcclxuICAgICAgICBjb25zdCB1c2VyUm9sZSA9IHVzZXJEYXRhLnJvbGUgfHwgJ3VzZXInO1xyXG4gICAgICAgIHNldFJvbGUodXNlclJvbGUpO1xyXG5cclxuICAgICAgICBjb25zdCB3YWxsZXRDb2wgPSB1c2VyUm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4gICAgICAgIGNvbnN0IHdhbGxldFJlZiA9IGRvYyhkYiwgd2FsbGV0Q29sLCB1c2VyLnVpZCk7XHJcbiAgICAgICAgY29uc3Qgd2FsbGV0U25hcCA9IGF3YWl0IGdldERvYyh3YWxsZXRSZWYpO1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSB3YWxsZXRTbmFwLmV4aXN0cygpID8gd2FsbGV0U25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwIDogMDtcclxuICAgICAgICBzZXRDdXJyZW50QmFsYW5jZShiYWxhbmNlKTtcclxuXHJcbiAgICAgICAgbG9hZFdpdGhkcmF3UmVxdWVzdHModXNlci51aWQsIHVzZXJSb2xlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIGNvbnN0IGxvYWRXaXRoZHJhd1JlcXVlc3RzID0gYXN5bmMgKHVpZCwgdXNlclJvbGUpID0+IHtcclxuICAvLyAgIGxldCBxO1xyXG4gIC8vICAgaWYgKHVzZXJSb2xlID09PSAnYWRtaW4nKSB7XHJcbiAgLy8gICAgIHEgPSBxdWVyeShcclxuICAvLyAgICAgICBjb2xsZWN0aW9uKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycpLFxyXG4gIC8vICAgICAgIHdoZXJlKCdmcm9tU3ViQWRtaW5JZCcsICc9PScsIHVpZCksXHJcbiAgLy8gICAgICAgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwZW5kaW5nJylcclxuICAvLyAgICAgKTtcclxuICAvLyAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09ICdzdWJhZG1pbicpIHtcclxuICAvLyAgICAgcSA9IHF1ZXJ5KFxyXG4gIC8vICAgICAgIGNvbGxlY3Rpb24oZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJyksXHJcbiAgLy8gICAgICAgd2hlcmUoJ2Zyb21Vc2VyU3ViQWRtaW5JZCcsICc9PScsIHVpZCksXHJcbiAgLy8gICAgICAgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwZW5kaW5nJylcclxuICAvLyAgICAgKTtcclxuICAvLyAgIH0gZWxzZSByZXR1cm47XHJcblxyXG4gIC8vICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgLy8gICBjb25zdCByZXN1bHRzID0gc25hcC5kb2NzLm1hcCgoZG9jKSA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICAvLyAgIHNldFdpdGhkcmF3UmVxdWVzdHMocmVzdWx0cyk7XHJcbiAgLy8gfTtcclxuY29uc3QgbG9hZFdpdGhkcmF3UmVxdWVzdHMgPSBhc3luYyAodWlkLCB1c2VyUm9sZSkgPT4ge1xyXG4gIGxldCBxO1xyXG5cclxuICBpZiAodXNlclJvbGUgPT09ICdhZG1pbicpIHtcclxuICAgIC8vIFNob3cgb25seSBzdWJhZG1pbiDihpIgYWRtaW4gd2l0aGRyYXdzXHJcbiAgICBxID0gcXVlcnkoXHJcbiAgICAgIGNvbGxlY3Rpb24oZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJyksXHJcbiAgICAgIHdoZXJlKCdmcm9tVXNlclN1YkFkbWluSWQnLCAnPT0nLCAnJyksIC8vIPCflI0gTXVzdCBiZSBmcm9tIGEgc3ViYWRtaW5cclxuICAgICAgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwZW5kaW5nJylcclxuICAgICk7XHJcbiAgfSBlbHNlIGlmICh1c2VyUm9sZSA9PT0gJ3N1YmFkbWluJykge1xyXG4gICAgLy8gU2hvdyB1c2VyIOKGkiBzdWJhZG1pbiB3aXRoZHJhd3NcclxuICAgIHEgPSBxdWVyeShcclxuICAgICAgY29sbGVjdGlvbihkYiwgJ3N1YndpdGhkcmF3UmVxdWVzdHMnKSxcclxuICAgICAgd2hlcmUoJ2Zyb21Vc2VyU3ViQWRtaW5JZCcsICc9PScsIHVpZCksXHJcbiAgICAgIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCAncGVuZGluZycpXHJcbiAgICApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuICBjb25zdCByZXN1bHRzID0gc25hcC5kb2NzLm1hcCgoZG9jKSA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcclxuICBzZXRXaXRoZHJhd1JlcXVlc3RzKHJlc3VsdHMpO1xyXG59O1xyXG5cclxuICBjb25zdCBoYW5kbGVTZWFyY2ggPSBhc3luYyAoKSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgc2V0TWVzc2FnZSgnJyk7XHJcbiAgICBzZXRUYXJnZXRVaWQoJycpO1xyXG4gICAgc2V0VGFyZ2V0QmFsYW5jZShudWxsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgJ3N1YndhbGxldHMnKSwgd2hlcmUoJ2VtYWlsJywgJz09JywgdGFyZ2V0RW1haWwpKTtcclxuICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgICAgIGlmIChzbmFwLmVtcHR5KSByZXR1cm4gc2V0TWVzc2FnZSgn4p2MIFdhbGxldCBub3QgZm91bmQuJyk7XHJcblxyXG4gICAgICBjb25zdCB3YWxsZXQgPSBzbmFwLmRvY3NbMF0uZGF0YSgpO1xyXG4gICAgICBjb25zdCB1aWQgPSB3YWxsZXQudWlkO1xyXG4gICAgICBpZiAocm9sZSA9PT0gJ3N1YmFkbWluJyAmJiB3YWxsZXQuc3ViQWRtaW5JZCAhPT0gY3VycmVudFVzZXIudWlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHNldE1lc3NhZ2UoJ+KdjCBOb3QgeW91ciB1c2VyLicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRUYXJnZXRVaWQodWlkKTtcclxuICAgICAgc2V0VGFyZ2V0QmFsYW5jZSh3YWxsZXQuYmFsYW5jZSA/PyAwKTtcclxuICAgICAgc2V0TWVzc2FnZSgn4pyFIFdhbGxldCBmb3VuZC4nKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIHNldE1lc3NhZ2UoJ+KdjCBFcnJvciBzZWFyY2hpbmcuJyk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBjb25zdCBoYW5kbGVBZGRCYWxhbmNlID0gYXN5bmMgKCkgPT4ge1xyXG4gIC8vICAgaWYgKCF0YXJnZXRVaWQgfHwgIWFtb3VudFRvQWRkKSByZXR1cm47XHJcblxyXG4gIC8vICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnRUb0FkZCk7XHJcbiAgLy8gICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkgcmV0dXJuIHNldE1lc3NhZ2UoJ+KdjCBJbnZhbGlkIGFtb3VudC4nKTtcclxuICAvLyAgIGlmIChhbW91bnQgPiBjdXJyZW50QmFsYW5jZSkgcmV0dXJuIHNldE1lc3NhZ2UoJ+KdjCBJbnN1ZmZpY2llbnQgYmFsYW5jZS4nKTtcclxuXHJcbiAgLy8gICB0cnkge1xyXG4gIC8vICAgICBjb25zdCBmcm9tV2FsbGV0Q29sID0gcm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnO1xyXG4gIC8vICAgICBjb25zdCB0b1dhbGxldENvbCA9ICdzdWJ3YWxsZXRzJztcclxuXHJcbiAgLy8gICAgIGNvbnN0IGZyb21SZWYgPSBkb2MoZGIsIGZyb21XYWxsZXRDb2wsIGN1cnJlbnRVc2VyLnVpZCk7XHJcbiAgLy8gICAgIGNvbnN0IHRvUmVmID0gZG9jKGRiLCB0b1dhbGxldENvbCwgdGFyZ2V0VWlkKTtcclxuXHJcbiAgLy8gICAgIGF3YWl0IHVwZGF0ZURvYyh0b1JlZiwge1xyXG4gIC8vICAgICAgIGJhbGFuY2U6ICh0YXJnZXRCYWxhbmNlID8/IDApICsgYW1vdW50LFxyXG4gIC8vICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgLy8gICAgIH0pO1xyXG5cclxuICAvLyAgICAgYXdhaXQgdXBkYXRlRG9jKGZyb21SZWYsIHtcclxuICAvLyAgICAgICBiYWxhbmNlOiBjdXJyZW50QmFsYW5jZSAtIGFtb3VudCxcclxuICAvLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gIC8vICAgICB9KTtcclxuXHJcbiAgLy8gICAgIHNldFRhcmdldEJhbGFuY2UoKHByZXYpID0+IChwcmV2ID8/IDApICsgYW1vdW50KTtcclxuICAvLyAgICAgc2V0Q3VycmVudEJhbGFuY2UoKHByZXYpID0+IHByZXYgLSBhbW91bnQpO1xyXG4gIC8vICAgICBzZXRBbW91bnRUb0FkZCgnJyk7XHJcbiAgLy8gICAgIHNldE1lc3NhZ2UoJ+KchSBUcmFuc2ZlciBzdWNjZXNzZnVsLicpO1xyXG4gIC8vICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAvLyAgICAgc2V0TWVzc2FnZSgn4p2MIEZhaWxlZCB0byB0cmFuc2Zlci4nKTtcclxuICAvLyAgIH1cclxuICAvLyB9O1xyXG5cclxuICAvLyBjb25zdCBoYW5kbGVBY2NlcHRXaXRoZHJhdyA9IGFzeW5jICh3aXRoZHJhdykgPT4ge1xyXG4gIC8vICAgdHJ5IHtcclxuICAvLyAgICAgY29uc3QgeyBpZCwgYW1vdW50LCBmcm9tU3ViQWRtaW5JZCwgZnJvbVVzZXJTdWJBZG1pbklkLCB1aWQsIHN0YXR1cyB9ID0gd2l0aGRyYXc7XHJcbiAgLy8gICAgIGlmICghaWQgfHwgc3RhdHVzICE9PSAncGVuZGluZycpIHJldHVybiBhbGVydCgnSW52YWxpZCByZXF1ZXN0LicpO1xyXG5cclxuICAvLyAgICAgaWYgKHJvbGUgPT09ICdhZG1pbicpIHtcclxuICAvLyAgICAgICBjb25zdCBzdWJBZG1pblJlZiA9IGRvYyhkYiwgJ3N1YndhbGxldHMnLCBmcm9tU3ViQWRtaW5JZCk7XHJcbiAgLy8gICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvYyhzdWJBZG1pblJlZik7XHJcbiAgLy8gICAgICAgY29uc3QgYmFsID0gc25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwO1xyXG4gIC8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyhzdWJBZG1pblJlZiwge1xyXG4gIC8vICAgICAgICAgYmFsYW5jZTogYmFsICsgYW1vdW50LFxyXG4gIC8vICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAvLyAgICAgICB9KTtcclxuICAvLyAgICAgfVxyXG5cclxuICAvLyAgICAgaWYgKHJvbGUgPT09ICdzdWJhZG1pbicpIHtcclxuICAvLyAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAnc3Vid2FsbGV0cycsIHVpZCk7XHJcbiAgLy8gICAgICAgY29uc3Qgc3ViUmVmID0gZG9jKGRiLCAnc3Vid2FsbGV0cycsIGZyb21Vc2VyU3ViQWRtaW5JZCk7XHJcbiAgLy8gICAgICAgY29uc3QgW3VzZXJTbmFwLCBzdWJTbmFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtnZXREb2ModXNlclJlZiksIGdldERvYyhzdWJSZWYpXSk7XHJcbiAgLy8gICAgICAgY29uc3QgdXNlckJhbCA9IHVzZXJTbmFwLmRhdGEoKS5iYWxhbmNlID8/IDA7XHJcbiAgLy8gICAgICAgY29uc3Qgc3ViQmFsID0gc3ViU25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwO1xyXG4gIC8vICAgICAgIGlmIChzdWJCYWwgPCBhbW91bnQpIHJldHVybiBhbGVydCgn4p2MIEluc3VmZmljaWVudCBiYWxhbmNlLicpO1xyXG5cclxuICAvLyAgICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclJlZiwge1xyXG4gIC8vICAgICAgICAgYmFsYW5jZTogdXNlckJhbCArIGFtb3VudCxcclxuICAvLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgLy8gICAgICAgfSk7XHJcblxyXG4gIC8vICAgICAgIGF3YWl0IHVwZGF0ZURvYyhzdWJSZWYsIHtcclxuICAvLyAgICAgICAgIGJhbGFuY2U6IHN1YkJhbCAtIGFtb3VudCxcclxuICAvLyAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgLy8gICAgICAgfSk7XHJcbiAgLy8gICAgIH1cclxuXHJcbiAgLy8gICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgaWQpLCB7XHJcbiAgLy8gICAgICAgc3RhdHVzOiAnYXBwcm92ZWQnLFxyXG4gIC8vICAgICAgIGFwcHJvdmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gIC8vICAgICB9KTtcclxuXHJcbiAgLy8gICAgIHNldFdpdGhkcmF3UmVxdWVzdHMoKHByZXYpID0+IHByZXYubWFwKChyKSA9PiByLmlkID09PSBpZCA/IHsgLi4uciwgc3RhdHVzOiAnYXBwcm92ZWQnIH0gOiByKSk7XHJcbiAgLy8gICAgIGFsZXJ0KCfinIUgV2l0aGRyYXcgYXBwcm92ZWQuJyk7XHJcbiAgLy8gICB9IGNhdGNoIChlcnIpIHtcclxuICAvLyAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGFwcHJvdmluZyB3aXRoZHJhdzonLCBlcnIpO1xyXG4gIC8vICAgICBhbGVydCgnU29tZXRoaW5nIHdlbnQgd3JvbmcuJyk7XHJcbiAgLy8gICB9XHJcbiAgLy8gfTtcclxuLy8gY29uc3QgaGFuZGxlQWNjZXB0V2l0aGRyYXcgPSBhc3luYyAod2l0aGRyYXcpID0+IHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgeyBpZCwgYW1vdW50LCBmcm9tU3ViQWRtaW5JZCwgZnJvbVVzZXJTdWJBZG1pbklkLCBzdGF0dXMgfSA9IHdpdGhkcmF3O1xyXG5cclxuLy8gICAgIGlmICghaWQgfHwgc3RhdHVzICE9PSAncGVuZGluZycpIHtcclxuLy8gICAgICAgcmV0dXJuIGFsZXJ0KCdJbnZhbGlkIG9yIGFscmVhZHkgcHJvY2Vzc2VkIHJlcXVlc3QuJyk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgLy8gRGV0ZXJtaW5lIGlmIGFkbWluIGlzIGFjY2VwdGluZyBhIHN1YmFkbWluJ3MgcmVxdWVzdFxyXG4vLyAgICAgY29uc3QgaXNBZG1pbiA9IHJvbGUgPT09ICdhZG1pbicgJiYgZnJvbVN1YkFkbWluSWQgJiYgIWZyb21Vc2VyU3ViQWRtaW5JZDtcclxuXHJcbi8vICAgICBjb25zdCBwYXllcldhbGxldFJlZiA9IGRvYyhkYiwgaXNBZG1pbiA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnLCBjdXJyZW50VXNlci51aWQpO1xyXG4vLyAgICAgY29uc3QgcmVjZWl2ZXJXYWxsZXRSZWYgPSBkb2MoZGIsICdzdWJ3YWxsZXRzJywgd2l0aGRyYXcudWlkKTsgLy8gQWx3YXlzIGFkZCB0byByZXF1ZXN0ZXIgd2FsbGV0XHJcblxyXG4vLyAgICAgY29uc3QgW3BheWVyU25hcCwgcmVjZWl2ZXJTbmFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuLy8gICAgICAgZ2V0RG9jKHBheWVyV2FsbGV0UmVmKSxcclxuLy8gICAgICAgZ2V0RG9jKHJlY2VpdmVyV2FsbGV0UmVmKSxcclxuLy8gICAgIF0pO1xyXG5cclxuLy8gICAgIGNvbnN0IHBheWVyQmFsYW5jZSA9IHBheWVyU25hcC5leGlzdHMoKSA/IHBheWVyU25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwIDogMDtcclxuLy8gICAgIGNvbnN0IHJlY2VpdmVyQmFsYW5jZSA9IHJlY2VpdmVyU25hcC5leGlzdHMoKSA/IHJlY2VpdmVyU25hcC5kYXRhKCkuYmFsYW5jZSA/PyAwIDogMDtcclxuXHJcbi8vICAgICBpZiAocGF5ZXJCYWxhbmNlIDwgYW1vdW50KSB7XHJcbi8vICAgICAgIHJldHVybiBhbGVydCgn4p2MIEluc3VmZmljaWVudCBiYWxhbmNlIHRvIGFwcHJvdmUuJyk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgLy8gVHJhbnNmZXIgYW1vdW50XHJcbi8vICAgICBhd2FpdCB1cGRhdGVEb2MocmVjZWl2ZXJXYWxsZXRSZWYsIHtcclxuLy8gICAgICAgYmFsYW5jZTogcmVjZWl2ZXJCYWxhbmNlICsgYW1vdW50LFxyXG4vLyAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgYXdhaXQgdXBkYXRlRG9jKHBheWVyV2FsbGV0UmVmLCB7XHJcbi8vICAgICAgIGJhbGFuY2U6IHBheWVyQmFsYW5jZSAtIGFtb3VudCxcclxuLy8gICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuLy8gICAgIH0pO1xyXG5cclxuLy8gICAgIC8vIE1hcmsgYXMgYXBwcm92ZWRcclxuLy8gICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgaWQpLCB7XHJcbi8vICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcclxuLy8gICAgICAgYXBwcm92ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcclxuLy8gICAgIHNldFdpdGhkcmF3UmVxdWVzdHMoKHByZXYpID0+XHJcbi8vICAgICAgIHByZXYubWFwKChyKSA9PlxyXG4vLyAgICAgICAgIHIuaWQgPT09IGlkID8geyAuLi5yLCBzdGF0dXM6ICdhcHByb3ZlZCcgfSA6IHJcclxuLy8gICAgICAgKVxyXG4vLyAgICAgKTtcclxuXHJcbi8vICAgICBhbGVydCgn4pyFIFdpdGhkcmF3IGFwcHJvdmVkIGFuZCBmdW5kcyB0cmFuc2ZlcnJlZC4nKTtcclxuLy8gICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBhcHByb3Zpbmcgd2l0aGRyYXc6JywgZXJyKTtcclxuLy8gICAgIGFsZXJ0KCdTb21ldGhpbmcgd2VudCB3cm9uZy4nKTtcclxuLy8gICB9XHJcbi8vIH07XHJcbmNvbnN0IGhhbmRsZUFjY2VwdFdpdGhkcmF3ID0gYXN5bmMgKHdpdGhkcmF3KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgaWQsIGFtb3VudCwgZnJvbVN1YkFkbWluSWQsIGZyb21Vc2VyU3ViQWRtaW5JZCwgdWlkLCBzdGF0dXMgfSA9IHdpdGhkcmF3O1xyXG5cclxuICAgIGlmICghaWQgfHwgc3RhdHVzICE9PSAncGVuZGluZycpIHtcclxuICAgICAgcmV0dXJuIGFsZXJ0KCdJbnZhbGlkIG9yIGFscmVhZHkgcHJvY2Vzc2VkIHJlcXVlc3QuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSByZWNlaXZlciAod2hvIGdldHMgdGhlIG1vbmV5IGJhY2spXHJcbiAgICBsZXQgcmVjZWl2ZXJVaWQ7XHJcbiAgICBpZiAocm9sZSA9PT0gJ2FkbWluJykge1xyXG4gICAgICAvLyBBZG1pbiBpcyBhcHByb3Zpbmcgc3ViYWRtaW4g4oaSIGFkbWluIHJlcXVlc3RcclxuICAgICAgcmVjZWl2ZXJVaWQgPSBmcm9tU3ViQWRtaW5JZDtcclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ3N1YmFkbWluJykge1xyXG4gICAgICAvLyBTdWJhZG1pbiBpcyBhcHByb3ZpbmcgdXNlciDihpIgc3ViYWRtaW4gcmVxdWVzdFxyXG4gICAgICByZWNlaXZlclVpZCA9IGN1cnJlbnRVc2VyLnVpZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBhbGVydCgnVW5hdXRob3JpemVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwcm92ZXIncyB3YWxsZXQgKHdobyBnZXRzIG1vbmV5IGFkZGVkIGJhY2spXHJcbiAgICBjb25zdCByZWNlaXZlcldhbGxldFJlZiA9IGRvYyhkYiwgcm9sZSA9PT0gJ2FkbWluJyA/ICdhZG1pbndhbGxldHMnIDogJ3N1YndhbGxldHMnLCByZWNlaXZlclVpZCk7XHJcbiAgICBjb25zdCByZWNlaXZlclNuYXAgPSBhd2FpdCBnZXREb2MocmVjZWl2ZXJXYWxsZXRSZWYpO1xyXG4gICAgY29uc3QgcmVjZWl2ZXJCYWxhbmNlID0gcmVjZWl2ZXJTbmFwLmV4aXN0cygpID8gcmVjZWl2ZXJTbmFwLmRhdGEoKS5iYWxhbmNlID8/IDAgOiAwO1xyXG5cclxuICAgIC8vIEFkZCBhbW91bnQgYmFjayB0byBhcHByb3ZlciAoYWRtaW4gb3Igc3ViYWRtaW4pXHJcbiAgICBhd2FpdCB1cGRhdGVEb2MocmVjZWl2ZXJXYWxsZXRSZWYsIHtcclxuICAgICAgYmFsYW5jZTogcmVjZWl2ZXJCYWxhbmNlICsgYW1vdW50LFxyXG4gICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgfSk7XHJcbiAgICBcclxuXHJcbi8vIGF3YWl0IHNldERvYyhyZWNlaXZlcldhbGxldFJlZiwge1xyXG4vLyAgIGJhbGFuY2U6IHJlY2VpdmVyQmFsYW5jZSArIGFtb3VudCxcclxuLy8gICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4vLyB9LCB7IG1lcmdlOiB0cnVlIH0pO1xyXG5cclxuXHJcbiAgICAvLyBNYXJrIHRoZSByZXF1ZXN0IGFzIGFwcHJvdmVkXHJcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnc3Vid2l0aGRyYXdSZXF1ZXN0cycsIGlkKSwge1xyXG4gICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXHJcbiAgICAgIGFwcHJvdmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIFVJXHJcbiAgICBzZXRXaXRoZHJhd1JlcXVlc3RzKChwcmV2KSA9PlxyXG4gICAgICBwcmV2Lm1hcCgocikgPT4gKHIuaWQgPT09IGlkID8geyAuLi5yLCBzdGF0dXM6ICdhcHByb3ZlZCcgfSA6IHIpKVxyXG4gICAgKTtcclxuXHJcbiAgICBhbGVydCgn4pyFIFdpdGhkcmF3IGFwcHJvdmVkIGFuZCBmdW5kcyBhZGRlZCB0byB5b3VyIHdhbGxldC4nKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBhcHByb3Zpbmcgd2l0aGRyYXc6JywgZXJyKTtcclxuICAgIGFsZXJ0KCdTb21ldGhpbmcgd2VudCB3cm9uZy4nKTtcclxuICB9XHJcbn07XHJcbi8vIGNvbnN0IGhhbmRsZUFjY2VwdFdpdGhkcmF3ID0gYXN5bmMgKHdpdGhkcmF3KSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHsgaWQsIGFtb3VudCwgZnJvbVN1YkFkbWluSWQsIGZyb21Vc2VyU3ViQWRtaW5JZCwgdWlkLCBzdGF0dXMgfSA9IHdpdGhkcmF3O1xyXG5cclxuLy8gICAgIGlmICghaWQgfHwgc3RhdHVzICE9PSAncGVuZGluZycpIHtcclxuLy8gICAgICAgcmV0dXJuIGFsZXJ0KCdJbnZhbGlkIG9yIGFscmVhZHkgcHJvY2Vzc2VkIHJlcXVlc3QuJyk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgbGV0IHJlY2VpdmVyV2FsbGV0UmVmO1xyXG5cclxuLy8gICAgIGlmIChyb2xlID09PSAnYWRtaW4nICYmIGZyb21TdWJBZG1pbklkICYmICFmcm9tVXNlclN1YkFkbWluSWQpIHtcclxuLy8gICAgICAgLy8gQWRtaW4gaXMgYXBwcm92aW5nIHN1YmFkbWluJ3Mgd2l0aGRyYXcgcmVxdWVzdFxyXG4vLyAgICAgICByZWNlaXZlcldhbGxldFJlZiA9IGRvYyhkYiwgJ2FkbWlud2FsbGV0cycsIHVpZCk7IC8vIHN1YmFkbWlu4oCZcyB1aWQgaXMgdGhlIHJlcXVlc3RlclxyXG4vLyAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnc3ViYWRtaW4nICYmIGZyb21Vc2VyU3ViQWRtaW5JZCkge1xyXG4vLyAgICAgICAvLyBTdWJhZG1pbiBpcyBhcHByb3ZpbmcgdXNlcidzIHdpdGhkcmF3IHJlcXVlc3RcclxuLy8gICAgICAgcmVjZWl2ZXJXYWxsZXRSZWYgPSBkb2MoZGIsICdzdWJ3YWxsZXRzJywgdWlkKTsgLy8gdXNlcuKAmXMgdWlkIGlzIHRoZSByZXF1ZXN0ZXJcclxuLy8gICAgIH0gZWxzZSB7XHJcbi8vICAgICAgIHJldHVybiBhbGVydCgnVW5hdXRob3JpemVkIG9yIG1hbGZvcm1lZCB3aXRoZHJhdyByZXF1ZXN0LicpO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IHJlY2VpdmVyU25hcCA9IGF3YWl0IGdldERvYyhyZWNlaXZlcldhbGxldFJlZik7XHJcbi8vICAgICBjb25zdCByZWNlaXZlckJhbGFuY2UgPSByZWNlaXZlclNuYXAuZXhpc3RzKCkgPyByZWNlaXZlclNuYXAuZGF0YSgpLmJhbGFuY2UgPz8gMCA6IDA7XHJcblxyXG4vLyAgICAgLy8g4pyFIENyZWRpdCByZWNlaXZlciB3YWxsZXRcclxuLy8gICAgIGF3YWl0IHNldERvYyhyZWNlaXZlcldhbGxldFJlZiwge1xyXG4vLyAgICAgICBiYWxhbmNlOiByZWNlaXZlckJhbGFuY2UgKyBhbW91bnQsXHJcbi8vICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICB9LCB7IG1lcmdlOiB0cnVlIH0pO1xyXG5cclxuLy8gICAgIC8vIOKchSBNYXJrIHJlcXVlc3QgYXMgYXBwcm92ZWRcclxuLy8gICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdWJ3aXRoZHJhd1JlcXVlc3RzJywgaWQpLCB7XHJcbi8vICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcclxuLy8gICAgICAgYXBwcm92ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyDinIUgVXBkYXRlIHN0YXRlXHJcbi8vICAgICBzZXRXaXRoZHJhd1JlcXVlc3RzKChwcmV2KSA9PlxyXG4vLyAgICAgICBwcmV2Lm1hcCgocikgPT5cclxuLy8gICAgICAgICByLmlkID09PSBpZCA/IHsgLi4uciwgc3RhdHVzOiAnYXBwcm92ZWQnIH0gOiByXHJcbi8vICAgICAgIClcclxuLy8gICAgICk7XHJcblxyXG4vLyAgICAgYWxlcnQoJ+KchSBXaXRoZHJhdyBhcHByb3ZlZCBhbmQgYW1vdW50IGNyZWRpdGVkLicpO1xyXG4vLyAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGFwcHJvdmluZyB3aXRoZHJhdzonLCBlcnIpO1xyXG4vLyAgICAgYWxlcnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGFwcHJvdmluZy4nKTtcclxuLy8gICB9XHJcbi8vIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8TGF5b3V0PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHAtOFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXcteGwgbXgtYXV0byBiZy1ncmF5LTgwMCBwLTYgcm91bmRlZCBzaGFkb3ctbGdcIj5cclxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNiB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICB7cm9sZSA9PT0gJ2FkbWluJyA/ICdBZG1pbjogRnVuZCBTdWJhZG1pbicgOiAnU3ViYWRtaW46IEZ1bmQgVXNlcid9XHJcbiAgICAgICAgICA8L2gxPlxyXG5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTQgdGV4dC1ncmVlbi00MDBcIj5Zb3VyIEJhbGFuY2U6IOKCuXtjdXJyZW50QmFsYW5jZS50b0ZpeGVkKDIpfTwvcD5cclxuXHJcbiAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3JvbGUgPT09ICdhZG1pbicgPyAnU3ViYWRtaW4gRW1haWwnIDogJ1VzZXIgRW1haWwnfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0zIHJvdW5kZWQgYmctZ3JheS03MDAgdGV4dC13aGl0ZSBtYi00XCJcclxuICAgICAgICAgICAgdmFsdWU9e3RhcmdldEVtYWlsfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFRhcmdldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZWFyY2h9XHJcbiAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmcteWVsbG93LTUwMCBob3ZlcjpiZy15ZWxsb3ctNjAwIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0yIHJvdW5kZWQgbWItNFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtsb2FkaW5nID8gJ1NlYXJjaGluZy4uLicgOiAnRmluZCBXYWxsZXQnfVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAge21lc3NhZ2UgJiYgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBtYi00IHRleHQteWVsbG93LTQwMFwiPnttZXNzYWdlfTwvcD59XHJcblxyXG4gICAgICAgICAge3RhcmdldFVpZCAmJiAoXHJcbiAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItMlwiPlJlY2lwaWVudCBCYWxhbmNlOiDigrl7dGFyZ2V0QmFsYW5jZT8udG9GaXhlZCgyKX08L3A+XHJcbiAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW1vdW50IHRvIHRyYW5zZmVyXCJcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTMgcm91bmRlZCBiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIG1iLTRcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2Ftb3VudFRvQWRkfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBbW91bnRUb0FkZChlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRCYWxhbmNlfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyZWVuLTUwMCBob3ZlcjpiZy1ncmVlbi02MDAgdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgVHJhbnNmZXIgRnVuZHNcclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctMnhsIG14LWF1dG8gbXQtMTAgYmctZ3JheS04MDAgcC02IHJvdW5kZWQgc2hhZG93LWxnXCI+XHJcbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNFwiPlBlbmRpbmcgV2l0aGRyYXcgUmVxdWVzdHM8L2gyPlxyXG4gICAgICAgICAgICB7d2l0aGRyYXdSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gKFxyXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtyZXEuaWR9IGNsYXNzTmFtZT1cImJnLWdyYXktNzAwIHAtMyBtYi0zIHJvdW5kZWRcIj5cclxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+VXNlciBFbWFpbDo8L3N0cm9uZz4ge3JlcS5lbWFpbH08L3A+XHJcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkFtb3VudDo8L3N0cm9uZz4g4oK5e3JlcS5hbW91bnR9PC9wPlxyXG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5NZXRob2Q6PC9zdHJvbmc+IHtyZXEubWV0aG9kfSAoe3JlcS5wYXltZW50SWR9KTwvcD5cclxuICAgICAgICAgICAgICAgIHtyZXEuc3RhdHVzID09PSAncGVuZGluZycgPyAoXHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcHktMSBweC00IHJvdW5kZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUFjY2VwdFdpdGhkcmF3KHJlcSl9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBBY2NlcHRcclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgbXQtMiB0ZXh0LWdyZWVuLTQwMCBmb250LXNlbWlib2xkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgQXBwcm92ZWRcclxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvTGF5b3V0PlxyXG4gICk7XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImdldEF1dGgiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJzZXREb2MiLCJnZXRGaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJ3aGVyZSIsImdldERvY3MiLCJkb2MiLCJnZXREb2MiLCJ1cGRhdGVEb2MiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJmaXJlYmFzZUFwcCIsIkxheW91dCIsIlBhZ2UiLCJhdXRoIiwiZGIiLCJjdXJyZW50VXNlciIsInNldEN1cnJlbnRVc2VyIiwicm9sZSIsInNldFJvbGUiLCJjdXJyZW50QmFsYW5jZSIsInNldEN1cnJlbnRCYWxhbmNlIiwidGFyZ2V0RW1haWwiLCJzZXRUYXJnZXRFbWFpbCIsInRhcmdldFVpZCIsInNldFRhcmdldFVpZCIsInRhcmdldEJhbGFuY2UiLCJzZXRUYXJnZXRCYWxhbmNlIiwiYW1vdW50VG9BZGQiLCJzZXRBbW91bnRUb0FkZCIsIm1lc3NhZ2UiLCJzZXRNZXNzYWdlIiwibG9hZGluZyIsInNldExvYWRpbmciLCJ3aXRoZHJhd1JlcXVlc3RzIiwic2V0V2l0aGRyYXdSZXF1ZXN0cyIsInVuc3Vic2NyaWJlIiwidXNlciIsInVzZXJSZWYiLCJ1aWQiLCJzbmFwIiwidXNlckRhdGEiLCJleGlzdHMiLCJkYXRhIiwidXNlclJvbGUiLCJ3YWxsZXRDb2wiLCJ3YWxsZXRSZWYiLCJ3YWxsZXRTbmFwIiwiYmFsYW5jZSIsImxvYWRXaXRoZHJhd1JlcXVlc3RzIiwicSIsInJlc3VsdHMiLCJkb2NzIiwibWFwIiwiaWQiLCJoYW5kbGVTZWFyY2giLCJlbXB0eSIsIndhbGxldCIsInN1YkFkbWluSWQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJoYW5kbGVBY2NlcHRXaXRoZHJhdyIsIndpdGhkcmF3IiwiYW1vdW50IiwiZnJvbVN1YkFkbWluSWQiLCJmcm9tVXNlclN1YkFkbWluSWQiLCJzdGF0dXMiLCJhbGVydCIsInJlY2VpdmVyVWlkIiwicmVjZWl2ZXJXYWxsZXRSZWYiLCJyZWNlaXZlclNuYXAiLCJyZWNlaXZlckJhbGFuY2UiLCJ1cGRhdGVkQXQiLCJhcHByb3ZlZEF0IiwicHJldiIsInIiLCJkaXYiLCJjbGFzc05hbWUiLCJoMSIsInAiLCJ0b0ZpeGVkIiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsImhhbmRsZUFkZEJhbGFuY2UiLCJsZW5ndGgiLCJoMiIsInJlcSIsInN0cm9uZyIsImVtYWlsIiwibWV0aG9kIiwicGF5bWVudElkIiwic3BhbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/app/admin/wallet/page.js\n"));

/***/ })

});